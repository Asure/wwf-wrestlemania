TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                    **************************************************************
       2                    *
       3                    * Software:             Jamie Rivett
       4                    * Initiated:            5/2/94
       5                    *
       6                    * COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
       7                    *
       8                    **************************************************************
       9                    
      10                            .file   "dnkseq3.asm"
      12                            .width  132
      13                            .option b,d,l,t
      14                            .mnolist
      15                    
      16                    
      17                            .include        "macros.h"
      18                            .include        "mproc.equ"             ;Mproc equates
      19                            .include        "sys.equ"
      20                            .include        "display.equ"
      21                            .include        "game.equ"
      22                            .include        "plyr.equ"
      23                            .include        "anim.equ"
      24                            .include        "sound.h"
      25                            .include        "ring.equ"
      26                    
      27                    
      28                            .include        "bretimg.h"
      29                            .include        "razorimg.h"
      30                            .include        "takerimg.h"
      31                            .include        "yokoimg.h"
      32                            .include        "shawnimg.h"
      33                            .include        "bamimg.h"
      34                            .include        "doinkimg.h"
      35                            .include        "leximg.h"
      36                    
      37                            .include        "fontsimg.glo"
      38                            .include        "miscimg.glo"
      39                            .include        "damage.equ"
      40                    
      41                    ******************************************************************************
      42                    * EXTERNAL REFERENCES
      43                    
      44                            .ref    PCNT,MOVE_NAME_ANNC,DO_WAIL,DO_NONO,DO_DOINK_SLAM
      45                            .ref    FIND_AND_KILL_ENDLESS,CALL_MISS_YOKO,triple_sound
      46                            .ref    RNDRNG0,HIT_THE_MAT,SMALL_BOUNCE,CALL_MISSES,CALL_SETUP
      47                            .ref    CALL_THROWN_OUT,CALL_SPECIAL_MOVE,get_leap,shake_all_ropes
      48                            .ref    dnk_dizzy_anim,dnk_2_faceup_getup_anim,no_debris,reduce_bog
      49                            .ref    dnk_4_faceup_getup_anim,dnk_hitonground_anim
      50                            .ref    dnk_faceup_getup_anim,dnk_hitonground_xflip_anim
      51                            .ref    dnk_4_combo_butt_anim,DO_COMBO_MESS,dnk_4_box_anim
      52                            .ref    dnk_4_knee_fall_anim,dnk_flying_kick_anim,NUM_OPPS
      53                            .ref    MAYBE_SHOCKING,target_whoihit,PSTATUS2,royal_rumble
      54                            .ref    punch_dtime1,change_anim_anim,dnk_combo_box_anim
      55                            .ref    dnk_fall_back_anim,dnk_combo_knee_fall_anim
      56                            .ref    pal_getf,lex_break_face2_anim,dnk_combo_flying_kick_anim
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    2

      57                            .ref    set_xdrift,CALL_OTHER_AVERAGE,get_health
      58                            .ref    lex_break_neck2_anim,ckzpos,dnk_stand4_anim
      59                            .ref    yok_3_head_held_brk_anim,lex_break_face_anim
      60                            .ref    free_toss_check,setup_freetoss,process_ptrs
      61                            .ref    dnk_2_hiptoss_anim
      62                    
      63                    ******************************************************************************
      64                    * SYMBOLS DEFINED IN THIS FILE
      65                    
      66                    ******************************************************************************
      67                    * EQUATES FOR THIS FILE
      68                    
      69              0035  TSEC    equ     53
      70                    
      71                    *****************************************************************************
      72                    *
      73                    * JOY BUZZER
      74                    
      75 00000000            SUBR   dnk_2_buzz_anim
      76                    
      77 00000000     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
      78 00000020     8016          .word   ANI_FRICTION,2000h
      79 00000040     8026          .word   ANI_SETSPEED,100h
      80                    
      81 00000060     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
      82 00000070     805f          .word   ANI_SET_WRESTLER_XFLIP
      83                    
      84 00000080     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
      85 000000a0     8003          .word   ANI_ZEROVELS
      86                    
      87 000000b0     8075          .word   ANI_STARTATTACK,AT_PUPPET,20
      88 000000e0                   WL      2,D1TT5Z+FR2
      89 00000110                   WL      2,D1TT5Z+FR3
      90 00000140                   WL      ANI_GOTO,twnicont
      91                    
      92 00000170            SUBR   dnk_4_buzz_anim
      93                    
      94 00000170     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
      95 00000190     8016          .word   ANI_FRICTION,2000h
      96 000001b0     8026          .word   ANI_SETSPEED,100h
      97 000001d0     8003          .word   ANI_ZEROVELS
      98                    
      99 000001e0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
     100 000001f0     805f          .word   ANI_SET_WRESTLER_XFLIP
     101                    
     102                    ;Comes in from head held mode!
     103 00000200     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     104 00000220     800a          .word   ANI_DETACH
     105                    
     106 00000230           twnicont
     107 00000230     8075          .word   ANI_STARTATTACK,AT_PUPPET,20
     108 00000260                   WL      3,D4BZ3A+FR1
     109                    
     110 00000290     8003          .word   ANI_ZEROVELS
     111 000002a0     801a          .WORD   ANI_SOUND,020FH         ;PUT IT THERE
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    3

     112                    
     113 000002c0     8074          .WORD   ANI_ADD_MOVE,MOVE_C_7,2,2
     114 00000300     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,23,62,59,29 ;mode,x,y,w,h
     115 00000360                   WWL     ANI_WAITHITOPP,35,D4BZ3A+FR2
     116 000003a0     8007          .word   ANI_ATTACK_OFF
     117 000003b0           twnicont4
     118 000003b0                   WL      ANI_IFSTATUS2,twnigothim
     119                    
     120                    
     121 000003e0                   WL      35,D4BZ3A+FR2
     122                    
     123                    
     124 00000410                   WL      ANI_GOTO,twnicont2
     125                    
     126 00000440           twnigothim
     127                    ;       WL      ANI_CODE,merge_xvels
     128                    
     129 00000440     8012          .word   ANI_ATTACHZ,0,0,-4              ;x & y don't matter.
     130 00000480     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
     131                    
     132 000004a0                   WWLLW   ANI_SUPERSLAVE2,1,D4BZ3A+FR3,twnipuppet_tbl,0
     133                    
     134                            ;SMART-TARGET, so we buzz the right guy!
     135 00000510                   WL      ANI_CODE,target_whoihit
     136                    
     137 00000540     8006          .word   ANI_ATTACK_ON, AMODE_BUZZ,53,62,50,29   ;mode,x,y,w,h
     138 000005a0                   WL      1,D4BZ3A+FR3
     139 000005d0     8007          .word   ANI_ATTACK_OFF
     140                    
     141 000005e0                   WL      ANI_CODE,start_sparks
     142                    
     143 00000610                   WL      1,D4BZ3A+FR3
     144 00000640                   WL      3,D4BZ3A+FR4
     145 00000670                   WL      3,D4BZ3A+FR5
     146 000006a0                   WL      3,D4BZ3A+FR6
     147 000006d0                   WL      3,D4BZ3A+FR3
     148 00000700                   WL      3,D4BZ3A+FR4
     149                    
     150 00000730     807a          .word   ANI_DRAW_NAME,28
     151                    
     152                    ;       .word   ANI_WAITHITGND
     153                    ;       .word   ANI_ZEROVELS
     154                    
     155 00000750                   WL      3,D4BZ3A+FR5
     156 00000780     8028          .word   ANI_ZERO_XZVELS
     157 00000790                   WL      3,D4BZ3A+FR6
     158 000007c0                   WL      3,D4BZ3A+FR3
     159 000007f0                   WL      3,D4BZ3A+FR4
     160 00000820                   WL      3,D4BZ3A+FR5
     161 00000850                   WL      3,D4BZ3A+FR6
     162 00000880                   WL      3,D4BZ3A+FR3
     163 000008b0                   WL      3,D4BZ3A+FR4
     164 000008e0                   WL      3,D4BZ3A+FR5
     165 00000910                   WL      3,D4BZ3A+FR6
     166 00000940                   WL      3,D4BZ3A+FR3
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    4

     167 00000970                   WL      3,D4BZ3A+FR4
     168 000009a0                   WL      3,D4BZ3A+FR5
     169 000009d0                   WL      3,D4BZ3A+FR6
     170                    
     171                    ;Stay in this buzz sequence longer if player keeps whacking on his punch button!
     172                    
     173 00000a00                   WWL     ANI_SLIDE_BACK,30h,-70000h,twnicont2
     174                    
     175 00000a60                   WL      ANI_SET_YVEL,30000h
     176 00000a90                   WL      3,D4BZ3A+FR2
     177 00000ac0           twnicont2
     178 00000ac0                   WL      6,D4BZ3A+FR2
     179 00000af0                   WL      3,D4BZ3A+FR1
     180                    
     181 00000b20                   WL      ANI_CODE,twnizero_butn
     182                    
     183 00000b50     800a          .word   ANI_DETACH
     184 00000b60     8022          .word   ANI_FACEDOWN
     185 00000b70     8002          .word   ANI_SETMODE,MODE_NORMAL
     186 00000b90     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     187 00000bb0     8049          .word   ANI_END
     188                    
     189 00000bc0            SUBR   dnk_2_buzz2_anim
     190                    ;Running or pushing toward buzzer
     191                    
     192 00000bc0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
     193 00000be0     8016          .word   ANI_FRICTION,2000h
     194 00000c00     8026          .word   ANI_SETSPEED,100h
     195                    
     196                    ;       .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
     197                    ;       .word   ANI_SET_WRESTLER_XFLIP
     198                    
     199 00000c20     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     200                    
     201 00000c40     8075          .word   ANI_STARTATTACK,AT_LEAPING,9
     202 00000c70                   WL      3,D1TT5Z+FR2
     203 00000ca0                   WL      3,D1TT5Z+FR3
     204 00000cd0                   WL      ANI_GOTO,twnicont3
     205                    
     206 00000d00            SUBR   dnk_4_buzz2_anim
     207                    
     208 00000d00     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
     209 00000d20     8016          .word   ANI_FRICTION,2000h
     210 00000d40     8026          .word   ANI_SETSPEED,100h
     211                    
     212                    ;       .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
     213                    ;       .word   ANI_SET_WRESTLER_XFLIP
     214                    
     215 00000d60     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     216                    
     217 00000d80           twnicont3
     218 00000d80     8075          .word   ANI_STARTATTACK,AT_LEAPING,3
     219 00000db0                   WL      3,D4BZ3A+FR1
     220                    
     221 00000de0                   WL      ANI_CODE,get_leap
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    5

     222 00000e10                   WL      ANI_IFNOTSTATUS2,twninormal
     223                    
     224 00000e40     8003          .word   ANI_ZEROVELS
     225 00000e50     803a          .word   ANI_CLR_STATUS
     226 00000e60                   WL      ANI_GOTO,twnicontz
     227                    
     228 00000e90           twninormal
     229                            ;       ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
     230 00000e90                   LEAPATOPP 9,999,38h,80,90000h,TGT_HEAD,80,85,0
     231                    ;       WL      ANI_SET_YVEL,30000h
     232                    
     233 00000f40           twnicontz
     234 00000f40     801a          .WORD   ANI_SOUND,020FH         ;PUT IT THERE
     235 00000f60     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,23,62,59,29 ;mode,x,y,w,h
     236 00000fc0                   WWL     ANI_WAITHITOPP,20,D4BZ3A+FR2
     237 00001000     8007          .word   ANI_ATTACK_OFF
     238 00001010                   WLW     ANI_SET_ZVEL,0h,AM_ABS
     239 00001050                   WL      ANI_GOTO,twnicont4
     240                    
     241 00001080            SUBR   dnk_combo_buzz2_anim
     242                    
     243 00001080     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
     244 000010a0     8016          .word   ANI_FRICTION,2000h
     245 000010c0     8026          .word   ANI_SETSPEED,100h
     246                    
     247 000010e0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     248                    
     249 00001100     8075          .word   ANI_STARTATTACK,AT_LEAPING,3
     250 00001130                   WL      3,D4BZ3A+FR1
     251                    
     252 00001160                   WL      ANI_CODE,get_leap
     253 00001190                   WL      ANI_IFNOTSTATUS2,twninormalc
     254                    
     255 000011c0     8003          .word   ANI_ZEROVELS
     256 000011d0     803a          .word   ANI_CLR_STATUS
     257 000011e0                   WL      ANI_GOTO,twnicontzc
     258                    
     259 00001210           twninormalc
     260                            ;       ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
     261 00001210                   LEAPATOPP 9,999,38h,80,90000h,TGT_HEAD,80,85,0
     262                    
     263 000012c0           twnicontzc
     264 000012c0     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,23,62,59,29 ;mode,x,y,w,h
     265 00001320                   WWL     ANI_WAITHITOPP,20,D4BZ3A+FR2
     266 00001360     8007          .word   ANI_ATTACK_OFF
     267 00001370                   WLW     ANI_SET_ZVEL,0h,AM_ABS
     268 000013b0     8072          .WORD   ANI_INC_COMBO
     269 000013c0                   WL      ANI_CODE,DO_COMBO_MESS
     270 000013f0     8073          .WORD   ANI_CLEAR_COMBO
     271 00001400                   WL      ANI_GOTO,twnicont4
     272                    
     273 00001430           twnizero_butn
     274                    ;Force player to start holding his button down starting at the end
     275                    ;of the current buzz sequence.
     276                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    6

     277 00001430     b5a0          move    *a13(PLYRNUM),a0
         00001440     0580  
     278 00001450                   X16     a0
     279 00001460     0b20          addi    punch_dtime1,a0
         00001470 00000000! 
     280 00001490     57ce          clr     a14
     281 000014a0     81c0          move    a14,*a0
     282 000014b0     0960          rets
     283                    
     284                    
     285 000014c0           start_sparks
     286 000014c0     05ae          move    @no_debris,a14
         000014d0 00000000! 
     287 000014f0     05a1          move    @reduce_bog,a1
         00001500 00000000! 
     288 00001520     542e          or      a1,a14
     289 00001530     cb08          jrnz    twnirets
     290 00001540     4daa          move    a13,a10
     291 00001550                   CREATE0 hand_sparks
     292 000015c0           twnirets
     293 000015c0                   CREATE0 MAYBE_SHOCKING
     294 00001630     0960          rets
     295                    
     296 00001640           twnipuppet_tbl
     297 00001640 00001760'  .long twniBret
     298 00001660 000017b0'  .long twniRazor
     299 00001680 00001800'  .long twniTaker
     300 000016a0 00001850'  .long twniYokozuna
     301 000016c0 000018a0'  .long twniShawn
     302 000016e0 000018f0'  .long twniBamBam
     303 00001700 00001940'  .long twniDoink
     304 00001720 00001990'  .long twniAdam
     305 00001740 000019b0'  .long twniLex
     306                    
     307 00001760           twniBret
     308                            .ref    H4BZ4A
     309 00001760            LWWW H4BZ4A+FR1,80,28,1
     310 000017b0           twniRazor
     311                            .ref    R4BZ4A
     312 000017b0            LWWW R4BZ4A+FR1,75,30,1
     313 00001800           twniTaker
     314                            .ref    U4BZ4A
     315 00001800            LWWW U4BZ4A+FR1,75,30,1
     316 00001850           twniYokozuna
     317                            .ref    Y4BZ4A
     318 00001850            LWWW Y4BZ4A+FR1,75,26,1
     319 000018a0           twniShawn
     320                            .ref    S4BZ4A
     321 000018a0            LWWW S4BZ4A+FR1,75,24,1
     322 000018f0           twniBamBam
     323                            .ref    B4BZ4A
     324 000018f0            LWWW B4BZ4A+FR1,75,15,1
     325 00001940           twniDoink
     326 00001940            LWWW D4BZ4A+FR1,75,30,1
     327 00001990           twniAdam
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    7

     328 00001990 00000000   .long 0
     329 000019b0           twniLex
     330                            .ref    L4BZ4A
     331 000019b0            LWWW L4BZ4A+FR1,75,23,1
     332                    
     333                    *****************************************************************************
     334                    *
     335                    * GET BUZZED FROM DOINK
     336                    
     337 00001a00            SUBR   dnk_get_buzz_anim
     338                    
     339 00001a00     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
     340                    ;       .word   ANI_ZEROVELS
     341 00001a20     8026          .word   ANI_SETSPEED,100h
     342                    
     343                    ;       .word   ANI_XFLIP
     344 00001a40     8010          .word   ANI_GRAVITY_OFF
     345                    
     346                    
     347                    ;Put this Doink into the blue doink pal, then replace whatever
     348                    ;pal he was using at the end!
     349                    
     350                    ;We have to change pals on whatever guy we are showing in order
     351                    ;to show the blue skeleton.
     352                    
     353 00001a50                   WL      ANI_CODE,set_position
     354 00001a80                   WL      2,D4SK4A+FR1
     355 00001ab0                   WL      3,D4BZ4A+FR1
     356                    
     357 00001ae0                   WL      ANI_CODE,make_white
     358 00001b10                   WL      3,D4SK4A+FR1
     359 00001b40                   WL      ANI_CODE,make_norm
     360                            
     361 00001b70                   WL      3,D4BZ4A+FR1
     362 00001ba0                   WL      3,D4SK4A+FR1
     363 00001bd0                   WL      3,D4BZ4A+FR1
     364 00001c00                   WL      3,D4SK4A+FR1
     365 00001c30                   WL      ANI_CODE,make_white
     366 00001c60                   WL      3,D4BZ4A+FR1
     367 00001c90                   WL      ANI_CODE,make_norm
     368 00001cc0                   WL      3,D4SK4A+FR1
     369 00001cf0                   WL      3,D4BZ4A+FR1
     370 00001d20                   WL      3,D4SK4A+FR1
     371 00001d50                   WL      3,D4BZ4A+FR1
     372 00001d80                   WL      ANI_CODE,make_white
     373 00001db0                   WL      3,D4SK4A+FR1
     374 00001de0                   WL      ANI_CODE,make_norm
     375 00001e10                   WL      3,D4BZ4A+FR1
     376 00001e40                   WL      3,D4SK4A+FR1
     377 00001e70                   WL      ANI_CODE,start_smoke
     378                    
     379 00001ea0     800a          .word   ANI_DETACH
     380 00001eb0     800f          .word   ANI_GRAVITY_ON
     381 00001ec0                   WL      ANI_SET_YVEL,60000h
     382 00001ef0                   WLW     ANI_SET_XVEL,-30000h,AM_FACE_REL
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    8

     383 00001f30                   WLW     ANI_SET_ZVEL,20000h,AM_ABS
     384 00001f70                   WL      ANI_CODE,dojqmake_black
     385 00001fa0                   WL      3,D4BZ4A+FR1
     386 00001fd0                   WL      ANI_CODE,make_norm
     387 00002000                   WL      3,D4BZ4A+FR1
     388 00002030                   WL      ANI_CODE,dojqmake_black
     389 00002060                   WL      3,D4BZ4A+FR1
     390 00002090                   WL      ANI_CODE,make_norm
     391 000020c0                   WL      3,D4BZ4A+FR1
     392 000020f0                   WL      ANI_CODE,dojqmake_black
     393 00002120                   WL      3,D4BZ4A+FR1
     394 00002150                   WL      ANI_CODE,make_norm
     395 00002180                   WL      3,D4BZ4A+FR1
     396                    
     397 000021b0     800b          .word   ANI_WAITHITGND
     398 000021c0     800c          .word   ANI_XFLIP
     399 000021d0     8022          .word   ANI_FACEDOWN
     400 000021e0     8015          .word   ANI_OFFSET,-20,0,0                      ;x,y,z
     401                    
     402 00002220                   WL      1,D4ST4E+FR3
     403                    
     404 00002250                   WL      ANI_CODE,am_I_dead
     405                    ;If I'm dead, goto fall back
     406 00002280                   WL      ANI_IFNOTSTATUS2,dojqnodead
     407                    
     408 000022b0                   WL      ANI_CHANGEANIM,dnk_fall_back_anim
     409                    ;       .word   ANI_END
     410                    
     411 000022e0           dojqnodead
     412 000022e0     8002          .word   ANI_SETMODE,MODE_NORMAL
     413 00002300     8049          .word   ANI_END
     414                    
     415 00002310            SUBR   am_I_dizzy
     416 00002310     b5a1          move    *a13(ANIMODE),a1
         00002320     0660  
     417 00002330     0b81          andni   MODE_STATUS2,a1
         00002340 00000200  
     418 00002360     b5a0          move    *a13(PLYRMODE),a0
         00002370     05c0  
     419 00002380     0b40          cmpi    MODE_DEAD,a0
         00002390     fff6  
     420 000023a0     ca06          jrz     dojqnot_dizzy
     421 000023b0     b5a0          move    *a13(PLYR_DIZZY),a0
         000023c0     0600  
     422 000023d0     ca03          jrz     dojqnot_dizzy
     423 000023e0     0ba1          ori     MODE_STATUS2,a1
         000023f0 00000200  
     424 00002410           dojqnot_dizzy
     425 00002410     b02d          move    a1,*a13(ANIMODE)
         00002420     0660  
     426 00002430     0960          rets
     427                    
     428 00002440            SUBR   am_I_dead
     429                            
     430 00002440     b5a1          move    *a13(PLYRNUM),a1
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE    9

         00002450     0580  
     431 00002460     0d5f          calla   get_health
         00002470 00000000! 
     432 00002490     cb0c          jrnz    dojqnotdead
     433                    
     434 000024a0     b5a1          move    *a13(ANIMODE),a1
         000024b0     0660  
     435 000024c0     0ba1          ori     MODE_STATUS2,a1
         000024d0 00000200  
     436 000024f0     b02d          move    a1,*a13(ANIMODE)
         00002500     0660  
     437 00002510     09c1          movi    MODE_DEAD,a1
         00002520     0009  
     438 00002530     b02d          move    a1,*a13(PLYRMODE)
         00002540     05c0  
     439 00002550     0960          rets
     440 00002560           dojqnotdead
     441 00002560     b5a1          move    *a13(ANIMODE),a1
         00002570     0660  
     442 00002580     0b81          andni   MODE_STATUS2,a1
         00002590 00000200  
     443 000025b0     b5a0          move    *a13(PLYRMODE),a0
         000025c0     05c0  
     444 000025d0     0b40          cmpi    MODE_DEAD,a0
         000025e0     fff6  
     445 000025f0     cb03          jrnz    dojqnot_dead
     446 00002600     0ba1          ori     MODE_STATUS2,a1
         00002610 00000200  
     447 00002630           dojqnot_dead
     448 00002630     b02d          move    a1,*a13(ANIMODE)
         00002640     0660  
     449 00002650     0960          rets
     450                    
     451 00002660            SUBR   make_white
     452 00002660     09ce          movi    0101h,a14
         00002670     0101  
     453 00002680     b1cd          move    a14,*a13(OBJ_CONST)
         00002690     0790  
     454 000026a0     b5ae          move    *a13(OBJ_CONTROL),a14
         000026b0     0780  
     455 000026c0     0b8e          andni   01111b,a14
         000026d0 0000000f  
     456 000026f0     0bae          ori     M_CONNON,a14
         00002700 00000008  
     457 00002720     b1cd          move    a14,*a13(OBJ_CONTROL)
         00002730     0780  
     458 00002740     0960          rets
     459                    
     460 00002750           dojqmake_black
     461 00002750     09ce          movi    0b0bh,a14
         00002760     0b0b  
     462 00002770     b1cd          move    a14,*a13(OBJ_CONST)
         00002780     0790  
     463 00002790     b5ae          move    *a13(OBJ_CONTROL),a14
         000027a0     0780  
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   10

     464 000027b0     0b8e          andni   01111b,a14
         000027c0 0000000f  
     465 000027e0     0bae          ori     M_CONNON,a14
         000027f0 00000008  
     466 00002810     b1cd          move    a14,*a13(OBJ_CONTROL)
         00002820     0780  
     467 00002830     0960          rets
     468                    
     469 00002840            SUBR   make_norm
     470 00002840     b5ae          move    *a13(OBJ_CONTROL),a14
         00002850     0780  
     471 00002860     0b8e          andni   01111b,a14
         00002870 0000000f  
     472 00002890     0bae          ori     DMAWNZ,a14
         000028a0 00008002  
     473 000028c0     b1cd          move    a14,*a13(OBJ_CONTROL)
         000028d0     0780  
     474 000028e0     0960          rets
     475                    
     476 000028f0            SUBR   set_position
     477 000028f0     b7a0          move    *a13(WHOHITME),a0,L
         00002900     04e0  
     478 00002910     b401          move    *a0(OBJ_XPOSINT),a1
         00002920     0110  
     479 00002930     b5a2          move    *a13(OBJ_XPOSINT),a2
         00002940     0110  
     480 00002950     4822          cmp     a1,a2
     481 00002960     c404          jrlt    dojqlft
     482 00002970           dojqrgt
     483 00002970     0b01          addi    140,a1
         00002980     008c  
     484 00002990     b542          move    *a10(OBJ_XPOSINT),a2
         000029a0     0110  
     485 000029b0     0be1  dojqlft subi    70,a1
         000029c0     ffb9  
     486                    ;       move    a1,*a13(OBJ_XPOSINT)
     487 000029d0     b401          move    *a0(OBJ_YPOSINT),a1
         000029e0     0130  
     488 000029f0     0b01          addi    12,a1
         00002a00     000c  
     489                    ;       move    a1,*a13(OBJ_YPOSINT)
     490 00002a10     b401          move    *a0(OBJ_ZPOSINT),a1
         00002a20     0150  
     491 00002a30     0be1          subi    20,a1
         00002a40     ffeb  
     492                    ;       move    a1,*a13(OBJ_ZPOSINT)
     493 00002a50     09e0          movi    DNKBLU_P,a0
         00002a60 00000000! 
     494 00002a80     0d5f          calla   pal_getf
         00002a90 00000000! 
     495 00002ab0     b00d          move    a0,*a13(SKELETON_PAL)
         00002ac0     08b0  
     496 00002ad0     b5a0          move    *a13(OBJ_PAL),a0
         00002ae0     07a0  
     497 00002af0     b00d          move    a0,*a13(MY_PAL)
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   11

         00002b00     08a0  
     498                            
     499 00002b10     0960          rets
     500                    
     501 00002b20            SUBR   set_skeleton_pal
     502 00002b20     b5a0          move    *a13(SKELETON_PAL),a0
         00002b30     08b0  
     503 00002b40     b00d          move    a0,*a13(OBJ_PAL)
         00002b50     07a0  
     504                    
     505                            ;set the TEMP_PAL bit
     506 00002b60     b5ae          move    *a13(STATUS_FLAGS),a14
         00002b70     0b50  
     507 00002b80     0bae          ori     M_TEMP_PAL,a14
         00002b90 00000004  
     508 00002bb0     b1cd          move    a14,*a13(STATUS_FLAGS)
         00002bc0     0b50  
     509                    
     510 00002bd0     0960          rets
     511                    
     512 00002be0            SUBR   set_my_pal
     513 00002be0     b5a0          move    *a13(MY_PAL),a0
         00002bf0     08a0  
     514 00002c00     b00d          move    a0,*a13(OBJ_PAL)
         00002c10     07a0  
     515                    
     516                            ;clear TEMP_PAL bit
     517 00002c20     b5ae          move    *a13(STATUS_FLAGS),a14
         00002c30     0b50  
     518 00002c40     0b8e          andni   M_TEMP_PAL,a14
         00002c50 00000004  
     519 00002c70     b1cd          move    a14,*a13(STATUS_FLAGS)
         00002c80     0b50  
     520                    
     521 00002c90     0960          rets
     522                    
     523 00002ca0            SUBR   start_smoke
     524                    
     525 00002ca0     05ae          move    @no_debris,a14
         00002cb0 00000000! 
     526 00002cd0     cb0c          jrnz    dojqrets
     527 00002ce0     05ae          move    @reduce_bog,a14
         00002cf0 00000000! 
     528 00002d10     cb08          jrnz    dojqrets
     529                    
     530 00002d20     4daa          move    a13,a10
     531 00002d30                   CREATE0 body_smoke
     532                    
     533 00002da0     0960  dojqrets        rets
     534                    
     535                    *****************************************************************************
     536                    
     537 00002db0            SUBR   dnk_3_pile_driver_anim
     538                    
     539 00002db0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   12

     540 00002dd0     8003          .word   ANI_ZEROVELS
     541 00002de0     8026          .word   ANI_SETSPEED,100h
     542 00002e00     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     543                    
     544                    ;Put cool cheers here
     545                    
     546 00002e20     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,32,15,45,41 ;mode,x,y,w,h
     547 00002e80                   WWL     ANI_WAITHITOPP,4,D4GH3A+FR8     ;D3PP3Z+FR1
     548 00002ec0     8007          .word   ANI_ATTACK_OFF
     549                    
     550 00002ed0                   WL      ANI_IFNOTSTATUS2,lppomissed
     551                    
     552                    ;Check to see if I have tried to pile drive Yokozuna!
     553                    
     554 00002f00     801a          .word   ANI_SOUND,82h                   ;Effort grunt
     555                    
     556                    ;got him
     557 00002f20     8012          .word   ANI_ATTACHZ,0,0,-2              ;x & y don't matter.
     558 00002f60     8050          .word   ANI_SETOPPMODE,MODE_GHOST
     559 00002f80     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
     560                    
     561 00002fa0                   WWLLW   ANI_SUPERSLAVE2,4,D3PP3Z+FR1,lppopuppet_tbl,0
     562 00003010     800b          .word   ANI_WAITHITGND
     563                    
     564 00003020     8074          .WORD   ANI_ADD_MOVE,MOVE_C_5,2,2
     565                    
     566 00003060                   WWLLW   ANI_SUPERSLAVE2,4,D3PP3Z+FR2,lppopuppet_tbl,1
     567 000030d0                   WWLLW   ANI_SUPERSLAVE2,20,D3PP3Z+FR3,lppopuppet_tbl,2
     568 00003140                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3Z+FR4,lppopuppet_tbl,3
     569                    
     570 000031b0                   WL      ANI_SET_YVEL,80000h
     571                    ;Float toward the center of ring!
     572 000031e0                   WL      ANI_CODE,set_xdrift
     573                    
     574 00003210                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3Z+FR5,lppopuppet_tbl,4
     575 00003280     8015          .word   ANI_OFFSET,0,26,0                       ;x,y,z
     576                    
     577 000032c0                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3Z+FR6,lppopuppet_tbl,5
     578 00003330                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR6,lppopuppet_tbl,6
     579 000033a0                   WWLLW   ANI_SUPERSLAVE2,7,D4HS3B+FR6,lppopuppet_tbl,7
     580                    
     581                    ;Mess with the physics!
     582                    
     583 00003410                   WL      ANI_SET_YVEL,-20000h
     584                    
     585 00003440     800b          .word   ANI_WAITHITGND
     586 00003450     8003          .word   ANI_ZEROVELS
     587                    
     588                    ;Maybe do a bounce
     589                    
     590                            ;impact
     591 00003460                   WL      ANI_CODE,HIT_THE_MAT
     592 00003490     8037          .word   ANI_SHAKEALL,2
     593 000034b0     801f          .word   ANI_SHAKER,40
     594 000034d0     8042          .word   ANI_DAMAGEOPP,D_PILEDRIVER,RD_PILEDRIVER
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   13

     595                    
     596 00003500                   WWLLW   ANI_SUPERSLAVE2,4,D4HS3B+FR7,lppopuppet_tbl,8
     597 00003570                   WWLLW   ANI_SUPERSLAVE2,4,D4HS3B+FR8,lppopuppet_tbl,9
     598                    
     599 000035e0                   WL      ANI_CODE,CALL_SPECIAL_MOVE
     600 00003610                   WL      ANI_CODE,lpposet_opp_xflip
     601                    
     602 00003640                   WL      ANI_SLAVEANIM,lpporollout_tbl
     603 00003670     8051          .word   ANI_CLROPPMODE,MODE_GHOST
     604 00003690     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
     605                    
     606 000036b0     800a          .word   ANI_DETACH
     607 000036c0                   WL      18,D4HS3B+FR8
     608                    
     609 000036f0                   WLW     ANI_SET_ZVEL,-10000h,AM_ABS
     610                    
     611                    ;Getting up, set no_collis
     612 00003730     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOCOLLIS|MODE_NOAUTOFLIP    ;uninterruptable
     613                    
     614 00003750                   WL      3,D3GU4A+FR5
     615 00003780                   WL      3,D3GU4A+FR6
     616                    ;Check for a flip here
     617 000037b0                   WL      1,D3GU4A+FR7
     618 000037e0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
     619 000037f0     805f          .word   ANI_SET_WRESTLER_XFLIP
     620 00003800                   WL      2,D3GU4A+FR7
     621 00003830                   WL      3,D3GU4A+FR8
     622 00003860                   WL      3,D3GU4A+FR9
     623                    
     624 00003890     8068          .word   ANI_SAFE_TIME,30
     625                    
     626 000038b0                   WL      ANI_CODE,free_toss_check
     627 000038e0                   WL      ANI_IFNOTSTATUS2,lppono_freetoss
     628 00003910     8006          .word   ANI_ATTACK_ON,AMODE_HITCHECK,37,88,63,9
     629 00003970                   WL      1,D3GU4A+FR9
     630 000039a0     8007          .word   ANI_ATTACK_OFF
     631 000039b0                   WL      ANI_IFNOTSTATUS2,lppono_freetoss
     632                    
     633                            ;Opponent standing too close -- free toss
     634 000039e0                   WL      ANI_CODE,setup_freetoss
     635                            .ref    dnk_4_push_anim
     636 00003a10                   WL      ANI_CHANGEANIM,dnk_4_push_anim
     637 00003a40           lppono_freetoss
     638                    
     639 00003a40     8022          .word   ANI_FACEDOWN
     640 00003a50     8002          .word   ANI_SETMODE,MODE_NORMAL
     641 00003a70     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     642 00003a90     8049          .word   ANI_END
     643                    
     644                    
     645 00003aa0           lppomissed
     646 00003aa0                   WL      ANI_CODE,CALL_MISSES
     647 00003ad0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
     648                    
     649 00003af0                   WL      3,D3PP3Z+FR1
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   14

     650 00003b20                   WL      3,D3PP3Z+FR2
     651 00003b50                   WL      3,D3PP3Z+FR3
     652 00003b80                   WL      3,D3PP3Z+FR4
     653                    
     654 00003bb0                   WL      ANI_SET_YVEL,80000h
     655                    
     656 00003be0                   WL      3,D3PP3Z+FR5
     657 00003c10     8015          .word   ANI_OFFSET,0,26,0                       ;x,y,z
     658                    
     659 00003c50                   WL      3,D3PP3Z+FR6
     660 00003c80                   WL      3,D4HS3B+FR6
     661 00003cb0                   WL      7,D4HS3B+FR6
     662                    
     663                    ;       WL      ANI_SET_YVEL,-20000h
     664                    
     665 00003ce0     800b          .word   ANI_WAITHITGND
     666 00003cf0     8003          .word   ANI_ZEROVELS
     667                    
     668                    ;Maybe do a bounce
     669                    
     670                            ;impact
     671 00003d00                   WL      ANI_CODE,SMALL_BOUNCE
     672 00003d30     8037          .word   ANI_SHAKEALL,2
     673 00003d50     801f          .word   ANI_SHAKER,30
     674                    
     675 00003d70                   WL      4,D4HS3B+FR7
     676 00003da0                   WL      4,D4HS3B+FR8
     677                    
     678                    ;       .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
     679 00003dd0                   WL      18,D4HS3B+FR8
     680                    
     681 00003e00                   WLW     ANI_SET_ZVEL,-10000h,AM_ABS
     682                    
     683                    ;Getting up, set no_collis
     684 00003e40     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOCOLLIS|MODE_NOAUTOFLIP    ;uninterruptable
     685                    
     686 00003e60                   WL      3,D3GU4A+FR5
     687 00003e90                   WL      3,D3GU4A+FR6
     688                    ;Check for a flip here
     689 00003ec0                   WL      1,D3GU4A+FR7
     690 00003ef0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
     691 00003f00     805f          .word   ANI_SET_WRESTLER_XFLIP
     692 00003f10                   WL      2,D3GU4A+FR7
     693 00003f40                   WL      3,D3GU4A+FR8
     694 00003f70                   WL      3,D3GU4A+FR9
     695                    
     696 00003fa0     8068          .word   ANI_SAFE_TIME,30
     697                    
     698 00003fc0                   WL      ANI_CODE,free_toss_check
     699 00003ff0                   WL      ANI_IFNOTSTATUS2,lppono_freetoss2
     700 00004020     8006          .word   ANI_ATTACK_ON,AMODE_HITCHECK,37,88,63,9
     701 00004080                   WL      1,D3GU4A+FR9
     702 000040b0     8007          .word   ANI_ATTACK_OFF
     703 000040c0                   WL      ANI_IFNOTSTATUS2,lppono_freetoss2
     704                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   15

     705                            ;Opponent standing too close -- free toss
     706 000040f0                   WL      ANI_CODE,setup_freetoss
     707 00004120                   WL      ANI_CHANGEANIM,dnk_4_push_anim
     708 00004150           lppono_freetoss2
     709                    
     710 00004150     8022          .word   ANI_FACEDOWN
     711 00004160     8002          .word   ANI_SETMODE,MODE_NORMAL
     712 00004180     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     713 000041a0     8049          .word   ANI_END
     714                    
     715 000041b0           lpposet_opp_xflip
     716 000041b0     b7a0          move    *a13(ATTACH_PROC),a0,L
         000041c0     03e0  
     717                    
     718 000041d0     b40e          move    *a0(OBJ_CONTROL),a14
         000041e0     0780  
     719 000041f0     0bce          xori    M_FLIPH,a14
         00004200 00000010  
     720 00004220     b1c0          move    a14,*a0(OBJ_CONTROL)
         00004230     0780  
     721                    
     722 00004240     0960          rets
     723                    
     724                    ;Check to see if I have tried to pile drive Yokozuna!
     725                    
     726 00004250            SUBR   is_this_yoko
     727                    
     728 00004250     b7a0          move    *a13(ATTACH_PROC),a0,L
         00004260     03e0  
     729 00004270     b400          move    *a0(WRESTLERNUM),a0
         00004280     0590  
     730 00004290     0b40          cmpi    3,a0
         000042a0     fffc  
     731 000042b0     cb08          jrnz    lppook
     732                    
     733                    ;Yes, this is Yoko!
     734                    
     735 000042c0     b5a1          move    *a13(ANIMODE),a1
         000042d0     0660  
     736 000042e0     0ba1          ori     MODE_STATUS2,a1
         000042f0 00000200  
     737 00004310     b02d          move    a1,*a13(ANIMODE)
         00004320     0660  
     738 00004330     0960          rets
     739 00004340           lppook
     740 00004340     b5a1          move    *a13(ANIMODE),a1
         00004350     0660  
     741 00004360     0b81          andni   MODE_STATUS2,a1
         00004370 00000200  
     742 00004390     b02d          move    a1,*a13(ANIMODE)
         000043a0     0660  
     743 000043b0     0960          rets
     744                    
     745                    ;For Yoko breaking free
     746 000043c0           lppobreak
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   16

     747 000043c0     b7a2          move    *a13(ATTACH_PROC),a2,L
         000043d0     03e0  
     748 000043e0     09e0          movi    yok_3_head_held_brk_anim,a0
         000043f0 00000000! 
     749                    ;a0 = * animation script
     750                    ;a2 = * wrestler process
     751 00004410     0d5f          calla   change_anim_anim
         00004420 00000000! 
     752 00004440     0960          rets
     753                    
     754                    
     755 00004450           lppopuppet_tbl
     756 00004450 00004570'  .long lppoBret
     757 00004470 000048b0'  .long lppoRazor
     758 00004490 00004bf0'  .long lppoTaker
     759 000044b0 00004f30'  .long lppoYokozuna
     760 000044d0 000052c0'  .long lppoShawn
     761 000044f0 00005600'  .long lppoBamBam
     762 00004510 00005940'  .long lppoDoink
     763 00004530 00005c80'  .long lppoAdam
     764 00004550 00005ca0'  .long lppoLex
     765                    
     766 00004570           lppoBret
     767                            .ref    H4AM3A,H3BF3A,H3PP3X
     768 00004570            LWWW H4AM3A+FR5,48,-37,0
     769 000045c0            LWWW H3BF3A+FR3,32,-34,0
     770 00004610            LWWW H3PP3X+FR1,9,-30,0
     771 00004660            LWWW H3PP3X+FR2,4,9,0
     772 000046b0            LWWW H3PP3X+FR3,13,23,0
     773 00004700            LWWW H3PP3X+FR4,36,23,0
     774 00004750            LWWW H3PP3X+FR5,54,44,0
     775 000047a0            LWWW H3PP3X+FR6,60,48,0
     776 000047f0            LWWW H3PP3X+FR7,63,18,0
     777 00004840            LWWW H3PP3X+FR8,59,8,0
     778 00004890 00000000   .long 0
     779 000048b0           lppoRazor
     780                            .ref    R4AM4B,R3BF3A,R3GP3Z
     781 000048b0            LWWW R4AM4B+FR5,42,-33,0
     782 00004900            LWWW R3BF3A+FR9,26,-32,0
     783 00004950            LWWW R3GP3Z+FR1,14,-20,0
     784 000049a0            LWWW R3GP3Z+FR2,14,-16,0
     785 000049f0            LWWW R3GP3Z+FR3,23,6,0
     786 00004a40            LWWW R3GP3Z+FR4,54,22,0
     787 00004a90            LWWW R3GP3Z+FR5,63,41,0
     788 00004ae0            LWWW R3GP3Z+FR6,70,43,0
     789 00004b30            LWWW R3GP3Z+FR7,66,32,0
     790 00004b80            LWWW R3GP3Z+FR8,62,0,0
     791 00004bd0 00000000   .long 0
     792 00004bf0           lppoTaker
     793                            .ref    U4MP4A,U4BF3Z,U3PP3X,U3GP3X
     794 00004bf0            LWWW U4MP4A+FR7,46,-11,0
     795 00004c40            LWWW U4BF3Z+FR1,28,-26,0
     796 00004c90            LWWW U3PP3X+FR1,15,-22,1
     797 00004ce0            LWWW U3PP3X+FR2,18,-18,1
     798 00004d30            LWWW U3PP3X+FR3,20,-22,1
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   17

     799 00004d80            LWWW U3PP3X+FR4,36,-8,1
     800 00004dd0            LWWW U3PP3X+FR5,57,35,1
     801 00004e20            LWWW U3PP3X+FR6,65,60,1
     802 00004e70            LWWW U3GP3X+FR1,62,8,1
     803 00004ec0            LWWW U3GP3X+FR2,69,-7,1
     804 00004f10 00000000   .long 0
     805 00004f30           lppoYokozuna
     806                            .ref    Y4AM4A,Y3BF3A,Y3PP3Q,Y3FD3N
     807 00004f30            LWWW Y4AM4A+FR4,59,-27,0
     808 00004f80            LWWW Y3BF3A+FR11,31,-25,0
     809 00004fd0            LWWW Y3PP3Q+FR1,16,-15,0
     810 00005020            LWWW Y3PP3Q+FR2,13,-17,0
     811 00005070            LWWW Y3PP3Q+FR3,26,-20,0
     812 000050c0            LWWW Y3PP3Q+FR4,52,-18,0
     813 00005110            LWWW Y3PP3Q+FR6,50,5,0
     814 00005160            LWWW Y3PP3Q+FR7,52,13,0
     815 000051b0            LWWW Y3FD3N+FR2,57,13,0
     816 00005200            LWWW Y3FD3N+FR3,58,22,0
     817 00005250            LWWW Y3FD3N+FR4,63,11,0
     818 000052a0 00000000   .long 0
     819 000052c0           lppoShawn
     820                            .ref    S4BF3A,S3BF3A,S3GP3X,S3OS3X,S3FD3X
     821 000052c0            LWWW S4BF3A+FR3,25,-24,0
     822 00005310            LWWW S3BF3A+FR5,14,-39,0
     823 00005360            LWWW S3GP3X+FR1,15,-24,0
     824 000053b0            LWWW S3GP3X+FR2,12,-19,0
     825 00005400            LWWW S3GP3X+FR3,27,-5,0
     826 00005450            LWWW S3GP3X+FR4,53,23,0
     827 000054a0            LWWW S3GP3X+FR5,67,39,0
     828 000054f0            LWWW S3OS3X+FR8,71,31,1
     829 00005540            LWWW S3FD3X+FR2,69,23,0
     830 00005590            LWWW S3GP3X+FR6,66,4,0
     831 000055e0 00000000   .long 0
     832 00005600           lppoBamBam
     833                            .ref    B3BF3C,B4AM4A,B3PP3Q,B3FD3C
     834 00005600            LWWW B3BF3C+FR5,48,-27,0
     835 00005650            LWWW B4AM4A+FR5,27,-24,0
     836 000056a0            LWWW B3PP3Q+FR1,12,-26,0
     837 000056f0            LWWW B3PP3Q+FR2,11,-15,0
     838 00005740            LWWW B3PP3Q+FR3,31,3,0
     839 00005790            LWWW B3PP3Q+FR4,57,16,0
     840 000057e0            LWWW B3PP3Q+FR5,64,33,0
     841 00005830            LWWW B3PP3Q+FR6,57,40,0
     842 00005880            LWWW B3PP3Q+FR7,60,28,0
     843 000058d0            LWWW B3PP3Q+FR7,61,46,0
     844                    ; LWWW B3PP3Q+FR7,61,46,0
     845                    ; LWWW B3FD3C+FR1,57,13,0
     846 00005920 00000000   .long 0
     847 00005940           lppoDoink
     848 00005940            LWWW D3HT3Z+FR1,36,-41,1
     849 00005990            LWWW D3BF3A+FR1,27,-34,0
     850 000059e0            LWWW D3PD3Z+FR1,16,-35,1
     851 00005a30            LWWW D3PD3Z+FR2,13,-22,1
     852 00005a80            LWWW D3PD3Z+FR3,23,0,1
     853 00005ad0            LWWW D3PD3Z+FR4,39,25,1
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   18

     854 00005b20            LWWW D3PD3Z+FR5,46,33,1
     855 00005b70            LWWW D3PD3Z+FR6,58,23,1
     856 00005bc0            LWWW D3PD3Z+FR8,58,7,1
     857 00005c10            LWWW D3PD3Z+FR9,59,-3,1
     858 00005c60 00000000   .long 0
     859 00005c80           lppoAdam
     860 00005c80 00000000   .long 0
     861 00005ca0           lppoLex
     862                            .ref    L4AM4B,L3BF3B,L3GP3Z,L3FH3A,L3FD3B
     863 00005ca0            LWWW L4AM4B+FR6,52,-39,0
     864 00005cf0            LWWW L3BF3B+FR1,9,-34,0
     865 00005d40            LWWW L3GP3Z+FR1,13,-22,0
     866 00005d90            LWWW L3GP3Z+FR2,16,-16,0
     867 00005de0            LWWW L3GP3Z+FR3,27,-16,0
     868 00005e30            LWWW L3GP3Z+FR4,46,-5,0
     869 00005e80            LWWW L3GP3Z+FR5,63,13,0
     870 00005ed0            LWWW L3GP3Z+FR6,67,33,0
     871 00005f20            LWWW L3FH3A+FR6,58,20,0
     872 00005f70            LWWW L3FD3B+FR1,61,2,0
     873 00005fc0 00000000   .long 0
     874                    
     875 00005fe0           lpporollout_tbl
     876 00005fe0                   REFLONG hrt_break_neck2_anim,rzr_break_neck2_anim
     877 00006020                   REFLONG und_break_neck2_anim
     878 00006040                   REFLONG yok_break_neck2_anim
     879 00006060                   REFLONG shn_break_neck2_anim,bam_break_neck2_anim
     880 000060a0                   REFLONG dnk_break_neck2_anim
     881 000060c0 00000000          .long   0
     882 000060e0                   REFLONG lex_break_neck2_anim
     883                    
     884                    
     885                    *****************************************************************************
     886 00006100            SUBR   dnk_combo_head_slam_anim
     887                    
     888 00006100     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
     889 00006120     8003          .word   ANI_ZEROVELS
     890 00006130     8026          .word   ANI_SETSPEED,100h
     891 00006150     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
     892                    
     893                    ;Put cool cheers here
     894                    
     895 00006170     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,32,49,50,21 ;mode,x,y,w,h
     896                    
     897 000061d0                   WWL     ANI_WAITHITOPP,3,D4GH3A+FR8
     898 00006210     8007          .word   ANI_ATTACK_OFF
     899                    
     900 00006220                   WL      ANI_IFNOTSTATUS2,eblmmissedc
     901                    
     902                    ;got him
     903 00006250     8012          .word   ANI_ATTACHZ,0,0,-2              ;x & y don't matter.
     904 00006290     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
     905                    
     906                    ; attacker sequence
     907 000062b0                   WL      ANI_CODE,DO_DOINK_SLAM
     908 000062e0                   WL      ANI_SET_YVEL,60000h     ;50000h
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   19

     909                    
     910                    ;Float toward the center of ring!
     911 00006310                   WL      ANI_CODE,set_xdrift
     912                    
     913 00006340     8062          .word   ANI_SET_RPTCOUNT,4      ;2 times
     914 00006360     8061          .word   ANI_CLR_BUTCOUNT
     915                    
     916 00006370                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR1,eblmpuppet_tbl,0
     917 000063e0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR2,eblmpuppet_tbl,1
     918 00006450                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR3,eblmpuppet_tbl,2
     919                    ;On the way down!
     920 000064c0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR5,eblmpuppet_tbl,3
     921 00006530     8015          .word   ANI_OFFSET,0,34,0                       ;x,y,z
     922 00006570                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR6,eblmpuppet_tbl,4
     923 000065e0     800b          .word   ANI_WAITHITGND
     924 000065f0     8074          .WORD   ANI_ADD_MOVE,MOVE_C_6,2,2
     925 00006630     8003          .word   ANI_ZEROVELS
     926 00006640                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR7,eblmpuppet_tbl,5
     927 000066b0     801a          .word   ANI_SOUND,33h                   ;neck break (5-7 ticks late)
     928 000066d0                   WWLLW   ANI_SUPERSLAVE2,2,D4HS3B+FR8,eblmpuppet_tbl,6
     929                    
     930                    ;Maybe do a bounce
     931                    
     932 00006740     8072          .WORD   ANI_INC_COMBO
     933                            ;impact
     934 00006750                   WL      ANI_CODE,HIT_THE_MAT
     935 00006780     8037          .word   ANI_SHAKEALL,2
     936 000067a0     801f          .word   ANI_SHAKER,30
     937 000067c0     8042          .word   ANI_DAMAGEOPP,D_FACESLAM1,RD_FACESLAM1
     938 000067f0                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
     939                    
     940 00006860           eblmtry_rptc
     941                    
     942 00006860                   WWWL    ANI_IF_BUTCOUNT_LT,KICKB_COUNT,3,eblmnorepeatc
     943 000068b0     8063          .word   ANI_DEC_RPTCOUNT
     944 000068c0                   WL      ANI_IF_RPTCOUNT,eblmslam_againc
     945 000068f0                   WL      ANI_GOTO,eblmnorepeatc
     946                    
     947 00006920           eblmslam_againc
     948 00006920     8072          .WORD   ANI_INC_COMBO
     949 00006930     8061          .word   ANI_CLR_BUTCOUNT
     950                    
     951                    ;Slam him again using detach/reattach if button pressed again!
     952 00006940                   WL      ANI_SLAVEANIM,eblmfaced2_tbl
     953 00006970     800a          .word   ANI_DETACH
     954 00006980     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
     955                    
     956 000069a0                   WL      2,D4HS3B+FR8
     957 000069d0                   WL      ANI_CODE,DO_DOINK_SLAM
     958 00006a00                   WL      ANI_SET_YVEL,50000h
     959 00006a30                   WL      2,D4HS3B+FR7
     960 00006a60                   WL      13,D4HS3B+FR6
     961                    
     962                    ;Reattach me to who I'm slamming
     963 00006a90                   WL      ANI_CODE,eblmreattach
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   20

     964                    
     965 00006ac0     8012          .word   ANI_ATTACHZ,0,0,-2              ;x & y don't matter.
     966 00006b00     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
     967                    
     968 00006b20                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR6,eblmpuppet_tbl,4
     969 00006b90     800b          .word   ANI_WAITHITGND
     970 00006ba0     8003          .word   ANI_ZEROVELS
     971 00006bb0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR7,eblmpuppet_tbl,5
     972                    ;       .word   ANI_SOUND,33h                   ;neck break (5-7 ticks late)
     973 00006c20                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
     974                    
     975                    ;Maybe do a bounce
     976                    
     977                            ;impact
     978 00006c90                   WL      ANI_CODE,HIT_THE_MAT
     979 00006cc0     8037          .word   ANI_SHAKEALL,2
     980 00006ce0     801f          .word   ANI_SHAKER,30
     981 00006d00     8042          .word   ANI_DAMAGEOPP,D_FACESLAM2,RD_FACESLAM2
     982 00006d30                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
     983 00006da0                   WL      ANI_GOTO,eblmtry_rptc
     984                    
     985 00006dd0           eblmnorepeatc
     986 00006dd0                   WL      ANI_SLAVEANIM,eblmfaced_tbl
     987 00006e00     800a          .word   ANI_DETACH
     988                    
     989 00006e10     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
     990 00006e30                   WL      18,D4HS3B+FR8
     991                    
     992 00006e60                   WLW     ANI_SET_ZVEL,-10000h,AM_ABS
     993                    
     994                    ;Getting up, set no_collis
     995 00006ea0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOCOLLIS|MODE_NOAUTOFLIP|MODE_OVERLAP       ;uninterruptable
     996 00006ec0                   WL      ANI_CODE,DO_COMBO_MESS
     997 00006ef0     8073          .WORD   ANI_CLEAR_COMBO
     998                    
     999 00006f00                   WL      3,D3GU4A+FR5
    1000 00006f30                   WL      3,D3GU4A+FR6
    1001                    ;Check for a flip here
    1002 00006f60                   WL      1,D3GU4A+FR7
    1003 00006f90     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    1004 00006fa0     805f          .word   ANI_SET_WRESTLER_XFLIP
    1005 00006fb0                   WL      2,D3GU4A+FR7
    1006 00006fe0                   WL      3,D3GU4A+FR8
    1007 00007010                   WL      3,D3GU4A+FR9
    1008                    
    1009 00007040     8068          .word   ANI_SAFE_TIME,30
    1010                    
    1011 00007060                   WL      ANI_CODE,free_toss_check
    1012 00007090                   WL      ANI_IFNOTSTATUS2,eblmno_freetoss
    1013 000070c0     8006          .word   ANI_ATTACK_ON,AMODE_HITCHECK,37,88,63,9
    1014 00007120                   WL      1,D3GU4A+FR9
    1015 00007150     8007          .word   ANI_ATTACK_OFF
    1016 00007160                   WL      ANI_IFNOTSTATUS2,eblmno_freetoss
    1017                    
    1018                            ;Opponent standing too close -- free toss
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   21

    1019 00007190                   WL      ANI_CODE,setup_freetoss
    1020 000071c0                   WL      ANI_CHANGEANIM,dnk_4_push_anim
    1021 000071f0           eblmno_freetoss
    1022                    
    1023 000071f0     8022          .word   ANI_FACEDOWN
    1024 00007200     8002          .word   ANI_SETMODE,MODE_NORMAL
    1025 00007220     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1026 00007240     8049          .word   ANI_END
    1027                    
    1028 00007250           eblmmissedc
    1029 00007250                   WL      ANI_CODE,DO_COMBO_MESS
    1030 00007280     8073          .WORD   ANI_CLEAR_COMBO
    1031 00007290                   WL      ANI_CODE,CALL_MISSES
    1032 000072c0                   WL      6,D4HS3B+FR1
    1033                    
    1034 000072f0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1035 00007310     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1036 00007330     8049          .word   ANI_END
    1037                    
    1038                    
    1039                    *******************************************************************************
    1040                    
    1041 00007340            SUBR   dnk_3_head_slam_anim
    1042                    
    1043 00007340     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1044 00007360     8003          .word   ANI_ZEROVELS
    1045 00007370     8026          .word   ANI_SETSPEED,100h
    1046 00007390     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1047                    
    1048                    ;Put cool cheers here
    1049                    
    1050 000073b0     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,32,49,50,21 ;mode,x,y,w,h
    1051                    
    1052 00007410                   WWL     ANI_WAITHITOPP,3,D4GH3A+FR8
    1053 00007450     8007          .word   ANI_ATTACK_OFF
    1054                    
    1055 00007460                   WL      ANI_IFNOTSTATUS2,eblmmissed
    1056                    
    1057                    ;got him
    1058 00007490     801a          .word   ANI_SOUND,82h                   ;Effort grunt
    1059                    
    1060 000074b0     8012          .word   ANI_ATTACHZ,0,0,-2              ;x & y don't matter.
    1061 000074f0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
    1062                    
    1063                    ; attacker sequence
    1064 00007510                   WL      ANI_CODE,DO_DOINK_SLAM
    1065 00007540                   WL      ANI_SET_YVEL,60000h     ;50000h
    1066                    
    1067                    ;Float toward the center of ring!
    1068 00007570                   WL      ANI_CODE,set_xdrift
    1069                    
    1070 000075a0     8062          .word   ANI_SET_RPTCOUNT,4      ;2 times
    1071 000075c0     8061          .word   ANI_CLR_BUTCOUNT
    1072                    
    1073 000075d0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR1,eblmpuppet_tbl,0
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   22

    1074 00007640                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR2,eblmpuppet_tbl,1
    1075 000076b0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR3,eblmpuppet_tbl,2
    1076                    ;On the way down!
    1077 00007720                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR5,eblmpuppet_tbl,3
    1078 00007790     8015          .word   ANI_OFFSET,0,34,0                       ;x,y,z
    1079 000077d0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR6,eblmpuppet_tbl,4
    1080 00007840     800b          .word   ANI_WAITHITGND
    1081 00007850     8074          .WORD   ANI_ADD_MOVE,MOVE_C_6,2,2
    1082 00007890     8003          .word   ANI_ZEROVELS
    1083 000078a0                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR7,eblmpuppet_tbl,5
    1084                    ;       .word   ANI_SOUND,33h                   ;neck break (5-7 ticks late)
    1085 00007910                   WWLLW   ANI_SUPERSLAVE2,2,D4HS3B+FR8,eblmpuppet_tbl,6
    1086                    
    1087                    ;Maybe do a bounce
    1088                    
    1089                    ;impact
    1090 00007980                   WL      ANI_CODE,HIT_THE_MAT
    1091 000079b0     8037          .word   ANI_SHAKEALL,2
    1092 000079d0     801f          .word   ANI_SHAKER,30
    1093 000079f0     8042          .word   ANI_DAMAGEOPP,D_FACESLAM1,RD_FACESLAM1
    1094 00007a20                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
    1095                    
    1096 00007a90           eblmtry_rpt
    1097                    
    1098 00007a90                   WWWL    ANI_IF_BUTCOUNT_LT,KICKB_COUNT,2,eblmnorepeat
    1099 00007ae0     8063          .word   ANI_DEC_RPTCOUNT
    1100 00007af0                   WL      ANI_IF_RPTCOUNT,eblmslam_again
    1101 00007b20                   WL      ANI_GOTO,eblmnorepeat
    1102                    
    1103 00007b50           eblmslam_again
    1104 00007b50     8074          .WORD   ANI_ADD_MOVE,MOVE_C_6,2,2
    1105 00007b90     8061          .word   ANI_CLR_BUTCOUNT
    1106                    
    1107                    ;Slam him again using detach/reattach if button pressed again!
    1108 00007ba0                   WL      ANI_SLAVEANIM,eblmfaced2_tbl
    1109 00007bd0     800a          .word   ANI_DETACH
    1110 00007be0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    1111                    
    1112 00007c00                   WL      2,D4HS3B+FR8
    1113 00007c30                   WL      ANI_CODE,DO_DOINK_SLAM
    1114 00007c60                   WL      ANI_SET_YVEL,50000h
    1115 00007c90                   WL      2,D4HS3B+FR7
    1116 00007cc0                   WL      13,D4HS3B+FR6
    1117                    
    1118                    ;Reattach me to who I'm slamming
    1119 00007cf0                   WL      ANI_CODE,eblmreattach
    1120                    
    1121 00007d20     8012          .word   ANI_ATTACHZ,0,0,-2              ;x & y don't matter.
    1122 00007d60     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
    1123                    
    1124 00007d80                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR6,eblmpuppet_tbl,4
    1125 00007df0     800b          .word   ANI_WAITHITGND
    1126 00007e00     8003          .word   ANI_ZEROVELS
    1127 00007e10                   WWLLW   ANI_SUPERSLAVE2,3,D4HS3B+FR7,eblmpuppet_tbl,5
    1128                    ;       .word   ANI_SOUND,33h                   ;neck break (5-7 ticks late)
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   23

    1129 00007e80                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
    1130                    
    1131                    ;Maybe do a bounce
    1132                    
    1133                            ;impact
    1134 00007ef0                   WL      ANI_CODE,HIT_THE_MAT
    1135 00007f20     8037          .word   ANI_SHAKEALL,2
    1136 00007f40     801f          .word   ANI_SHAKER,30
    1137 00007f60     8042          .word   ANI_DAMAGEOPP,D_FACESLAM2,RD_FACESLAM2
    1138 00007f90                   WWLLW   ANI_SUPERSLAVE2,1,D4HS3B+FR8,eblmpuppet_tbl,6
    1139 00008000                   WL      ANI_GOTO,eblmtry_rpt
    1140                    
    1141 00008030           eblmnorepeat
    1142 00008030                   WL      ANI_CODE,CALL_SPECIAL_MOVE
    1143                    
    1144 00008060     807a          .word   ANI_DRAW_NAME,20
    1145                    
    1146 00008080                   WL      ANI_SLAVEANIM,eblmfaced_tbl
    1147 000080b0     800a          .word   ANI_DETACH
    1148                    
    1149 000080c0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    1150 000080e0                   WL      18,D4HS3B+FR8
    1151                    
    1152 00008110                   WLW     ANI_SET_ZVEL,-10000h,AM_ABS
    1153                    
    1154                    ;Getting up, set no_collis
    1155 00008150     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOCOLLIS|MODE_NOAUTOFLIP|MODE_OVERLAP       ;uninterruptable
    1156                    
    1157 00008170                   WL      3,D3GU4A+FR5
    1158 000081a0                   WL      3,D3GU4A+FR6
    1159                    ;Check for a flip here
    1160 000081d0                   WL      1,D3GU4A+FR7
    1161 00008200     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    1162 00008210     805f          .word   ANI_SET_WRESTLER_XFLIP
    1163 00008220                   WL      2,D3GU4A+FR7
    1164 00008250                   WL      3,D3GU4A+FR8
    1165 00008280                   WL      3,D3GU4A+FR9
    1166                    
    1167 000082b0     8068          .word   ANI_SAFE_TIME,30
    1168                    
    1169                    
    1170 000082d0                   WL      ANI_CODE,free_toss_check
    1171 00008300                   WL      ANI_IFNOTSTATUS2,eblmno_freetoss3
    1172 00008330     8006          .word   ANI_ATTACK_ON,AMODE_HITCHECK,37,88,63,9
    1173 00008390                   WL      1,D3GU4A+FR9
    1174 000083c0     8007          .word   ANI_ATTACK_OFF
    1175 000083d0                   WL      ANI_IFNOTSTATUS2,eblmno_freetoss3
    1176                    
    1177                            ;Opponent standing too close -- free toss
    1178 00008400                   WL      ANI_CODE,setup_freetoss
    1179 00008430                   WL      ANI_CHANGEANIM,dnk_4_push_anim
    1180 00008460           eblmno_freetoss3
    1181                    
    1182 00008460     8022          .word   ANI_FACEDOWN
    1183 00008470     8002          .word   ANI_SETMODE,MODE_NORMAL
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   24

    1184 00008490     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1185 000084b0     8049          .word   ANI_END
    1186                    
    1187 000084c0           eblmmissed
    1188 000084c0                   WL      ANI_CODE,CALL_MISSES
    1189 000084f0                   WL      6,D4HS3B+FR1
    1190                    
    1191 00008520     8002          .word   ANI_SETMODE,MODE_NORMAL
    1192 00008540     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1193 00008560     8049          .word   ANI_END
    1194                    
    1195 00008570           eblmreattach
    1196 00008570     b7a0          move    *a13(WHOIHIT),a0,L
         00008580     0500  
    1197 00008590     b20d          move    a0,*a13(ATTACH_PROC),L
         000085a0     03e0  
    1198 000085b0     b3a0          move    a13,*a0(ATTACH_PROC),L
         000085c0     03e0  
    1199 000085d0     0960          rets
    1200                    
    1201 000085e0           eblmpuppet_tbl
    1202 000085e0 00008700'  .long eblmBret
    1203 00008600 00008950'  .long eblmRazor
    1204 00008620 00008ba0'  .long eblmTaker
    1205 00008640 00008df0'  .long eblmYokozuna
    1206 00008660 00009040'  .long eblmShawn
    1207 00008680 00009290'  .long eblmBamBam
    1208 000086a0 000094e0'  .long eblmDoink
    1209 000086c0 00009730'  .long eblmAdam
    1210 000086e0 00009750'  .long eblmLex
    1211                    
    1212 00008700           eblmBret
    1213                            .ref    H3MS3Z,H3MS3X
    1214 00008700            LWWW H3MS3Z+FR1,36,-5,0
    1215 00008750            LWWW H3MS3Z+FR2,39,0,0
    1216 000087a0            LWWW H3MS3Z+FR3,51,-1,0
    1217 000087f0            LWWW H3MS3Z+FR4,58,-4,0
    1218 00008840            LWWW H3MS3Z+FR5,62,-6,0
    1219 00008890            LWWW H3MS3Z+FR6,57,-11,0
    1220 000088e0            LWWW H3MS3X+FR5,71,-24,0
    1221 00008930 00000000   .long 0
    1222 00008950           eblmRazor
    1223                            .ref    R3MS3Z,R3MS3Q
    1224 00008950            LWWW R3MS3Z+FR1,48,-6,0
    1225 000089a0            LWWW R3MS3Z+FR2,46,5,0
    1226 000089f0            LWWW R3MS3Z+FR3,53,-2,0
    1227 00008a40            LWWW R3MS3Z+FR4,65,1,0
    1228 00008a90            LWWW R3MS3Z+FR5,71,-4,0
    1229 00008ae0            LWWW R3MS3Z+FR6,73,-28,0
    1230 00008b30            LWWW R3MS3Q+FR1,76,-11,0
    1231 00008b80 00000000   .long 0
    1232 00008ba0           eblmTaker
    1233                            .ref    U3MS3Z,U3CF3Q
    1234 00008ba0            LWWW U3MS3Z+FR1,37,9,0
    1235 00008bf0            LWWW U3MS3Z+FR2,25,17,0
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   25

    1236 00008c40            LWWW U3MS3Z+FR3,28,0,0
    1237 00008c90            LWWW U3MS3Z+FR4,44,-1,0
    1238 00008ce0            LWWW U3MS3Z+FR5,53,4,0
    1239 00008d30            LWWW U3MS3Z+FR6,55,-14,0
    1240 00008d80            LWWW U3CF3Q+FR1,61,-26,0
    1241 00008dd0 00000000   .long 0
    1242 00008df0           eblmYokozuna
    1243                            .ref    Y3MS3Z,Y3KF3B
    1244 00008df0            LWWW Y3MS3Z+FR1,54,-8,0
    1245 00008e40            LWWW Y3MS3Z+FR2,53,12,0
    1246 00008e90            LWWW Y3MS3Z+FR3,53,10,0
    1247 00008ee0            LWWW Y3MS3Z+FR4,59,6,0
    1248 00008f30            LWWW Y3MS3Z+FR5,61,-1,0
    1249 00008f80            LWWW Y3MS3Z+FR6,62,-27,0
    1250 00008fd0            LWWW Y3KF3B+FR1,66,-2,0
    1251 00009020 00000000   .long 0
    1252 00009040           eblmShawn
    1253                            .ref    S3MS3Z,S3CF3Z
    1254 00009040            LWWW S3MS3Z+FR1,31,-10,0
    1255 00009090            LWWW S3MS3Z+FR2,29,3,0
    1256 000090e0            LWWW S3MS3Z+FR3,39,7,0
    1257 00009130            LWWW S3MS3Z+FR4,55,5,0
    1258 00009180            LWWW S3MS3Z+FR5,61,3,0
    1259 000091d0            LWWW S3MS3Z+FR6,74,-39,0
    1260 00009220            LWWW S3CF3Z+FR1,82,-23,0
    1261 00009270 00000000   .long 0
    1262 00009290           eblmBamBam
    1263                            .ref    B3MS3Z,B3RL1A
    1264 00009290            LWWW B3MS3Z+FR1,47,2,0
    1265 000092e0            LWWW B3MS3Z+FR2,49,-4,0
    1266 00009330            LWWW B3MS3Z+FR3,52,-2,0
    1267 00009380            LWWW B3MS3Z+FR4,65,7,0
    1268 000093d0            LWWW B3MS3Z+FR5,70,21,0
    1269 00009420            LWWW B3MS3Z+FR6,72,3,0
    1270 00009470            LWWW B3RL1A+FR7,73,-15,0
    1271 000094c0 00000000   .long 0
    1272 000094e0           eblmDoink
    1273 000094e0            LWWW D3GS3X+FR1,52,-15,0
    1274 00009530            LWWW D3GS3X+FR3,45,2,0
    1275 00009580            LWWW D3GS3X+FR4,51,-2,0
    1276 000095d0            LWWW D3GS3X+FR5,61,-4,0
    1277 00009620            LWWW D3GS3X+FR7,68,-4,0
    1278 00009670            LWWW D3GS3X+FR8,67,-39,0
    1279 000096c0            LWWW D3GS3X+FR9,75,-15,0
    1280 00009710 00000000   .long 0
    1281 00009730           eblmAdam
    1282 00009730 00000000   .long 0
    1283 00009750           eblmLex
    1284                            .ref    L3MS3Z,L3TF3X
    1285 00009750            LWWW L3MS3Z+FR1,55,-3,0
    1286 000097a0            LWWW L3MS3Z+FR2,44,4,0
    1287 000097f0            LWWW L3MS3Z+FR3,46,1,0
    1288 00009840            LWWW L3MS3Z+FR4,57,-4,0
    1289 00009890            LWWW L3MS3Z+FR5,60,1,0
    1290 000098e0            LWWW L3MS3Z+FR6,64,-26,0
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   26

    1291 00009930            LWWW L3TF3X+FR1,60,-19,0
    1292 00009980 00000000   .long 0
    1293                    
    1294                    
    1295 000099a0           eblmfaced2_tbl
    1296 000099a0                   REFLONG hrt_break_face2_anim,rzr_break_face2_anim
    1297 000099e0                   REFLONG und_break_face2_anim
    1298 00009a00                   REFLONG yok_break_face2_anim
    1299 00009a20                   REFLONG shn_break_face2_anim,bam_break_face2_anim
    1300 00009a60                   REFLONG dnk_break_face2_anim
    1301 00009a80 00000000          .long   0
    1302 00009aa0                   REFLONG lex_break_face2_anim
    1303                    
    1304 00009ac0           eblmfaced_tbl
    1305 00009ac0                   REFLONG hrt_break_face_anim,rzr_break_face_anim
    1306 00009b00                   REFLONG und_break_face_anim
    1307 00009b20                   REFLONG yok_break_face_anim
    1308 00009b40                   REFLONG shn_break_face_anim,bam_break_face_anim
    1309 00009b80                   REFLONG dnk_break_face_anim
    1310 00009ba0 00000000          .long   0
    1311 00009bc0                   REFLONG lex_break_face_anim
    1312                    
    1313                    
    1314                    *****************************************************************************
    1315                    *
    1316                    * Head slams into mat
    1317                    ;From head slam - repeated head slam
    1318                    
    1319 00009be0            SUBR   dnk_break_face2_anim
    1320                    
    1321 00009be0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    1322 00009c00     8003          .word   ANI_ZEROVELS
    1323                    
    1324 00009c10     805e          .word   ANI_DEBRIS,100,1,-8,12,0        ;%chance, tbl index, x,y,z off
    1325 00009c70                   WL      1,D3GS3X+FR9
    1326 00009ca0                   WL      ANI_SET_YVEL,80000h
    1327 00009cd0                   WL      3,D3GS3X+FR9
    1328 00009d00                   WL      5,D3GS3X+FR10
    1329 00009d30     800b          .word   ANI_WAITHITGND
    1330 00009d40     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND   ;So we can stomp him!
    1331 00009d60     8054          .word   ANI_WAITROLL
    1332 00009d70                   WL      3,D3GS3X+FR9
    1333 00009da0                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    1334                            
    1335                    
    1336 00009dd0            SUBR   dnk_break_face3_anim
    1337                    
    1338 00009dd0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    1339 00009df0     8003          .word   ANI_ZEROVELS
    1340                    
    1341 00009e00     805e          .word   ANI_DEBRIS,100,1,-8,12,0        ;%chance, tbl index, x,y,z off
    1342 00009e60                   WL      3,D3GS3X+FR4
    1343 00009e90                   WL      ANI_SET_YVEL,078000h
    1344 00009ec0                   WL      100,D3GS3X+FR4
    1345 00009ef0     800b          .word   ANI_WAITHITGND
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   27

    1346 00009f00     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND   ;So we can stomp him!
    1347 00009f20     8054          .word   ANI_WAITROLL
    1348 00009f30                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    1349                            
    1350                    
    1351                    * Head slams into mat
    1352                    ;From head slam
    1353                    
    1354 00009f60            SUBR   dnk_break_face_anim
    1355                    
    1356 00009f60     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    1357 00009f80     8003          .word   ANI_ZEROVELS
    1358                    
    1359 00009f90                   WL      1,D3GS3X+FR8
    1360 00009fc0     805e          .word   ANI_DEBRIS,100,1,-8,12,0        ;%chance, tbl index, x,y,z off
    1361 0000a020                   WL      ANI_SET_YVEL,40000h
    1362 0000a050                   WL      2,D3GS3X+FR8
    1363 0000a080                   WL      5,D3GS3X+FR9
    1364 0000a0b0                   WL      5,D3GS3X+FR10
    1365 0000a0e0     800b          .word   ANI_WAITHITGND
    1366 0000a0f0                   WL      ANI_CODE,SMALL_BOUNCE
    1367 0000a120     8003          .word   ANI_ZEROVELS
    1368 0000a130                   WL      4,D3GS3X+FR8
    1369 0000a160                   WL      4,D3GS3X+FR9
    1370 0000a190                   WL      4,D3GS3X+FR10
    1371 0000a1c0                   WL      4,D3GS3X+FR8
    1372                    
    1373 0000a1f0     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND   ;So we can stomp him!
    1374 0000a210                   WL      1,D3GS3X+FR8            ;Face down
    1375 0000a240     8054          .word   ANI_WAITROLL
    1376                    
    1377 0000a250                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    1378                    
    1379                    *****************************************************************************
    1380                    
    1381                    ;       .bss    hmikopp_xvel,32
    1382                    
    1383 0000a280            SUBR   dnk_3_fake_hold_anim
    1384                    ;Head hold when standing next to player
    1385                    ;No collisions possible
    1386 0000a280     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    1387 0000a2a0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1388 0000a2c0     8003          .word   ANI_ZEROVELS
    1389 0000a2d0     8026          .word   ANI_SETSPEED,100h
    1390                    
    1391                    ;hmik4 grab to head hold
    1392                    
    1393 0000a2f0     8075          .word   ANI_STARTATTACK,AT_PUPPET,6
    1394 0000a320                   WL      2,D4GH3A+FR1
    1395 0000a350                   WL      2,D4GH3A+FR2
    1396 0000a380                   WL      2,D4GH3A+FR3
    1397 0000a3b0                   WL      7,D4GH3A+FR4
    1398 0000a3e0                   WL      ANI_GOTO,hmikmissed
    1399                    
    1400 0000a410            SUBR   dnk_3_head_hold2_anim
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   28

    1401                    ;Head hold when standing next to player
    1402                    ;No collisions possible
    1403 0000a410     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    1404 0000a430     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1405 0000a450     8003          .word   ANI_ZEROVELS
    1406 0000a460     8026          .word   ANI_SETSPEED,100h
    1407                    
    1408                    ;hmik4 grab to head hold
    1409                    
    1410 0000a480     8075          .word   ANI_STARTATTACK,AT_PUPPET,6
    1411 0000a4b0                   WL      2,D4GH3A+FR1
    1412 0000a4e0                   WL      2,D4GH3A+FR2
    1413 0000a510                   WL      2,D4GH3A+FR3
    1414 0000a540     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET_HDGRAB,32,60,62,45 ;mode,x,y,w,h
    1415 0000a5a0                   WWL     ANI_WAITHITOPP,7,D4GH3A+FR4
    1416 0000a5e0     8007          .word   ANI_ATTACK_OFF
    1417 0000a5f0                   WL      ANI_IFNOTSTATUS2,hmikmissed
    1418 0000a620                   WL      ANI_IFBLOCKED,hmikmissedb
    1419                    
    1420 0000a650     8074          .WORD   ANI_ADD_MOVE,MOVE_C_7,2,2
    1421                    
    1422 0000a690                   WL      ANI_GOTO,hmikgothim
    1423                    
    1424 0000a6c0            SUBR   dnk_3_head_hold_anim
    1425                    
    1426 0000a6c0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    1427 0000a6e0     8003          .word   ANI_ZEROVELS
    1428 0000a6f0     8026          .word   ANI_SETSPEED,100h
    1429                    
    1430                    ;hmik4 grab to head hold
    1431 0000a710     8075          .word   ANI_STARTATTACK,AT_PUPPET,7
    1432                    
    1433 0000a740                   WL      2,D4GH3A+FR1
    1434 0000a770                   WL      2,D4GH3A+FR2
    1435                            ;       ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
    1436                    ;       LEAPATOPP 6,999,65,45,90000h,TGT_HEAD,60,105,0  ;88
    1437 0000a7a0                   LEAPATOPP 9,999,40,45,90000h,TGT_HEAD,60,105,0  ;88
    1438                    
    1439 0000a850                   WL      3,D4GH3A+FR3
    1440 0000a880     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET,32,60,62,45 ;mode,x,y,w,h
    1441 0000a8e0                   WWL     ANI_WAITHITOPP,5,D4GH3A+FR4
    1442 0000a920     8007          .word   ANI_ATTACK_OFF
    1443 0000a930                   WL      ANI_IFNOTSTATUS2,hmikmissed
    1444 0000a960                   WL      ANI_IFBLOCKED,hmikmissedb
    1445                    
    1446 0000a990           hmikgothim
    1447                    ;got him
    1448 0000a990     8033          .word   ANI_SETWORD,USR_VAR2,0
    1449 0000a9c0     8061          .word   ANI_CLR_BUTCOUNT
    1450 0000a9d0                   WL      ANI_CODE,head_grab_time
    1451                    
    1452 0000aa00     8012          .word   ANI_ATTACHZ,0,0,-4              ;x & y don't matter.
    1453 0000aa40                   WL      ANI_CODE,DO_NONO
    1454 0000aa70     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
    1455                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   29

    1456 0000aa90                   WWLLW   ANI_SUPERSLAVE2,1,D4GH3A+FR4,hmikpuppet_tbl,0
    1457                    
    1458 0000ab00     800b          .word   ANI_WAITHITGND
    1459 0000ab10     8003          .word   ANI_ZEROVELS
    1460                    
    1461 0000ab20                   WWLLW   ANI_SUPERSLAVE2,4,D4GH3A+FR4,hmikpuppet_tbl,0
    1462                    
    1463 0000ab90                   WWLLW   ANI_SUPERSLAVE2,4,D4GH3A+FR5,hmikpuppet_tbl,1
    1464 0000ac00                   WWLLW   ANI_SUPERSLAVE2,4,D4GH3A+FR7,hmikpuppet_tbl,2
    1465 0000ac70                   WWLLW   ANI_SUPERSLAVE2,4,D4GH3A+FR8,hmikpuppet_tbl,3
    1466                    
    1467 0000ace0     8004          .word   ANI_SETPLYRMODE,MODE_HEADHOLD
    1468 0000ad00                   WL      ANI_SLAVEANIM,hmikheadheld_tbl
    1469                    
    1470 0000ad30                   WL      1,D4GH3A+FR8
    1471                    
    1472                    ;       .word   ANI_FACEDOWN
    1473 0000ad60     8002          .word   ANI_SETMODE,MODE_NORMAL
    1474 0000ad80     8049          .word   ANI_END
    1475                    
    1476 0000ad90           hmikmissedb
    1477 0000ad90     8003          .word   ANI_ZEROVELS
    1478 0000ada0                   WL      ANI_SET_YVEL,30000h
    1479                    
    1480 0000add0                   WL      3,D4GH3A+FR4
    1481 0000ae00     800b          .word   ANI_WAITHITGND
    1482 0000ae10     8003          .word   ANI_ZEROVELS
    1483 0000ae20                   WL      3,D4GH3A+FR3
    1484 0000ae50                   WL      3,D4GH3A+FR2
    1485 0000ae80                   WL      3,D4GH3A+FR1
    1486                    
    1487 0000aeb0     8022          .word   ANI_FACEDOWN
    1488 0000aec0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1489 0000aee0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1490 0000af00     8049          .word   ANI_END
    1491 0000af10           hmikmissed
    1492 0000af10                   WL      ANI_CODE,CALL_MISSES
    1493                    
    1494 0000af40     8028          .word   ANI_ZERO_XZVELS
    1495 0000af50     800b          .word   ANI_WAITHITGND
    1496 0000af60     8003          .word   ANI_ZEROVELS
    1497                    
    1498 0000af70                   WL      5,D4GH3A+FR4
    1499 0000afa0                   WL      3,D4GH3A+FR3
    1500 0000afd0                   WL      3,D4GH3A+FR2
    1501 0000b000                   WL      3,D4GH3A+FR1
    1502                    
    1503 0000b030     8022          .word   ANI_FACEDOWN
    1504 0000b040     8002          .word   ANI_SETMODE,MODE_NORMAL
    1505 0000b060     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1506 0000b080     8049          .word   ANI_END
    1507                    
    1508                    
    1509 0000b090            SUBR   head_grab_time
    1510                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   30

    1511 0000b090     07ae          move    @PCNT,a14,L                     ;use 32-bit PCNT!
         0000b0a0 00000000! 
    1512 0000b0c0     b3cd          move    a14,*a13(LAST_HEADHOLD),L
         0000b0d0     0cd0  
    1513 0000b0e0     0d5f          calla   CALL_SETUP
         0000b0f0 00000000! 
    1514                            ;fall through
    1515                    
    1516 0000b110            SUBR   clear_opp_counts
    1517                    ;Zero opponents buttons for later counting
    1518 0000b110     57ce          clr     a14
    1519 0000b120     b7a0          move    *a13(ATTACH_PROC),a0,L
         0000b130     03e0  
    1520 0000b140     b1c0          move    a14,*a0(PUNCHB_COUNT)
         0000b150     0800  
    1521 0000b160     b1c0          move    a14,*a0(BLOCKB_COUNT)
         0000b170     0810  
    1522 0000b180     b1c0          move    a14,*a0(SPUNCHB_COUNT)
         0000b190     0820  
    1523 0000b1a0     b1c0          move    a14,*a0(KICKB_COUNT)
         0000b1b0     0830  
    1524 0000b1c0     b1c0          move    a14,*a0(SKICKB_COUNT)
         0000b1d0     0840  
    1525                    
    1526 0000b1e0     0960          rets
    1527                    
    1528                    ;;new xvel is (attacker xvel + defender xvel)/4
    1529                    ; SUBR  merge_xvels
    1530                    ;
    1531                    ;       move    @hmikopp_xvel,a0,L
    1532                    ;       move    *a13(OBJ_XVEL),a1,L
    1533                    ;       add     a1,a0
    1534                    ;;      sra     2,a0
    1535                    ;       move    a0,*a13(OBJ_XVEL),L
    1536                    ;hmikrets
    1537                    ;       rets
    1538                    
    1539                    ;save opponent's x-velocity
    1540                    ; SUBR  store_opp_xvel
    1541                    ;       move    *a13(CLOSEST_NUM),a0
    1542                    ;       X32     a0
    1543                    ;       addi    process_ptrs,a0
    1544                    ;       move    *a0,a0,L
    1545                    ;       move    *a0(OBJ_XVEL),a0,L
    1546                    ;       move    a0,@hmikopp_xvel,L
    1547                    ;       rets
    1548                    
    1549 0000b1f0           hmikpuppet_tbl
    1550 0000b1f0 0000b310'  .long hmikBret
    1551 0000b210 0000b470'  .long hmikRazor
    1552 0000b230 0000b5d0'  .long hmikTaker
    1553 0000b250 0000b730'  .long hmikYokozuna
    1554 0000b270 0000b890'  .long hmikShawn
    1555 0000b290 0000b9f0'  .long hmikBamBam
    1556 0000b2b0 0000bb50'  .long hmikDoink
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   31

    1557 0000b2d0 0000bcb0'  .long hmikAdam
    1558 0000b2f0 0000bcd0'  .long hmikLex
    1559                    
    1560 0000b310           hmikBret
    1561 0000b310            LWWW H4AH3A+FR1,72,17,0
    1562 0000b360            LWWW H3HB3A+FR3,66,5,0
    1563 0000b3b0            LWWW H3HB3A+FR2,56,-6,0
    1564 0000b400            LWWW H3BF3A+FR1,48,-35,0
    1565 0000b450 00000000   .long 0
    1566 0000b470           hmikRazor
    1567 0000b470            LWWW R4AH4C+FR3,70,16,0
    1568 0000b4c0            LWWW R3HB3A+FR3,67,3,0
    1569 0000b510            LWWW R3HB3A+FR2,63,-17,0
    1570 0000b560            LWWW R3BF3A+FR1,53,-37,0
    1571 0000b5b0 00000000   .long 0
    1572 0000b5d0           hmikTaker
    1573 0000b5d0            LWWW U4AH3A+FR2,65,26,0
    1574 0000b620            LWWW U4BF3A+FR2,60,17,0
    1575 0000b670            LWWW U4BF3A+FR3,30,-3,0
    1576 0000b6c0            LWWW U4BF3Z+FR5,52,-16,0
    1577 0000b710 00000000   .long 0
    1578 0000b730           hmikYokozuna
    1579 0000b730            LWWW Y4AE4A+FR2,80,7,0
    1580 0000b780            LWWW Y4AM4A+FR1,79,6,0
    1581 0000b7d0            LWWW Y4AM4A+FR2,69,-5,0
    1582 0000b820            LWWW Y3BF3A+FR1,55,-25,0
    1583 0000b870 00000000   .long 0
    1584 0000b890           hmikShawn
    1585 0000b890            LWWW S4AH3D+FR5,73,6,0
    1586 0000b8e0            LWWW S4AH3D+FR1,66,10,0
    1587 0000b930            LWWW S4BF3A+FR2,62,-9,0
    1588 0000b980            LWWW S3BF3A+FR1,37,-36,0
    1589 0000b9d0 00000000   .long 0
    1590 0000b9f0           hmikBamBam
    1591 0000b9f0            LWWW B4AH4A+FR1,68,11,0
    1592 0000ba40            LWWW B4BF3A+FR1,74,15,0
    1593 0000ba90            LWWW B3HB3A+FR2,62,-20,0
    1594 0000bae0            LWWW B3BF3C+FR5,54,-29,0
    1595 0000bb30 00000000   .long 0
    1596 0000bb50           hmikDoink
    1597 0000bb50            LWWW D3AH3B+FR1,60,13,0
    1598 0000bba0            LWWW D3AK3A+FR3,59,16,0
    1599 0000bbf0            LWWW D3AK3A+FR2,64,-5,0
    1600 0000bc40            LWWW D3BF3A+FR2,51,-35,0
    1601 0000bc90 00000000   .long 0
    1602 0000bcb0           hmikAdam
    1603 0000bcb0 00000000   .long 0
    1604 0000bcd0           hmikLex
    1605 0000bcd0            LWWW L4AH4B+FR3,68,9,0
    1606 0000bd20            LWWW L3BF3A+FR1,74,11,1
    1607 0000bd70            LWWW L3BF3A+FR2,65,-10,1
    1608 0000bdc0            LWWW L3BF3B+FR5,49,-33,0
    1609 0000be10 00000000   .long 0
    1610                    
    1611 0000be30           hmikheadheld_tbl
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   32

    1612 0000be30                   REFLONG hrt_3_head_held_anim
    1613 0000be50                   REFLONG rzr_3_head_held_anim
    1614 0000be70                   REFLONG und_3_head_held_anim
    1615 0000be90                   REFLONG yok_3_head_held_anim
    1616 0000beb0                   REFLONG shn_3_head_held_anim
    1617 0000bed0                   REFLONG bam_3_head_held_anim
    1618 0000bef0                   REFLONG dnk_3_head_held_anim
    1619 0000bf10 00000000          .long   0
    1620 0000bf30                   REFLONG lex_3_head_held_anim
    1621                    
    1622                    *****************************************************************************
    1623                    
    1624 0000bf50            SUBR   dnk_3_head_held_anim
    1625                    
    1626 0000bf50     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1627 0000bf70     8003          .word   ANI_ZEROVELS
    1628 0000bf80     8026          .word   ANI_SETSPEED,100h
    1629 0000bfa0     8004          .word   ANI_SETPLYRMODE,MODE_HEADHELD
    1630 0000bfc0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    1631                    
    1632                    ;       WL      4,D3BF3Z+FR1
    1633                    ;       WL      4,D3BF3Z+FR2
    1634                    
    1635 0000bfd0     8033          .word   ANI_SETWORD,USR_VAR1,0          ;loop count
    1636                    
    1637 0000c000           fvdgloop
    1638 0000c000                   WL      4,D3BF3A+FR2
    1639 0000c030                   WL      4,D3BF3A+FR3
    1640 0000c060                   WL      4,D3BF3A+FR4
    1641 0000c090                   WL      4,D3BF3A+FR5
    1642 0000c0c0                   WL      4,D3BF3A+FR6
    1643 0000c0f0                   WL      4,D3BF3A+FR7
    1644 0000c120                   WL      4,D3BF3A+FR8
    1645 0000c150                   WL      4,D3BF3A+FR1
    1646 0000c180                   WL      ANI_CODE,fvdginc_loop
    1647 0000c1b0                   WL      ANI_IFNOTSTATUS2,fvdgloop
    1648                    
    1649                    ;Continue into break...
    1650                    
    1651 0000c1e0            SUBR   dnk_3_head_held_brk_anim
    1652                    
    1653 0000c1e0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1654 0000c200     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1655                    
    1656 0000c220                   WL      ANI_CODE,FIND_AND_KILL_ENDLESS
    1657                    
    1658 0000c250                   WLW     ANI_SET_XVEL,-38000h,AM_NEWFACE_REL
    1659 0000c290                   WL      ANI_SET_YVEL,40000h
    1660 0000c2c0                   WLW     ANI_SET_ZVEL,18000h,AM_ABS
    1661                    
    1662 0000c300                   WL      4,D3AK3A+FR2
    1663 0000c330     800a          .word   ANI_DETACH
    1664                    
    1665                    ;Standard fvdg2 head hit from spin kick
    1666 0000c340                   WL      3,D2AH2A+FR1
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   33

    1667 0000c370                   WL      4,D2AH2A+FR2
    1668 0000c3a0     800b          .word   ANI_WAITHITGND
    1669 0000c3b0     8003          .word   ANI_ZEROVELS
    1670 0000c3c0                   WL      4,D2AH2A+FR3
    1671                    
    1672 0000c3f0     8021          .word   ANI_FACEUP
    1673 0000c400     8002          .word   ANI_SETMODE,MODE_NORMAL
    1674 0000c420     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1675 0000c440     8049          .word   ANI_END
    1676                    
    1677                    
    1678                    ;Loop 4 times, then break out!
    1679 0000c450           fvdginc_loop
    1680 0000c450     b5a0          move    *a13(USR_VAR1),a0
         0000c460     0850  
    1681 0000c470     1020          inc     a0
    1682 0000c480     b00d          move    a0,*a13(USR_VAR1)
         0000c490     0850  
    1683 0000c4a0     0b40          cmpi    2,a0
         0000c4b0     fffd  
    1684 0000c4c0     c708          jrgt    fvdgbreakout
    1685                            
    1686                    ;He may have let me go by hitting his block butn!
    1687                    ;Handled in mode_headheld!
    1688                    ;       move    *a13(ATTACH_PROC),a0,L
    1689                    ;       jrz     fvdgbreakout
    1690                    
    1691 0000c4d0     b5a1          move    *a13(ANIMODE),a1
         0000c4e0     0660  
    1692 0000c4f0     0b81          andni   MODE_STATUS2,a1
         0000c500 00000200  
    1693 0000c520     b02d          move    a1,*a13(ANIMODE)
         0000c530     0660  
    1694 0000c540     0960          rets
    1695                    
    1696 0000c550           fvdgbreakout
    1697 0000c550     b5a1          move    *a13(ANIMODE),a1
         0000c560     0660  
    1698 0000c570     0ba1          ori     MODE_STATUS2,a1
         0000c580 00000200  
    1699 0000c5a0     b02d          move    a1,*a13(ANIMODE)
         0000c5b0     0660  
    1700 0000c5c0     0960          rets
    1701                    
    1702 0000c5d0            SUBR   dnk_3_head_held_stand_anim
    1703                    
    1704 0000c5d0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1705 0000c5f0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1706                    
    1707 0000c610                   WL      3,D3AK3A+FR2
    1708 0000c640                   WL      3,D1TT5Z+FR2    ;2.5
    1709 0000c670     800a          .word   ANI_DETACH
    1710                    
    1711 0000c680     8021          .word   ANI_FACEUP
    1712 0000c690     8002          .word   ANI_SETMODE,MODE_NORMAL
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   34

    1713 0000c6b0     8049          .word   ANI_END
    1714                    
    1715                    
    1716                    *****************************************************************************
    1717                    *
    1718                    * KNEE TO HEAD HELD OPPONENT
    1719                    
    1720 0000c6c0            SUBR   dnk_3_knee_to_head_anim
    1721                    
    1722 0000c6c0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1723 0000c6e0     8003          .word   ANI_ZEROVELS
    1724 0000c6f0     8026          .word   ANI_SETSPEED,100h
    1725                    
    1726 0000c710     8075          .word   ANI_STARTATTACK,AT_KNEE,9
    1727 0000c740                   WL      2,D3SK3X+FR1
    1728 0000c770                   WL      2,D3SK3X+FR2
    1729 0000c7a0                   WL      2,D3SK3X+FR3
    1730                    
    1731 0000c7d0     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,20,62,68,16
    1732 0000c830                   WL      2,D3SK3X+FR4
    1733 0000c860     8007          .word   ANI_ATTACK_OFF
    1734 0000c870                   WL      17,D3SK3X+FR4
    1735                    
    1736 0000c8a0                   WL      3,D3SK3X+FR5
    1737 0000c8d0                   WL      3,D3SK3X+FR6
    1738 0000c900                   WL      3,D3SK3X+FR7
    1739                    
    1740 0000c930     8021          .word   ANI_FACEUP
    1741                    ;       .word   ANI_FACE,MOVE_RIGHT|MOVE_DOWN
    1742 0000c940     8002          .word   ANI_SETMODE,MODE_NORMAL
    1743 0000c960     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1744 0000c980     8049          .word   ANI_END
    1745                    
    1746                    
    1747 0000c990            SUBR   dnk_3_knees_to_head_anim
    1748                    
    1749                    ;Need to do a move which kicks guys in the ass!
    1750                    
    1751 0000c990     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1752 0000c9b0     8003          .word   ANI_ZEROVELS
    1753 0000c9c0     8026          .word   ANI_SETSPEED,100h
    1754                    
    1755 0000c9e0     8062          .word   ANI_SET_RPTCOUNT,3      ;2 times
    1756 0000ca00     8074          .WORD   ANI_ADD_MOVE,MOVE_C_4,2,2
    1757 0000ca40                   WL      ANI_GOTO,plisskp
    1758 0000ca70           plisrpt
    1759 0000ca70     8075          .word   ANI_STARTATTACK,AT_KNEE,10
    1760 0000caa0                   WL      3,D4KH3A+FR3
    1761 0000cad0           plisskp
    1762 0000cad0                   WL      ANI_SET_YVEL,30000h
    1763 0000cb00     8061          .word   ANI_CLR_BUTCOUNT
    1764                    
    1765 0000cb10                   WL      2,D4KM3A+FR2
    1766 0000cb40                   WL      2,D4KM3A+FR3
    1767 0000cb70                   WL      3,D4KM3A+FR4
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   35

    1768                    
    1769 0000cba0     8006          .word   ANI_ATTACK_ON, AMODE_HEADKNEES,20,42,68,36
    1770 0000cc00                   WL      4,D4KM3A+FR5
    1771 0000cc30     8007          .word   ANI_ATTACK_OFF
    1772 0000cc40                   WL      ANI_IFNOTSTATUS2,plismissed
    1773                    
    1774 0000cc70                   WWWL    ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,plisexit
    1775 0000ccc0     8063          .word   ANI_DEC_RPTCOUNT
    1776 0000ccd0                   WL      ANI_IF_RPTCOUNT,plisrpt
    1777                    
    1778 0000cd00     8061          .word   ANI_CLR_BUTCOUNT
    1779                    
    1780 0000cd10                   WL      2,D4KM3A+FR4
    1781 0000cd40                   WL      2,D4KM3A+FR3
    1782 0000cd70                   WL      ANI_SET_YVEL,40000h
    1783 0000cda0                   WL      2,D4KM3A+FR2
    1784 0000cdd0                   WL      2,D4KM3A+FR3
    1785 0000ce00                   WL      2,D4KM3A+FR4
    1786                    
    1787 0000ce30     8006          .word   ANI_ATTACK_ON, AMODE_HEADKNEES,20,42,68,36
    1788 0000ce90                   WL      4,D4KM3A+FR5
    1789 0000cec0     8007          .word   ANI_ATTACK_OFF
    1790 0000ced0                   WL      ANI_IFNOTSTATUS2,plismissed
    1791                    
    1792 0000cf00                   WWWL    ANI_IF_BUTCOUNT_GE,SPUNCHB_COUNT,1,plisdo_pile
    1793                    
    1794 0000cf50           plisexit
    1795 0000cf50           plismissed
    1796 0000cf50     800a          .word   ANI_DETACH
    1797 0000cf60     8015          .word   ANI_OFFSET,0,0,-5                       ;x,y,z
    1798 0000cfa0                   WL      2,D4KM3A+FR6
    1799 0000cfd0                   WL      2,D4KM3A+FR7
    1800 0000d000                   WL      2,D4KM3A+FR8
    1801 0000d030                   WL      2,D4KM3A+FR9
    1802 0000d060                   WL      2,D4KM3A+FR10
    1803 0000d090     8022          .word   ANI_FACEDOWN
    1804                    
    1805 0000d0a0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1806 0000d0c0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1807 0000d0e0     8049          .word   ANI_END
    1808                    
    1809                    
    1810 0000d0f0           plisdo_pile
    1811 0000d0f0                   WL      2,D4KM3A+FR6
    1812 0000d120                   WL      2,D4KM3A+FR7
    1813 0000d150                   WL      2,D4KM3A+FR8
    1814 0000d180                   WL      2,D4KM3A+FR9
    1815 0000d1b0                   WL      2,D4KM3A+FR10
    1816                    
    1817 0000d1e0     800a          .word   ANI_DETACH
    1818 0000d1f0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1819 0000d210     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1820 0000d230                   WL      ANI_CHANGEANIM,dnk_3_pile_driver_anim
    1821                    ;       .word   ANI_END
    1822                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   36

    1823                    
    1824                    *****************************************************************************
    1825                    *
    1826                    * UPPERCUT TO HEAD HELD OPPONENT
    1827                    
    1828 0000d260            SUBR   dnk_uppercut_to_head_anim
    1829                    
    1830 0000d260     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1831 0000d280     8003          .word   ANI_ZEROVELS
    1832 0000d290     8026          .word   ANI_SETSPEED,100h
    1833                    
    1834 0000d2b0     8075          .word   ANI_STARTATTACK,AT_KNEE,16
    1835 0000d2e0                   WL      2,D4GP3C+FR2
    1836 0000d310                   WL      2,D4GP3C+FR3
    1837 0000d340                   WL      2,D4GP3C+FR4
    1838 0000d370                   WL      2,D4GP3C+FR5
    1839 0000d3a0     801a          .WORD   ANI_SOUND,43H
    1840 0000d3c0     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,44,57,32,37 ;mode,x,y,w,h
    1841 0000d420                   WL      10,D4GP3C+FR6
    1842 0000d450     8007          .word   ANI_ATTACK_OFF
    1843 0000d460                   WL      3 ,D4GP3C+FR7
    1844                    
    1845 0000d490     8022          .word   ANI_FACEDOWN
    1846 0000d4a0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1847 0000d4c0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1848 0000d4e0     8049          .word   ANI_END
    1849                    
    1850                    
    1851                    *****************************************************************************
    1852                    *
    1853                    * UPPERCUT TO IN CLOSE OPPONENT
    1854                    
    1855 0000d4f0            SUBR   dnk_4_uppercut_anim
    1856                    
    1857 0000d4f0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1858 0000d510     8003          .word   ANI_ZEROVELS
    1859 0000d520     8026          .word   ANI_SETSPEED,100h
    1860 0000d540     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1861 0000d560     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    1862 0000d570     805f          .word   ANI_SET_WRESTLER_XFLIP
    1863                    
    1864 0000d580     8075          .word   ANI_STARTATTACK,AT_PUNCH,6
    1865 0000d5b0                   WL      1,D4GP3C+FR2
    1866 0000d5e0                   WL      1,D4GP3C+FR3
    1867 0000d610                   WL      2,D4GP3C+FR4
    1868 0000d640                   WL      2,D4GP3C+FR5
    1869                    ;       .WORD   ANI_SOUND,43H
    1870 0000d670     8006          .word   ANI_ATTACK_ON, AMODE_UPRCUT,44,57,32,37 ;mode,x,y,w,h
    1871 0000d6d0                   WL      2,D4GP3C+FR6
    1872 0000d700     8007          .word   ANI_ATTACK_OFF
    1873 0000d710                   WL      ANI_IFNOTSTATUS2,bnmimissed
    1874 0000d740     8074          .WORD   ANI_ADD_MOVE,MOVE_C_4,2,2
    1875 0000d780                   WL      ANI_IFBLOCKED,bnmimissedb               ;Yes, I hit blocker
    1876                    ;Got him
    1877                    ;Hit, spray some explosions
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   37

    1878                    
    1879 0000d7b0     8071          .word   ANI_SET_ATTACH
    1880 0000d7c0     805d          .word   ANI_DEBRISAT,400,1,10,50,0      ;%chance, tbl index, x,y,z off
    1881 0000d820     800a          .word   ANI_DETACH
    1882 0000d830                   WL      ANI_CODE,CALL_OTHER_AVERAGE
    1883 0000d860     801a          .WORD   ANI_SOUND,43H
    1884                    
    1885 0000d880                   WL      ANI_CODE,bnmiset_zvel
    1886 0000d8b0     801f          .word   ANI_SHAKER,35
    1887                    ;       WL      ANI_CODE,HIT_THE_MAT
    1888 0000d8d0                   WWL     ANI_SLIDE_BACK,30h,-70000h,bnmino_hit2
    1889 0000d930                   WL      10,D4GP3C+FR6
    1890 0000d960           bnmino_hit2
    1891 0000d960                   WL      15,D4GP3C+FR6
    1892 0000d990                   WL      4,D4GP3C+FR7
    1893                    
    1894 0000d9c0     8022          .word   ANI_FACEDOWN
    1895 0000d9d0     8002          .word   ANI_SETMODE,MODE_NORMAL
    1896 0000d9f0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1897 0000da10     8049          .word   ANI_END
    1898                    
    1899 0000da20           bnmiset_zvel
    1900 0000da20     b7a0          move    *a13(WHOIHIT),a0,L
         0000da30     0500  
    1901 0000da40     b60e          move    *a0(OBJ_ZVEL),a14,L
         0000da50     0310  
    1902 0000da60     cb05          jrnz    bnmiskip
    1903 0000da70     09ee          movi    10000h,a14
         0000da80 00010000  
    1904 0000daa0     b3c0          move    a14,*a0(OBJ_ZVEL),L
         0000dab0     0310  
    1905 0000dac0     0960  bnmiskip        rets
    1906                    
    1907 0000dad0           bnmimissedb
    1908 0000dad0                   WL      12,D4GP3C+FR6
    1909 0000db00           bnmimissed
    1910 0000db00                   WL      3,D4GP3C+FR6
    1911 0000db30                   WL      3,D4GP3C+FR7
    1912                    
    1913 0000db60     8002          .word   ANI_SETMODE,MODE_NORMAL
    1914 0000db80     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1915 0000dba0     8049          .word   ANI_END
    1916                    
    1917                    
    1918                    ;FIX!!!  Make cooler...
    1919                    *****************************************************************************
    1920                    *
    1921                    * UPPERCUT TO HEAD HELD OPPONENT
    1922                    
    1923 0000dbb0            SUBR   dnk_combo_uppercut_to_head_anim
    1924                    
    1925 0000dbb0     8073          .WORD   ANI_CLEAR_COMBO
    1926 0000dbc0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    1927 0000dbe0     8003          .word   ANI_ZEROVELS
    1928 0000dbf0     8026          .word   ANI_SETSPEED,100h
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   38

    1929 0000dc10     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    1930                    
    1931 0000dc30                   WLW     ANI_SET_XVEL,30000h,AM_FACE_REL
    1932                    
    1933 0000dc70     8075          .word   ANI_STARTATTACK,AT_KNEE,9
    1934 0000dca0                   WL      2,D4GP3C+FR2
    1935 0000dcd0                   WL      3,D4GP3C+FR3
    1936                    
    1937 0000dd00                   WL      2,D4GP3C+FR4
    1938 0000dd30                   WL      2,D4GP3C+FR5
    1939 0000dd60     801a          .WORD   ANI_SOUND,43H
    1940 0000dd80     8072          .WORD   ANI_INC_COMBO
    1941 0000dd90     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,44,37,32,57 ;mode,x,y,w,h
    1942 0000ddf0                   WL      1,D4GP3C+FR6
    1943 0000de20     8007          .word   ANI_ATTACK_OFF
    1944 0000de30                   WL      ANI_IFNOTSTATUS2,xsnumiss
    1945 0000de60                   WL      ANI_CODE,SET_OPTIMAL_POSITION
    1946 0000de90     8072          .WORD   ANI_INC_COMBO
    1947                    ;       .word   ANI_SET_ATTACH
    1948 0000dea0                   WLLL    ANI_SETOPPVELS,0,0h,0h          ;x,y,z vels
    1949 0000df10     8075          .word   ANI_STARTATTACK,AT_KNEE,12
    1950 0000df40                   WL      3,D4GP3C+FR6
    1951 0000df70                   WL      3 ,D4GP3C+FR7
    1952                    
    1953 0000dfa0     8061          .word   ANI_CLR_BUTCOUNT
    1954                    
    1955 0000dfb0                   WL      2,D4GP3C+FR2
    1956 0000dfe0                   WL      1,D4GP3C+FR3
    1957                    
    1958 0000e010                   WL      2,D4GP3C+FR4
    1959 0000e040                   WL      1,D4GP3C+FR5
    1960 0000e070     801a          .WORD   ANI_SOUND,43H
    1961 0000e090     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,44,37,32,57 ;mode,x,y,w,h
    1962 0000e0f0                   WL      1,D4GP3C+FR6
    1963 0000e120     8007          .word   ANI_ATTACK_OFF
    1964 0000e130                   WL      ANI_IFNOTSTATUS2,xsnumiss
    1965 0000e160     8072          .WORD   ANI_INC_COMBO
    1966                    ;       .word   ANI_SET_ATTACH
    1967 0000e170                   WLLL    ANI_SETOPPVELS,0,0h,0h          ;x,y,z vels
    1968                    
    1969 0000e1e0     8075          .word   ANI_STARTATTACK,AT_KNEE,8
    1970 0000e210                   WL      1,D4GP3C+FR6
    1971 0000e240                   WL      2 ,D4GP3C+FR7
    1972                    
    1973 0000e270                   WL      1,D4GP3C+FR2
    1974 0000e2a0                   WL      2,D4GP3C+FR3
    1975                    
    1976 0000e2d0                   WL      1,D4GP3C+FR4
    1977 0000e300                   WL      1,D4GP3C+FR5
    1978 0000e330     801a          .WORD   ANI_SOUND,43H
    1979 0000e350     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,44,37,32,57 ;mode,x,y,w,h
    1980 0000e3b0                   WL      1,D4GP3C+FR6
    1981 0000e3e0     8007          .word   ANI_ATTACK_OFF
    1982 0000e3f0                   WL      ANI_IFNOTSTATUS2,xsnumiss
    1983 0000e420     8072          .WORD   ANI_INC_COMBO
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   39

    1984                    ;       .word   ANI_SET_ATTACH
    1985 0000e430                   WLLL    ANI_SETOPPVELS,0,0h,0h          ;x,y,z vels
    1986 0000e4a0     8075          .word   ANI_STARTATTACK,AT_KNEE,8
    1987 0000e4d0                   WL      1,D4GP3C+FR6
    1988 0000e500                   WL      2 ,D4GP3C+FR7
    1989                    
    1990 0000e530                   WL      1,D4GP3C+FR2
    1991 0000e560                   WL      2,D4GP3C+FR3
    1992                    
    1993 0000e590                   WL      1,D4GP3C+FR4
    1994 0000e5c0                   WL      1,D4GP3C+FR5
    1995 0000e5f0     801a          .WORD   ANI_SOUND,43H
    1996 0000e610     8006          .word   ANI_ATTACK_ON, AMODE_KNEE,44,37,32,57 ;mode,x,y,w,h
    1997 0000e670                   WL      1,D4GP3C+FR6
    1998 0000e6a0     8007          .word   ANI_ATTACK_OFF
    1999 0000e6b0                   WL      ANI_IFNOTSTATUS2,xsnumiss
    2000 0000e6e0     8072          .WORD   ANI_INC_COMBO
    2001                    ;       .word   ANI_SET_ATTACH
    2002 0000e6f0                   WLLL    ANI_SETOPPVELS,0,0h,0h          ;x,y,z vels
    2003 0000e760                   WLW     ANI_SET_XVEL,80000h,AM_FACE_REL
    2004 0000e7a0                   WL      1,D4GP3C+FR6
    2005 0000e7d0                   WL      2 ,D4GP3C+FR7
    2006 0000e800                   WWWL    ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,xsnuNEXT_CHECK_2
    2007 0000e850                   WL      ANI_CHANGEANIM,dnk_combo_box_anim
    2008 0000e880           xsnuNEXT_CHECK_2
    2009 0000e880                   WWWL    ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,xsnuNEXT_CHECK
    2010 0000e8d0                   WL      ANI_CHANGEANIM,dnk_combo_knee_fall_anim
    2011                    
    2012 0000e900           xsnuNEXT_CHECK
    2013 0000e900                   WWWL    ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,xsnumiss
    2014 0000e950                   WL      ANI_CHANGEANIM,dnk_4_combo_butt_anim
    2015                    
    2016 0000e980           xsnumiss
    2017 0000e980                   WL      ANI_CODE,DO_COMBO_MESS
    2018 0000e9b0     8073          .WORD   ANI_CLEAR_COMBO
    2019 0000e9c0     800a          .word   ANI_DETACH
    2020 0000e9d0     8022          .word   ANI_FACEDOWN
    2021 0000e9e0     8002          .word   ANI_SETMODE,MODE_NORMAL
    2022 0000ea00     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2023 0000ea20     8049          .word   ANI_END
    2024                    
    2025 0000ea30           SET_OPTIMAL_POSITION
    2026 0000ea30     b7a0          MOVE    *A13(WHOIHIT),A0,L
         0000ea40     0500  
    2027 0000ea50     b7a2          MOVE    *A13(OBJ_XPOS),A2,L
         0000ea60     0100  
    2028 0000ea70     09e1          MOVI    [70,0],A1
         0000ea80 00460000  
    2029 0000eaa0     b5a3          MOVE    *A13(FACING_DIR),A3
         0000eab0     04c0  
    2030 0000eac0     1fa3          BTST    MOVE_LEFT_BIT,A3
    2031 0000ead0     ca01          JRZ     NO_NEED_TO_NEG_XDIR
    2032 0000eae0     03a1          NEG     A1
    2033 0000eaf0           NO_NEED_TO_NEG_XDIR
    2034 0000eaf0     4022          ADD     A1,A2
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   40

    2035 0000eb00     b240          MOVE    A2,*A0(OBJ_XPOS),L
         0000eb10     0100  
    2036 0000eb20     0960          RETS
    2037                    
    2038                    
    2039 0000eb30            SUBR   dnk_uppercuts_to_head_anim
    2040                    
    2041 0000eb30     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    2042 0000eb50     8003          .word   ANI_ZEROVELS
    2043 0000eb60     8026          .word   ANI_SETSPEED,100h
    2044 0000eb80     8074          .WORD   ANI_ADD_MOVE,MOVE_C_4,2,2
    2045                    
    2046 0000ebc0     8033          .word   ANI_SETWORD,USR_VAR2,0
    2047                    
    2048 0000ebf0     8061          .word   ANI_CLR_BUTCOUNT
    2049 0000ec00     8062          .word   ANI_SET_RPTCOUNT,3      ;rpt 2 times
    2050 0000ec20                   WL      3,D4GP3C+FR2
    2051 0000ec50                   WL      3,D4GP3C+FR3
    2052 0000ec80                   WL      ANI_GOTO,xsnuskp
    2053 0000ecb0           xsnurpt
    2054 0000ecb0     8061          .word   ANI_CLR_BUTCOUNT
    2055                    
    2056 0000ecc0                   WL      2,D4GP3C+FR8
    2057 0000ecf0                   WL      2,D4GP3C+FR9
    2058 0000ed20                   WL      2,D4GP3C+FR3
    2059 0000ed50           xsnuskp
    2060 0000ed50                   WL      2,D4GP3C+FR4
    2061 0000ed80                   WL      2,D4GP3C+FR5
    2062 0000edb0     801a          .WORD   ANI_SOUND,43H
    2063 0000edd0     8006          .word   ANI_ATTACK_ON, AMODE_HEADKNEES,44,57,32,37 ;mode,x,y,w,h
    2064 0000ee30                   WL      3,D4GP3C+FR6
    2065 0000ee60     8007          .word   ANI_ATTACK_OFF
    2066 0000ee70                   WL      ANI_IFNOTSTATUS2,xsnumissed
    2067                    
    2068 0000eea0     8071          .word   ANI_SET_ATTACH
    2069 0000eeb0     805d          .word   ANI_DEBRISAT,250,1,10,50,0      ;%chance, tbl index, x,y,z off
    2070                    ;       .word   ANI_DETACH
    2071                    
    2072 0000ef10                   WWWL    ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,xsnuexit
    2073 0000ef60     8063          .word   ANI_DEC_RPTCOUNT
    2074 0000ef70                   WL      ANI_IF_RPTCOUNT,xsnurpt
    2075                    
    2076                    ;Completed multiple uppercuts, allow flings, etc.
    2077                    ;       .word   ANI_SET_ATTACH
    2078                    ;       .word   ANI_SETOPP_PLYRMODE,MODE_NORMAL
    2079                    ;       .word   ANI_DETACH
    2080                    
    2081 0000efa0     8033          .word   ANI_SETWORD,USR_VAR2,1
    2082 0000efd0     8061          .word   ANI_CLR_BUTCOUNT
    2083                    
    2084 0000efe0                   WL      2,D4GP3C+FR8
    2085 0000f010                   WL      2,D4GP3C+FR9
    2086 0000f040                   WL      2,D4GP3C+FR3
    2087 0000f070                   WL      2,D4GP3C+FR4
    2088 0000f0a0                   WL      2,D4GP3C+FR5
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   41

    2089 0000f0d0     801a          .WORD   ANI_SOUND,43H
    2090 0000f0f0     8006          .word   ANI_ATTACK_ON, AMODE_HEADKNEES,44,57,32,37 ;mode,x,y,w,h
    2091 0000f150                   WL      3,D4GP3C+FR6
    2092 0000f180     8007          .word   ANI_ATTACK_OFF
    2093 0000f190                   WL      ANI_IFNOTSTATUS2,xsnumissed
    2094                    
    2095 0000f1c0                   WL      ANI_CODE,xsnugo_high
    2096                    
    2097 0000f1f0                   WWWL    ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,xsnuexit
    2098                    
    2099 0000f240                   WL      3,D4GP3C+FR7
    2100                    
    2101 0000f270                   WL      ANI_CHANGEANIM,dnk_flying_kick_anim
    2102                    ;       .word   ANI_END
    2103                    
    2104 0000f2a0           xsnuexit
    2105 0000f2a0           xsnumissed
    2106 0000f2a0     8015          .word   ANI_OFFSET,0,0,-5                       ;x,y,z
    2107 0000f2e0                   WL      3,D4GP3C+FR7
    2108 0000f310     800a          .word   ANI_DETACH
    2109 0000f320     8022          .word   ANI_FACEDOWN
    2110                    
    2111 0000f330     8002          .word   ANI_SETMODE,MODE_NORMAL
    2112 0000f350     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2113 0000f370     8049          .word   ANI_END
    2114                    
    2115                    
    2116 0000f380           xsnugo_high
    2117                    ;Got rid of this because attach_proc is a zero after a hit
    2118                    ;       move    *a13(ATTACH_PROC),a0,L
    2119                    ;       move    *a0(WRESTLERNUM),A14
    2120                    ;       cmpi    3,a14                           ;Yoko
    2121                    ;       jrz     xsnux
    2122                    ;       movi    50000h,a14
    2123                    ;       move    a14,*a0(OBJ_YVEL),L
    2124                    
    2125 0000f380     b5ae          move    *a13(CLOSEST_NUM),a14
         0000f390     03a0  
    2126 0000f3a0                   X32     a14
    2127 0000f3b0     0b2e          addi    process_ptrs,a14
         0000f3c0 00000000! 
    2128 0000f3e0     87ce          move    *a14,a14,L
    2129                    
    2130 0000f3f0     b5c0          move    *a14(WRESTLERNUM),a0
         0000f400     0590  
    2131 0000f410     0b40          cmpi    3,a0                            ;Yoko too fat
         0000f420     fffc  
    2132 0000f430     ca05          jrz     xsnux
    2133                    
    2134 0000f440     09e0          movi    50000h,a0                       ;Go higher for last hit!
         0000f450 00050000  
    2135 0000f470     b20e          move    a0,*a14(OBJ_YVEL),L
         0000f480     02f0  
    2136 0000f490     0960  xsnux   rets
    2137                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   42

    2138                    
    2139 0000f4a0           xsnuchk_count
    2140 0000f4a0     b5a0          move    *a13(ANIMODE),a0
         0000f4b0     0660  
    2141 0000f4c0     0b80          andni   MODE_STATUS2,a0
         0000f4d0 00000200  
    2142 0000f4f0     b5ae          move    *a13(BUT_COUNT),a14
         0000f500     07c0  
    2143 0000f510     ca03          jrz     xsnufail
    2144 0000f520     0ba0          ori     MODE_STATUS2,a0
         0000f530 00000200  
    2145 0000f550           xsnufail
    2146 0000f550     b00d          move    a0,*a13(ANIMODE)
         0000f560     0660  
    2147 0000f570     0960          rets
    2148                    
    2149                    
    2150                    *****************************************************************************
    2151                    *
    2152                    * kgls2 SLAP
    2153                    
    2154                    
    2155 0000f580            SUBR   dnk_2_slap_anim
    2156                    
    2157 0000f580     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    2158 0000f5a0     8003          .word   ANI_ZEROVELS
    2159 0000f5b0     8026          .word   ANI_SETSPEED,100h
    2160                    
    2161 0000f5d0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2162 0000f5e0     805f          .word   ANI_SET_WRESTLER_XFLIP
    2163                    
    2164 0000f5f0     8075          .word   ANI_STARTATTACK,AT_SPINKIK,30
    2165 0000f620     8074          .WORD   ANI_ADD_MOVE,MOVE_C_3,2,2
    2166 0000f660                   WL      2,D2BS3A+FR1
    2167                    
    2168                            ;       ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
    2169 0000f690                   LEAPATOPP 0dh,999,4ah-5,50,90000h,TGT_HEAD,96,105,-30
    2170                    
    2171 0000f740                   WL      3,D2BS3A+FR2
    2172 0000f770                   WL      07h,D2BS3A+FR3
    2173 0000f7a0                   WL      3,D2BS3A+FR4
    2174                    
    2175 0000f7d0     8006          .word   ANI_ATTACK_ON, AMODE_BACKHAND,75,81,36,28       ;mode,x,y,w,h
    2176 0000f830                   WL      3,D2BS3A+FR5
    2177 0000f860                   WL      3,D2BS3A+FR6
    2178                    
    2179 0000f890     8007          .word   ANI_ATTACK_OFF
    2180                    
    2181 0000f8a0                   WWL     ANI_SLIDE_BACK,30h,-70000h,kglsno_hit
    2182                    
    2183 0000f900                   WL      ANI_SET_YVEL,40000h
    2184 0000f930                   WL      10,D2BS3A+FR6
    2185 0000f960           kglsno_hit
    2186                    
    2187 0000f960     800b          .word   ANI_WAITHITGND
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   43

    2188 0000f970     8003          .word   ANI_ZEROVELS
    2189                    
    2190 0000f980                   WL      5,D2BS3A+FR6
    2191                    
    2192                    
    2193 0000f9b0                   WL      ANI_CODE,spunch_delay
    2194 0000f9e0                   WL      ANI_IFNOTSTATUS2,kglsnone
    2195 0000fa10                   WL      15,D2BS3A+FR6
    2196 0000fa40           kglsnone
    2197                    
    2198                    
    2199 0000fa40                   WL      3,D2BS3A+FR8
    2200 0000fa70                   WL      3,D2BS3A+FR9
    2201                    
    2202 0000faa0     8002          .word   ANI_SETMODE,MODE_NORMAL
    2203 0000fac0     8049          .word   ANI_END
    2204                    
    2205                    *
    2206                    * hgdp4 SLAP
    2207                    
    2208 0000fad0            SUBR   dnk_4_slap_anim
    2209                    
    2210 0000fad0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    2211 0000faf0     8003          .word   ANI_ZEROVELS
    2212 0000fb00     8026          .word   ANI_SETSPEED,100h
    2213                    
    2214 0000fb20     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2215 0000fb30     805f          .word   ANI_SET_WRESTLER_XFLIP
    2216                    
    2217 0000fb40     8075          .word   ANI_STARTATTACK,AT_SPINKIK,30
    2218 0000fb70     8074          .WORD   ANI_ADD_MOVE,MOVE_C_3,2,2
    2219 0000fbb0                   WL      2,D4BS3A+FR1
    2220                    
    2221                            ;       ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
    2222 0000fbe0                   LEAPATOPP 0dh,999,4ah-5,50,90000h,TGT_HEAD,96,105,30
    2223                    
    2224 0000fc90                   WL      3,D4BS3A+FR2
    2225 0000fcc0                   WL      07h,D4BS3A+FR3
    2226 0000fcf0                   WL      3,D4BS3A+FR4
    2227                    
    2228 0000fd20     8006          .word   ANI_ATTACK_ON, AMODE_BACKHAND,75,81,36,28       ;mode,x,y,w,h
    2229 0000fd80                   WL      3,D4BS3A+FR5
    2230 0000fdb0                   WL      3,D4BS3A+FR6
    2231                    
    2232 0000fde0     8007          .word   ANI_ATTACK_OFF
    2233                    
    2234 0000fdf0                   WWL     ANI_SLIDE_BACK,30h,-70000h,hgdpno_hit2
    2235                    
    2236 0000fe50                   WL      ANI_SET_YVEL,40000h
    2237 0000fe80                   WL      10,D4BS3A+FR6
    2238 0000feb0           hgdpno_hit2
    2239 0000feb0     800b          .word   ANI_WAITHITGND
    2240 0000fec0     8003          .word   ANI_ZEROVELS
    2241                    
    2242 0000fed0                   WL      5,D4BS3A+FR6
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   44

    2243                    
    2244 0000ff00                   WL      ANI_CODE,spunch_delay
    2245 0000ff30                   WL      ANI_IFNOTSTATUS2,hgdpnone
    2246 0000ff60                   WL      15,D4BS3A+FR6
    2247 0000ff90           hgdpnone
    2248                    
    2249 0000ff90                   WL      3,D4BS3A+FR8
    2250 0000ffc0                   WL      3,D4BS3A+FR9
    2251                    
    2252 0000fff0     8002          .word   ANI_SETMODE,MODE_NORMAL
    2253 00010010     8049          .word   ANI_END
    2254                    
    2255                    
    2256 00010020            SUBR   spunch_delay
    2257                    
    2258 00010020     05a0          move    @royal_rumble,a0
         00010030 00000000! 
    2259 00010050     cb1d          jrnz    hgdpok
    2260 00010060     05a0          move    @PSTATUS2,a0
         00010070 00000000! 
    2261 00010090     1460          subk    3,a0
    2262 000100a0     ca05          jrz     hgdpcont
    2263 000100b0     05a0          move    @NUM_OPPS,a0
         000100c0 00000000! 
    2264 000100e0     1420          subk    1,a0
    2265 000100f0     cb13          jrnz    hgdpok
    2266 00010100           hgdpcont
    2267 00010100     b7ae          move    *a13(LAST_SPUNCH),a14,L
         00010110     0e10  
    2268 00010120     07a0          move    @PCNT,a0,L                      ;use 32-bit PCNT!
         00010130 00000000! 
    2269 00010150     b20d          move    a0,*a13(LAST_SPUNCH),L
         00010160     0e10  
    2270 00010170     45c0          sub     a14,a0
    2271 00010180     0b40          cmpi    2*60,a0
         00010190     ff87  
    2272 000101a0     c508          jrge    hgdpok
    2273                    
    2274                    ;This blocked fling attempt is too close (in terms of time) to most recent grab
    2275 000101b0     b5a1          move    *a13(ANIMODE),a1
         000101c0     0660  
    2276 000101d0     0ba1          ori     MODE_STATUS2,a1
         000101e0 00000200  
    2277 00010200     b02d          move    a1,*a13(ANIMODE)
         00010210     0660  
    2278 00010220     0960          rets
    2279                    
    2280 00010230     b5a1  hgdpok  move    *a13(ANIMODE),a1
         00010240     0660  
    2281 00010250     0b81          andni   MODE_STATUS2,a1
         00010260 00000200  
    2282 00010280     b02d          move    a1,*a13(ANIMODE)
         00010290     0660  
    2283 000102a0     0960          rets
    2284                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   45

    2285                    *****************************************************************************
    2286                    *
    2287                    * EAR SLAP
    2288                    
    2289                    
    2290 000102b0            SUBR   dnk_2_earslap_anim
    2291 000102b0            SUBR   dnk_4_earslap_anim
    2292                    
    2293 000102b0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    2294 000102d0     8003          .word   ANI_ZEROVELS
    2295 000102e0     8026          .word   ANI_SETSPEED,100h
    2296                    
    2297 00010300     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2298 00010310     805f          .word   ANI_SET_WRESTLER_XFLIP
    2299                    
    2300 00010320     8062          .word   ANI_SET_RPTCOUNT,4      ;3 times
    2301 00010340     8061          .word   ANI_CLR_BUTCOUNT
    2302                    
    2303 00010350     8075          .word   ANI_STARTATTACK,AT_LEAPING,14
    2304 00010380                   WL      2,D3ES3A+FR1
    2305                    
    2306 000103b0                   LEAPATOPP 0dh,999,58h,80,90000h,TGT_HEAD,106,105,-30
    2307                    
    2308 00010460                   WL      3,D3ES3A+FR2
    2309 00010490                   WL      5,D3ES3A+FR3
    2310 000104c0                   WL      3,D3ES3A+FR4
    2311 000104f0                   WL      3,D3ES3A+FR5
    2312                    
    2313 00010520     8028          .word   ANI_ZERO_XZVELS
    2314                    
    2315 00010530     8006          .word   ANI_ATTACK_ON, AMODE_EARSLAP,70,74,60,42        ;mode,x,y,w,h
    2316 00010590     801a          .word   ANI_SOUND,43h
    2317 000105b0     801f          .word   ANI_SHAKER,22
    2318 000105d0                   WL      3,D3ES3A+FR6
    2319                    
    2320 00010600     8007          .word   ANI_ATTACK_OFF
    2321                    
    2322 00010610     8074          .WORD   ANI_ADD_MOVE,MOVE_C_8,2,2
    2323 00010650                   WL      ANI_IFBLOCKED,ngvjcontz
    2324 00010680                   WL      ANI_IFSTATUS2,ngvjgothim
    2325                    
    2326 000106b0           ngvjcont
    2327 000106b0                   WL      10,D3ES3A+FR6
    2328 000106e0                   WL      ANI_GOTO,ngvjno_hit2
    2329 00010710           ngvjcontz
    2330 00010710                   WL      ANI_CODE,CALL_SPECIAL_MOVE
    2331 00010740     800b          .word   ANI_WAITHITGND
    2332 00010750     8003          .word   ANI_ZEROVELS
    2333 00010760                   WL      ANI_GOTO,ngvjno_hitz
    2334 00010790           ngvjgothim
    2335 00010790     807a          .word   ANI_DRAW_NAME,22
    2336 000107b0     8042          .word   ANI_DAMAGEOPP,D_EARSLAP1,RD_EARSLAP1
    2337 000107e0                   WL      ANI_CODE,CALL_SPECIAL_MOVE
    2338                    
    2339 00010810     800b          .word   ANI_WAITHITGND
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   46

    2340 00010820     8003          .word   ANI_ZEROVELS
    2341                    
    2342 00010830     805e          .word   ANI_DEBRIS,100,4,120,100,0      ;%chance, tbl index, x,y,z off
    2343 00010890           ngvjno_hitz
    2344 00010890                   WWWL    ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,2,ngvjfail
    2345 000108e0     8063          .word   ANI_DEC_RPTCOUNT
    2346 000108f0                   WL      ANI_IF_RPTCOUNT,ngvjdnk_quick_earslap
    2347 00010920           ngvjfail
    2348                    
    2349 00010920                   WWL     ANI_SLIDE_BACK,30h,-70000h,ngvjno_hit3
    2350                    
    2351 00010980                   WL      ANI_SET_YVEL,40000h
    2352 000109b0                   WL      10,D3ES3A+FR6
    2353 000109e0           ngvjno_hit3
    2354 000109e0                   WL      ANI_CODE,CALL_MISSES
    2355 00010a10                   WL      8,D3ES3A+FR6
    2356 00010a40                   WL      3,D3ES3A+FR5
    2357 00010a70                   WL      3,D3ES3A+FR4
    2358 00010aa0                   WL      3,D3ES3A+FR3
    2359 00010ad0                   WL      3,D3ES3A+FR2
    2360 00010b00                   WL      3,D3ES3A+FR1
    2361                    
    2362 00010b30     8022          .word   ANI_FACEDOWN
    2363 00010b40     8002          .word   ANI_SETMODE,MODE_NORMAL
    2364 00010b60     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2365 00010b80     8049          .word   ANI_END
    2366                    
    2367 00010b90           ngvjdnk_quick_earslap
    2368 00010b90     8061          .word   ANI_CLR_BUTCOUNT
    2369 00010ba0     8075          .word   ANI_STARTATTACK,AT_EARSLAP1,14
    2370 00010bd0                   WL      2,D3ES3A+FR5
    2371 00010c00                   WL      2,D3ES3A+FR4
    2372 00010c30                   WL      2,D3ES3A+FR3
    2373 00010c60                   WL      2,D3ES3A+FR2
    2374 00010c90                   WL      2,D3ES3A+FR3
    2375 00010cc0                   WL      2,D3ES3A+FR4
    2376 00010cf0                   WL      2,D3ES3A+FR5
    2377                    
    2378 00010d20     8006          .word   ANI_ATTACK_ON, AMODE_EARSLAP,70,74,60,42        ;mode,x,y,w,h
    2379 00010d80     801f          .word   ANI_SHAKER,22
    2380 00010da0                   WL      3,D3ES3A+FR6
    2381 00010dd0     8007          .word   ANI_ATTACK_OFF
    2382 00010de0                   WL      ANI_IFBLOCKED,ngvjcont
    2383                    
    2384 00010e10     8074          .WORD   ANI_ADD_MOVE,MOVE_C_8,2,2
    2385 00010e50                   WWWL    ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,2,ngvjfail2
    2386 00010ea0     8063          .word   ANI_DEC_RPTCOUNT
    2387 00010eb0                   WL      ANI_IF_RPTCOUNT,ngvjdnk_quick_earslap
    2388 00010ee0           ngvjfail2
    2389                    
    2390                    ;       .word   ANI_ATTACK_ON, AMODE_BACKHAND,90,74,40,42       ;mode,x,y,w,h
    2391 00010ee0     8006          .word   ANI_ATTACK_ON, AMODE_HDBUTT,70,74,60,42 ;mode,x,y,w,h
    2392                    
    2393 00010f40     801f          .word   ANI_SHAKER,22
    2394 00010f60                   WL      3,D3ES3A+FR6
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   47

    2395 00010f90     8007          .word   ANI_ATTACK_OFF
    2396                    
    2397 00010fa0                   WL      ANI_CODE,ngvjset_opp_y
    2398                    
    2399                    ;Stay in this buzz sequence longer if player keeps whacking on his punch button!
    2400                    
    2401                    ;       WL      ANI_SLAVEANIM,ngvjdrift_tbl
    2402                    ;       .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
    2403                    ;
    2404                    ;       .word   ANI_DETACH
    2405                    
    2406 00010fd0                   WWL     ANI_SLIDE_BACK,30h,-70000h,ngvjno_hitx
    2407                    
    2408 00011030                   WL      ANI_SET_YVEL,40000h
    2409 00011060                   WL      10,D3ES3A+FR6
    2410 00011090           ngvjno_hitx
    2411 00011090                   WL      15-8,D3ES3A+FR6
    2412                    
    2413 000110c0           ngvjno_hit2
    2414 000110c0                   WL      8,D3ES3A+FR6
    2415 000110f0                   WL      3,D3ES3A+FR5
    2416 00011120                   WL      3,D3ES3A+FR4
    2417 00011150                   WL      3,D3ES3A+FR3
    2418 00011180                   WL      3,D3ES3A+FR2
    2419 000111b0                   WL      3,D3ES3A+FR1
    2420                    
    2421 000111e0     8022          .word   ANI_FACEDOWN
    2422 000111f0     8002          .word   ANI_SETMODE,MODE_NORMAL
    2423 00011210     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2424 00011230     8049          .word   ANI_END
    2425                    
    2426 00011240           ngvjset_opp_y
    2427 00011240     b7a0          move    *a13(WHOIHIT),a0,L
         00011250     0500  
    2428 00011260     09ee          movi    [4,0],a14
         00011270 00040000  
    2429 00011290     b3c0          move    a14,*a0(OBJ_YVEL),L
         000112a0     02f0  
    2430 000112b0     0960          rets
    2431                    
    2432 000112c0            SUBR   dnk_4_combo_earslap_anim
    2433                    
    2434 000112c0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    2435 000112e0     8003          .word   ANI_ZEROVELS
    2436 000112f0     8026          .word   ANI_SETSPEED,100h
    2437                    
    2438 00011310     8062          .word   ANI_SET_RPTCOUNT,4      ;2 times
    2439                    
    2440                    ;       .word   ANI_STARTATTACK,AT_EARSLAP1,17
    2441                    
    2442 00011330                   WL      3,D3ES3A+FR1
    2443                    
    2444 00011360                   LEAPATOPP 0dh,999,50h,80,90000h,TGT_HEAD,106,105,-30
    2445                    
    2446 00011410                   WL      3,D3ES3A+FR2
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   48

    2447                    
    2448 00011440                   WL      5,D3ES3A+FR3
    2449 00011470                   WL      3,D3ES3A+FR4
    2450 000114a0                   WL      3,D3ES3A+FR5
    2451                    
    2452 000114d0     8028          .word   ANI_ZERO_XZVELS
    2453                    
    2454 000114e0     8006          .word   ANI_ATTACK_ON, AMODE_EARSLAP,70,74,60,42        ;mode,x,y,w,h
    2455 00011540     801a          .word   ANI_SOUND,43h
    2456 00011560     801f          .word   ANI_SHAKER,22
    2457 00011580                   WL      12,D3ES3A+FR6
    2458                    
    2459 000115b0     8007          .word   ANI_ATTACK_OFF
    2460                    
    2461 000115c0                   WL      ANI_IFSTATUS2,ngvjgothimc
    2462 000115f0                   WL      12,D3ES3A+FR6
    2463 00011620                   WL      ANI_GOTO,ngvjno_hit2c
    2464                    
    2465 00011650           ngvjgothimc
    2466 00011650     8072          .WORD   ANI_INC_COMBO
    2467 00011660     8042          .word   ANI_DAMAGEOPP,D_EARSLAP2,RD_EARSLAP2
    2468                    
    2469 00011690     800b          .word   ANI_WAITHITGND
    2470 000116a0     8003          .word   ANI_ZEROVELS
    2471                    
    2472 000116b0     8061          .word   ANI_CLR_BUTCOUNT
    2473                    
    2474 000116c0           ngvjdnk_quick_combo_earslap
    2475                    ;       .word   ANI_STARTATTACK,AT_EARSLAP1,10
    2476 000116c0                   WL      1,D3ES3A+FR5
    2477 000116f0                   WL      2,D3ES3A+FR4
    2478 00011720                   WL      1,D3ES3A+FR3
    2479 00011750                   WL      2,D3ES3A+FR2
    2480 00011780                   WL      1,D3ES3A+FR3
    2481 000117b0                   WL      2,D3ES3A+FR4
    2482 000117e0                   WL      1,D3ES3A+FR5
    2483                    
    2484 00011810     8006          .word   ANI_ATTACK_ON, AMODE_EARSLAP,70,74,60,42        ;mode,x,y,w,h
    2485 00011870     801f          .word   ANI_SHAKER,22
    2486 00011890                   WL      3,D3ES3A+FR6
    2487 000118c0     8007          .word   ANI_ATTACK_OFF
    2488                    
    2489 000118d0                   WL      ANI_IFNOTSTATUS2,ngvjno_hit2c
    2490 00011900     8072          .WORD   ANI_INC_COMBO
    2491                    
    2492 00011910     8063          .word   ANI_DEC_RPTCOUNT
    2493 00011920                   WL      ANI_IF_RPTCOUNT,ngvjdnk_quick_combo_earslap
    2494                    
    2495 00011950                   WL      3,D3ES3A+FR6
    2496 00011980                   WL      3,D3ES3A+FR5
    2497 000119b0                   WL      3,D3ES3A+FR4
    2498                    
    2499 000119e0                   WWWL    ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,ngvjNEXT_CHECK
    2500                    
    2501 00011a30     806c          .word   ANI_IMMOBILIZE,30
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   49

    2502 00011a50                   WLW     ANI_SET_XVEL,10000h,AM_FACE_REL
    2503 00011a90                   WL      ANI_CHANGEANIM,dnk_combo_buzz2_anim
    2504                    
    2505 00011ac0           ngvjNEXT_CHECK
    2506 00011ac0                   WWWL    ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,ngvjNEXT_CHEK2
    2507                    
    2508 00011b10                   WL      3,D3ES3A+FR3
    2509 00011b40                   WL      3,D3ES3A+FR2
    2510 00011b70                   WL      3,D3ES3A+FR1
    2511                    
    2512 00011ba0                   WLW     ANI_SET_XVEL,10000h,AM_FACE_REL
    2513 00011be0                   WL      ANI_CHANGEANIM,dnk_combo_flying_kick_anim
    2514 00011c10           ngvjNEXT_CHEK2
    2515 00011c10                   WWWL    ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,ngvjmissed
    2516                    
    2517 00011c60                   WLW     ANI_SET_XVEL,50000h,AM_FACE_REL
    2518                    
    2519 00011ca0                   WL      3,D3ES3A+FR3
    2520 00011cd0                   WL      3,D3ES3A+FR2
    2521 00011d00                   WL      3,D3ES3A+FR1
    2522                    
    2523 00011d30                   WL      ANI_CHANGEANIM,dnk_combo_head_slam_anim
    2524                    
    2525 00011d60           ngvjmissed
    2526 00011d60                   WL      ANI_CODE,DO_COMBO_MESS
    2527 00011d90     8073          .WORD   ANI_CLEAR_COMBO
    2528 00011da0     8022          .word   ANI_FACEDOWN
    2529 00011db0     8002          .word   ANI_SETMODE,MODE_NORMAL
    2530 00011dd0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2531 00011df0     8049          .word   ANI_END
    2532                    
    2533 00011e00           ngvjno_hit2c
    2534 00011e00                   WL      ANI_CODE,DO_COMBO_MESS
    2535 00011e30     8073          .WORD   ANI_CLEAR_COMBO
    2536 00011e40                   WL      8,D3ES3A+FR6
    2537 00011e70                   WL      3,D3ES3A+FR5
    2538 00011ea0                   WL      3,D3ES3A+FR4
    2539 00011ed0                   WL      3,D3ES3A+FR3
    2540 00011f00                   WL      3,D3ES3A+FR2
    2541 00011f30                   WL      3,D3ES3A+FR1
    2542                    
    2543 00011f60     8022          .word   ANI_FACEDOWN
    2544 00011f70     8002          .word   ANI_SETMODE,MODE_NORMAL
    2545 00011f90     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    2546 00011fb0     8049          .word   ANI_END
    2547                    
    2548                            
    2549                    *******************************
    2550                    * Smoke trail (Process)
    2551                    * A10=*wrestler proc
    2552                    
    2553 00011fc0            SUBR   body_smoke
    2554                    
    2555 00011fc0     576b          clr     a11
    2556 00011fd0           umsclp  CREATE0 smokepuff
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   50

    2557 00012040                   SLEEPK  1
    2558 00012080     102b          inc     a11
    2559 00012090     0b4b          cmpi    17,a11
         000120a0     ffee  
    2560 000120b0     c4f1          jrlt    umsclp
    2561                    
    2562 000120c0                   DIE
    2563                    
    2564                    
    2565                    *******************************
    2566                    * Smoke trail puff (Process)
    2567                    * A10=*wrestler proc
    2568                    
    2569 000120f0            SUBRP  smokepuff
    2570                    
    2571 000120f0     b543          move    *a10(OBJ_ZPOSINT),a3
         00012100     0150  
    2572 00012110     1860          movk    3,a0
    2573 00012120     0d5f          calla   RNDRNG0
         00012130 00000000! 
    2574 00012150     1440          subk    2,a0
    2575 00012160     4003          add     a0,a3                   ;-2 to 1
    2576 00012170     1203          addk    16,a3
    2577 00012180     0ba3          ori     1000h,a3
         00012190 00001000  
    2578                    
    2579 000121b0     1860          movk    3,a0
    2580 000121c0     0d5f          calla   RNDRNG0
         000121d0 00000000! 
    2581 000121f0     24a0          sll     5,a0                    ;*32
    2582 00012200     0b20          addi    smoke_t,a0
         00012210 00012800' 
    2583 00012230     8609          move    *a0,a9,L
    2584                    
    2585 00012240     09e6          movi    [1,8000h],a6
         00012250 00018000  
    2586 00012270     09e7          movi    [-2,0],a7
         00012280 fffe0000  
    2587                    
    2588 000122a0     4d6e          move    a11,a14
    2589 000122b0     248e          sll     4,a14
    2590 000122c0     0b2e          addi    oddtx_tbl,a14
         000122d0 000125e0' 
    2591 000122f0     85c1          move    *a14,a1
    2592                    
    2593 00012300     b540          move    *a10(OBJ_XPOSINT),a0
         00012310     0110  
    2594                    
    2595 00012320     b54e          move    *a10(OBJ_CONTROL),a14
         00012330     0780  
    2596 00012340     1f6e          btst    B_FLIPH,a14
    2597 00012350     ca02          jrz     oddtno_flip
    2598 00012360     03a6          neg     a6
    2599 00012370     03a1          neg     a1
    2600 00012380           oddtno_flip
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   51

    2601 00012380     4020          add     a1,a0
    2602 00012390     2600          sll     16,a0                   ;X
    2603                    
    2604 000123a0     4d6e          move    a11,a14
    2605 000123b0     248e          sll     4,a14
    2606 000123c0     0b2e          addi    oddty_tbl,a14
         000123d0 000126f0' 
    2607 000123f0     85ce          move    *a14,a14
    2608                    
    2609 00012400     09c2          movi    Y_SCALE_MULTIPLIER,a2
         00012410     3566  
    2610 00012420     b541          move    *a10(OBJ_ZPOSINT),a1
         00012430     0150  
    2611 00012440     5e41          mpyu    a2,a1
    2612 00012450     b542          move    *a10(OBJ_YPOSINT),a2
         00012460     0130  
    2613 00012470     45c2          sub     a14,a2
    2614 00012480     0b02          addi    0h,a2
         00012490     0000  
    2615 000124a0     2602          sll     16,a2
    2616 000124b0     4441          sub     a2,a1
    2617                    
    2618 000124c0     09e2          movi    CLDB1ORNG,a2
         000124d0 00000000! 
    2619 000124f0     09e4          movi    DMAWNZ|M_3D|M_NOCOLL,a4
         00012500 00008902  
    2620 00012520     09c5          movi    CLSDEAD,a5
         00012530     2000  
    2621                    
    2622 00012540     0d5f          calla   BEGINOBJ
         00012550 00000000! 
    2623                    
    2624 00012570                   SLEEPK  3
    2625                    
    2626 000125b0     c080          jauc    FRQDELDIE
         000125c0 00000000! 
    2627                    
    2628 000125e0     fff2  oddtx_tbl       .word   -14,-3,10,25,30,31,30,39,26,-3,17,32,53,54,41,32,45
    2629 000126f0     fff2  oddty_tbl       .word   -14,-33,-51,-59,-39,-20,-2,-67,-75,-76,-84,-77,-57,-81
    2630 000127d0     ffaa          .word   -86,-98,-108
    2631                    
    2632                            .def    smoke_t
    2633 00012800           smoke_t
    2634 00012800 00012880'         .long   cldbw_l,cldblg_l,cldbgry_l,cldblg2_l
    2635                    
    2636 00012880           cldbw_l
    2637 00012880                   LW      CLDB2,3
    2638 000128b0                   LWL     CLDB3,NEWPALET|3,ORNGPAL
    2639 00012900                   LW      CLDB4,2
    2640 00012930                   LWL     CLD5,NEWPALET|2,WHTPAL
    2641 00012980                   LW      CLD6,2
    2642 000129b0                   LW      CLD7,2
    2643 000129e0                   LW      CLD8,2
    2644 00012a10                   LW      CLD9,2
    2645 00012a40                   LWL0    CLD10,2
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   52

    2646 00012a90           cldblg_l
    2647 00012a90                   LW      CLDB2,2
    2648 00012ac0                   LWL     CLDB3,NEWPALET|3,ORNGPAL
    2649 00012b10                   LW      CLDB4,2
    2650 00012b40                   LWL     CLD5,NEWPALET|2,LGRYPAL
    2651 00012b90                   LW      CLD6,2
    2652 00012bc0                   LW      CLD7,2
    2653 00012bf0                   LW      CLD8,2
    2654 00012c20                   LW      CLD9,2
    2655 00012c50                   LWL0    CLD10,2
    2656 00012ca0           cldbgry_l
    2657 00012ca0                   LW      CLDB2,3
    2658 00012cd0                   LWL     CLDB3,NEWPALET|2,ORNGPAL
    2659 00012d20                   LW      CLDB4,2
    2660 00012d50                   LWL     CLD5,NEWPALET|2,GREYPAL
    2661 00012da0                   LW      CLD6,2
    2662 00012dd0                   LW      CLD7,2
    2663 00012e00                   LW      CLD8,2
    2664 00012e30                   LW      CLD9,2
    2665 00012e60                   LWL0    CLD10,2
    2666 00012eb0           cldblg2_l
    2667 00012eb0                   LW      CLDB2,2
    2668 00012ee0                   LWL     CLDB3,NEWPALET|2,ORNGPAL
    2669 00012f30                   LWL     CLDB4,NEWPALET|2,LGRYPAL
    2670 00012f80                   LW      CLD5,2
    2671 00012fb0                   LW      CLD6,2
    2672 00012fe0                   LW      CLD7,2
    2673 00013010                   LW      CLD8,2
    2674 00013040                   LW      CLD9,2
    2675 00013070                   LWL0    CLD10,2
    2676                    
    2677                    *******************************
    2678                    * Start sparks in AMODE
    2679                    * A10=*wrestler proc
    2680                    
    2681 000130c0            SUBRP  hand_sparks
    2682                    
    2683 000130c0     09cb          movi    11,a11          ;13
         000130d0     000b  
    2684 000130e0           muxjlp  CREATE0 one_spark
    2685 00013150                   CREATE0 one_spark
    2686 000131c0                   SLEEPK  3
    2687 00013200     3e6b          dsj     a11,muxjlp
    2688 00013210                   DIE
    2689                    
    2690              4000  GRAV            equ     04000h  ;9000h  ;a000h  ;6000h
    2691                    
    2692                    ********************************
    2693                    * Spark from hand buzzer (Process)
    2694                    * A10=*wrestler proc
    2695                    
    2696 00013240            SUBR   one_spark
    2697                    
    2698 00013240     1940          movk    0aH,a0
    2699 00013250     0d5f          calla   RNDRNG0
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   53

         00013260 00000000! 
    2700 00013280     14a0          subk    5,a0
    2701 00013290     25c0          sll     14,a0                   ;XVel
    2702 000132a0     4c06          move    a0,a6
    2703                    
    2704 000132b0     1860          movk    03H,a0
    2705 000132c0     0d5f          calla   RNDRNG0
         000132d0 00000000! 
    2706 000132f0     1020          addk    1,a0
    2707 00013300     2600          sll     16,a0                   ;YVel
    2708 00013310     03a0          neg     a0
    2709 00013320     4c07          move    a0,a7
    2710                    
    2711 00013330     b543          move    *a10(OBJ_ZPOSINT),a3
         00013340     0150  
    2712 00013350     1860          movk    3,a0
    2713 00013360     0d5f          calla   RNDRNG0
         00013370 00000000! 
    2714 00013390     1440          subk    2,a0
    2715 000133a0     4003          add     a0,a3                   ;-2 to 1
    2716 000133b0     1203          addk    16,a3
    2717 000133c0     0ba3          ori     1000h,a3
         000133d0 00001000  
    2718                    
    2719 000133f0     09c1          movi    40h,a1
         00013400     0040  
    2720 00013410     b540          move    *a10(OBJ_XPOSINT),a0
         00013420     0110  
    2721 00013430     b54e          move    *a10(OBJ_CONTROL),a14
         00013440     0780  
    2722 00013450     1f6e          btst    B_FLIPH,a14
    2723 00013460     ca01          jrz     onhmno_flip
    2724 00013470     03a1          neg     a1
    2725 00013480           onhmno_flip
    2726 00013480     4020          add     a1,a0
    2727 00013490     2600          sll     16,a0
    2728                    
    2729 000134a0     09ce          movi    Y_SCALE_MULTIPLIER,a14
         000134b0     3566  
    2730 000134c0     b541          move    *a10(OBJ_ZPOSINT),a1
         000134d0     0150  
    2731 000134e0     5fc1          mpyu    a14,a1
    2732 000134f0     b54e          move    *a10(OBJ_YPOSINT),a14
         00013500     0130  
    2733 00013510     0b0e          addi    52h,a14
         00013520     0052  
    2734 00013530     260e          sll     16,a14
    2735 00013540     45c1          sub     a14,a1
    2736                    
    2737 00013550     09e2          movi    SPARK1,a2
         00013560 00000000! 
    2738 00013580     09e4          movi    DMAWNZ|M_3D|M_NOCOLL,a4
         00013590 00008902  
    2739 000135b0     09c5          movi    CLSDEAD,a5
         000135c0     2000  
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   54

    2740 000135d0     0d5f          calla   BEGINOBJ
         000135e0 00000000! 
    2741                    
    2742 00013600     19e0          movk    0fH,a0
    2743 00013610     0d5f          calla   RNDRNG0
         00013620 00000000! 
    2744 00013640     14e0          subk    7,a0
    2745 00013650     25c0          sll     14,a0
    2746 00013660     b208          move    a0,*a8(OZVEL),L
         00013670     0060  
    2747                    
    2748 00013680     09e9          movi    spark_l,a9
         00013690 000138d0' 
    2749                    
    2750 000136b0     186b          movk    3,a11
    2751 000136c0     c001          jruc    onhmstrt
    2752                    
    2753 000136d0     392a  onhmlp  dsj     a10,onhmnoani
    2754 000136e0           onhmstrt
    2755 000136e0     4d6a          move    a11,a10
    2756 000136f0     8720          move    *a9,a0,L
    2757 00013700     ca12          jrz     onhmdie                 ;noani
    2758 00013710     1009          addk    32,a9
    2759                    
    2760 00013720     b501          move    *a8(OCTRL),a1
         00013730     00f0  
    2761 00013740     0d5f          calla   obj_aniq
         00013750 00000000! 
    2762 00013770           onhmnoani
    2763 00013770                   SLEEPK  3
    2764 000137b0     b702          move    *a8(OYVEL),a2,L
         000137c0     0040  
    2765 000137d0     0b22          addi    GRAV*2,a2
         000137e0 00008000  
    2766 00013800     b248          move    a2,*a8(OYVEL),L
         00013810     0040  
    2767 00013820     c0ea          jruc    onhmlp                  ;Going up?
    2768                    
    2769 00013830           onhmdie
    2770 00013830     5600          clr     a0
    2771 00013840     b208          move    a0,*a8(OXVEL),L
         00013850     0020  
    2772 00013860     b208          move    a0,*a8(OYVEL),L
         00013870     0040  
    2773 00013880     b208          move    a0,*a8(OZVEL),L
         00013890     0060  
    2774                    
    2775 000138a0     c080          jauc    DELOBJDIE
         000138b0 00000000! 
    2776                    
    2777                    
    2778 000138d0           spark_l
    2779 000138d0 00000000!         .long   SPARK2
    2780 000138f0 00000000!         .long   SPARK2
    2781 00013910 00000000!         .long   SPARK2
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   55

    2782 00013930 00000000!         .long   SPARK2
    2783 00013950 00000000!         .long   SPARK2
    2784 00013970 00000000!         .long   SPARK3
    2785 00013990 00000000!         .long   SPARK3
    2786 000139b0 00000000!         .long   SPARK3
    2787 000139d0 00000000          .long   0
    2788                    
    2789                    *******************************
    2790                    * Start sparks in AMODE
    2791                    * A10=*wrestler proc
    2792                    
    2793 000139f0           clobber_sparks
    2794                    
    2795 000139f0     190b          movk    8,a11           ;13
    2796 00013a00           crnblp  CREATE0 clb_spark
    2797 00013a70                   CREATE0 clb_spark
    2798 00013ae0                   SLEEPK  1
    2799 00013b20     3e6b          dsj     a11,crnblp
    2800 00013b30                   DIE
    2801                    
    2802              4000  GRAV            equ     04000h  ;9000h  ;a000h  ;6000h
    2803                    
    2804                    ********************************
    2805                    * Spark from hand buzzer (Process)
    2806                    * A10=*wrestler proc
    2807                    
    2808 00013b60           clb_spark
    2809                    
    2810 00013b60     1bc0          movk    30,a0
    2811 00013b70     0d5f          calla   RNDRNG0
         00013b80 00000000! 
    2812 00013ba0     15e0          subk    15,a0
    2813 00013bb0     25c0          sll     14,a0                   ;XVel
    2814 00013bc0     4c06          move    a0,a6
    2815 00013bd0     b740          move    *a10(OBJ_XVEL),a0,L
         00013be0     02d0  
    2816 00013bf0     2be0          sra     1,a0
    2817 00013c00     4006          add     a0,a6
    2818                    
    2819 00013c10     18a0          movk    05H,a0
    2820 00013c20     0d5f          calla   RNDRNG0
         00013c30 00000000! 
    2821 00013c50     1040          addk    2,a0
    2822 00013c60     2600          sll     16,a0                   ;YVel
    2823 00013c70     03a0          neg     a0
    2824 00013c80     4c07          move    a0,a7
    2825                    
    2826 00013c90     b543          move    *a10(OBJ_ZPOSINT),a3
         00013ca0     0150  
    2827 00013cb0     1860          movk    3,a0
    2828 00013cc0     0d5f          calla   RNDRNG0
         00013cd0 00000000! 
    2829 00013cf0     1440          subk    2,a0
    2830 00013d00     4003          add     a0,a3                   ;-2 to 1
    2831 00013d10     1203          addk    16,a3
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   56

    2832 00013d20     0ba3          ori     1000h,a3
         00013d30 00001000  
    2833                    
    2834 00013d50     09c1          movi    0h,a1
         00013d60     0000  
    2835 00013d70     b540          move    *a10(OBJ_XPOSINT),a0
         00013d80     0110  
    2836 00013d90     b54e          move    *a10(OBJ_CONTROL),a14
         00013da0     0780  
    2837 00013db0     1f6e          btst    B_FLIPH,a14
    2838 00013dc0     ca01          jrz     ucivno_flip
    2839 00013dd0     03a1          neg     a1
    2840 00013de0           ucivno_flip
    2841 00013de0     4020          add     a1,a0
    2842 00013df0     2600          sll     16,a0
    2843                    
    2844 00013e00     09ce          movi    Y_SCALE_MULTIPLIER,a14
         00013e10     3566  
    2845 00013e20     b541          move    *a10(OBJ_ZPOSINT),a1
         00013e30     0150  
    2846 00013e40     5fc1          mpyu    a14,a1
    2847 00013e50     b54e          move    *a10(OBJ_YPOSINT),a14
         00013e60     0130  
    2848 00013e70     0b0e          addi    52h,a14
         00013e80     0052  
    2849 00013e90     260e          sll     16,a14
    2850 00013ea0     45c1          sub     a14,a1
    2851                    
    2852 00013eb0     09e2          movi    SPARK1,a2
         00013ec0 00000000! 
    2853 00013ee0     09e4          movi    DMAWNZ|M_3D|M_NOCOLL,a4
         00013ef0 00008902  
    2854 00013f10     09c5          movi    CLSDEAD,a5
         00013f20     2000  
    2855 00013f30     0d5f          calla   BEGINOBJ
         00013f40 00000000! 
    2856                    
    2857 00013f60     19e0          movk    0fH,a0
    2858 00013f70     0d5f          calla   RNDRNG0
         00013f80 00000000! 
    2859 00013fa0     14e0          subk    7,a0
    2860 00013fb0     25c0          sll     14,a0
    2861 00013fc0     b208          move    a0,*a8(OZVEL),L
         00013fd0     0060  
    2862                    
    2863 00013fe0     09e9          movi    spark_l,a9
         00013ff0 000138d0' 
    2864                    
    2865 00014010     186b          movk    3,a11
    2866 00014020     c001          jruc    ucivstrt
    2867                    
    2868 00014030     392a  ucivlp  dsj     a10,ucivnoani
    2869 00014040           ucivstrt
    2870 00014040     4d6a          move    a11,a10
    2871 00014050     8720          move    *a9,a0,L
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   57

    2872 00014060     ca12          jrz     ucivdie                 ;noani
    2873 00014070     1009          addk    32,a9
    2874                    
    2875 00014080     b501          move    *a8(OCTRL),a1
         00014090     00f0  
    2876 000140a0     0d5f          calla   obj_aniq
         000140b0 00000000! 
    2877 000140d0           ucivnoani
    2878 000140d0                   SLEEPK  3
    2879 00014110     b702          move    *a8(OYVEL),a2,L
         00014120     0040  
    2880 00014130     0b22          addi    GRAV*4,a2
         00014140 00010000  
    2881 00014160     b248          move    a2,*a8(OYVEL),L
         00014170     0040  
    2882 00014180     c0ea          jruc    ucivlp                  ;Going up?
    2883                    
    2884 00014190           ucivdie
    2885 00014190     5600          clr     a0
    2886 000141a0     b208          move    a0,*a8(OXVEL),L
         000141b0     0020  
    2887 000141c0     b208          move    a0,*a8(OYVEL),L
         000141d0     0040  
    2888 000141e0     b208          move    a0,*a8(OZVEL),L
         000141f0     0060  
    2889                    
    2890 00014200     c080          jauc    DELOBJDIE
         00014210 00000000! 
    2891                    
    2892                    *****************************************************************************
    2893                    *
    2894                    * ROLL OVER AND BREAK YER STINKIN' NECK
    2895                    
    2896 00014230            SUBR   dnk_break_neck2_anim
    2897                    
    2898 00014230     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    2899                    
    2900                    ;Maybe put this z float in other neck2_anim seqs.
    2901                    ;FIX!
    2902 00014250                   WL      ANI_CODE,ckzpos
    2903                    
    2904 00014280                   WLW     ANI_SET_XVEL,-20000h,AM_HIT_REL
    2905 000142c0                   WL      ANI_SET_YVEL,60000h
    2906 000142f0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2907 00014300                   WL      15,D3FD3E+FR4
    2908 00014330                   WL      3,D3FD3E+FR5
    2909 00014360                   WL      3,D3FD3E+FR6
    2910 00014390                   WL      3,D3FD3E+FR7
    2911 000143c0                   WL      3,D3FD3E+FR8
    2912 000143f0     800b          .word   ANI_WAITHITGND
    2913 00014400                   WL      4,D3FD3E+FR9
    2914                    
    2915                    ;hit.  stay.
    2916 00014430                   WL      ANI_CODE,SMALL_BOUNCE
    2917                    ;Fix!!!???
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   58

    2918                    ;Based on flip, this offset is fucked up!
    2919 00014460     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2920                    ;       .word   ANI_OFFSET,-20,-3,0
    2921 00014470     8003          .word   ANI_ZEROVELS
    2922                    
    2923 00014480     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND   ;So we can stomp him!
    2924 000144a0                   WL      20,D3RC3A+FR9
    2925 000144d0     8054          .word   ANI_WAITROLL
    2926                    
    2927 000144e0                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    2928                    ;       .word   ANI_END
    2929                    
    2930 00014510            SUBR   dnk_break_neck3_anim
    2931                    
    2932 00014510     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    2933                    
    2934 00014530                   WLW     ANI_SET_XVEL,-20000h,AM_HIT_REL
    2935 00014570                   WL      ANI_SET_YVEL,58000h
    2936 000145a0                   WLW     ANI_SET_ZVEL,18000h,AM_ABS
    2937                    
    2938 000145e0                   WL      ANI_CODE,ckzpos
    2939                    
    2940 00014610                   WL      15,D4POGO+FR4
    2941 00014640     800b          .word   ANI_WAITHITGND
    2942 00014650                   WL      ANI_CODE,HIT_THE_MAT
    2943                    
    2944 00014680     800c          .word   ANI_XFLIP
    2945 00014690     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2946                    
    2947 000146a0                   WL      3,D3FD3E+FR6
    2948 000146d0                   WL      3,D3FD3E+FR7
    2949 00014700                   WL      3,D3FD3E+FR8
    2950 00014730     800b          .word   ANI_WAITHITGND
    2951 00014740                   WL      4,D3FD3E+FR9
    2952                    
    2953                    ;hit.  stay.
    2954 00014770                   WL      ANI_CODE,SMALL_BOUNCE
    2955                    ;Fix!!!???
    2956                    ;Based on flip, this offset is fucked up!
    2957 000147a0     8015          .word   ANI_OFFSET,-20,-3,0
    2958 000147e0     8003          .word   ANI_ZEROVELS
    2959                    
    2960 000147f0     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND   ;So we can stomp him!
    2961 00014810                   WL      10,D3RC3A+FR9
    2962 00014840     8054          .word   ANI_WAITROLL
    2963                    
    2964 00014850                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    2965                    ;       .word   ANI_END
    2966                    
    2967 00014880            SUBR   dnk_break_neck_anim
    2968                    
    2969 00014880     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    2970 000148a0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    2971 000148b0     8003          .word   ANI_ZEROVELS
    2972                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   59

    2973 000148c0                   WWWL    ANI_IFROPE,RC_FRONT,100,brcifall_back
    2974                    
    2975                            ;plenty o' room.  roll over
    2976 00014910                   WL      4,D3FD3E+FR4
    2977 00014940     8015          .word   ANI_OFFSET,-7,0,0
    2978 00014980                   WL      4,D3FD3E+FR5
    2979 000149b0     8015          .word   ANI_OFFSET,-5,0,0
    2980 000149f0                   WL      4,D3FD3E+FR6
    2981 00014a20     8015          .word   ANI_OFFSET,-2,0,0
    2982 00014a60                   WL      4,D3FD3E+FR7
    2983 00014a90     8015          .word   ANI_OFFSET,-3,0,0
    2984 00014ad0                   WL      4,D3FD3E+FR8
    2985 00014b00     8015          .word   ANI_OFFSET,-22,0,0
    2986                    ;       WL      4,D3FD3E+FR9
    2987 00014b40     8015          .word   ANI_OFFSET,-25,0,0
    2988                    
    2989                            ;impact
    2990 00014b80                   WL      ANI_CODE,SMALL_BOUNCE
    2991 00014bb0                   WL      4,D3GS3X+FR8    ;10     ;Face down
    2992                    
    2993 00014be0     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND
    2994 00014c00     8054          .word   ANI_WAITROLL
    2995 00014c10                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    2996                    ;       .word   ANI_END
    2997                    
    2998 00014c40           brcifall_back
    2999                            ;too close to the ropes.  fall back
    3000 00014c40                   WL      7,D3FD3E+FR3
    3001 00014c70     8015          .word   ANI_OFFSET,-12,0,0
    3002 00014cb0                   WL      4,D3FD3E+FR2
    3003 00014ce0     8015          .word   ANI_OFFSET,-25,0,0
    3004 00014d20                   WL      4,D3UC3A+FR9
    3005 00014d50     8015          .word   ANI_OFFSET,-1,0,0
    3006 00014d90                   WL      4,D3UC3A+FR10
    3007 00014dc0                   WL      4,D3UC3A+FR11
    3008 00014df0     8015          .word   ANI_OFFSET,-3,0,0
    3009                    
    3010 00014e30     800c          .word   ANI_XFLIP
    3011 00014e40                   WL      4,D3SA3A+FR9
    3012 00014e70     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND
    3013 00014e90     8054          .word   ANI_WAITROLL
    3014 00014ea0                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    3015                    ;       .word   ANI_END
    3016                    
    3017                    
    3018                    ******************************************************************************
    3019                    
    3020 00014ed0            SUBR   dnk_2_hair_pickup_anim
    3021                    
    3022 00014ed0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
    3023 00014ef0     8003          .word   ANI_ZEROVELS
    3024 00014f00     8026          .word   ANI_SETSPEED,100h
    3025                    
    3026 00014f20     8075          .word   ANI_STARTATTACK,AT_PUPPET,8
    3027                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   60

    3028 00014f50                   WL      2,D1TT5Z+FR2    ;2.5
    3029 00014f80                   WL      2,D1TT5Z+FR3    ;3.5
    3030                    
    3031 00014fb0            SUBR   dnk_4_hair_pickup_anim
    3032                    
    3033 00014fb0     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP  ;uninterruptable
    3034 00014fd0     8003          .word   ANI_ZEROVELS
    3035 00014fe0     8026          .word   ANI_SETSPEED,100h
    3036 00015000     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    3037                    
    3038 00015020     8074          .WORD   ANI_ADD_MOVE,MOVE_C_4,2,2
    3039 00015060     8075          .word   ANI_STARTATTACK,AT_PUPPET,8
    3040 00015090                   WL      3,D3PP3A+FR1
    3041                    
    3042 000150c0                   LEAPATOPP 8,999,80,80,40000h,TGT_HEAD,46,6,-2
    3043 00015170                   WL      4,D3PP3A+FR2
    3044 000151a0                   WL      4,D3PP3A+FR3
    3045 000151d0     8028          .word   ANI_ZERO_XZVELS
    3046                    
    3047                    ;FIX!! on other guys!
    3048                    ;PUPPET2 MODE!
    3049                    ;If no getup time for other guy, do a miss!
    3050 000151e0     8006          .word   ANI_ATTACK_ON, AMODE_PUPPET2,21,1,43,23 ;mode,x,y,w,h
    3051 00015240                   WL      4,D3PP3A+FR3
    3052 00015270     8007          .word   ANI_ATTACK_OFF
    3053                    
    3054 00015280                   WL      ANI_IFNOTSTATUS2,oghimissed
    3055                    
    3056                    ;got him
    3057 000152b0     8061          .word   ANI_CLR_BUTCOUNT
    3058 000152c0                   WL      ANI_CODE,clear_opp_counts
    3059 000152f0     8012          .word   ANI_ATTACHZ,0,0,-4              ;x & y don't matter.
    3060 00015330                   WL      ANI_CODE,DO_NONO
    3061 00015360     8050          .word   ANI_SETOPPMODE,MODE_GHOST
    3062 00015380     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED
    3063                    
    3064 000153a0     801a          .word   ANI_SOUND,98h                   ;neck break (5-7 ticks late)
    3065 000153c0                   WL      ANI_CODE,CALL_SETUP
    3066                    
    3067 000153f0                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3A+FR5,oghipuppet_tbl,0
    3068 00015460                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3A+FR6,oghipuppet_tbl,1
    3069 000154d0                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3A+FR7,oghipuppet_tbl,2
    3070 00015540                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3A+FR8,oghipuppet_tbl,3
    3071 000155b0                   WWLLW   ANI_SUPERSLAVE2,3,D3PP3A+FR9,oghipuppet_tbl,4
    3072 00015620                   WWLLW   ANI_SUPERSLAVE2,3,D4GH3A+FR8,oghipuppet_tbl,5
    3073                    
    3074 00015690     8004          .word   ANI_SETPLYRMODE,MODE_HEADHOLD
    3075 000156b0                   WL      ANI_SLAVEANIM,oghiheadheld_tbl
    3076                    
    3077 000156e0     8033          .word   ANI_SETWORD,USR_VAR2,0
    3078                    
    3079 00015710                   WL      1,D4GH3A+FR8
    3080 00015740     8051          .word   ANI_CLROPPMODE,MODE_GHOST
    3081                    
    3082 00015760     8002          .word   ANI_SETMODE,MODE_NORMAL
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   61

    3083 00015780     8049          .word   ANI_END
    3084                    
    3085 00015790           oghimissed
    3086 00015790                   WL      ANI_CODE,CALL_MISSES
    3087 000157c0                   WL      20,D3PP3A+FR3
    3088 000157f0                   WL      4,D3PP3A+FR2
    3089 00015820                   WL      4,D3PP3A+FR1
    3090                    
    3091 00015850     8022          .word   ANI_FACEDOWN
    3092 00015860     8002          .word   ANI_SETMODE,MODE_NORMAL
    3093 00015880     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    3094 000158a0     8049          .word   ANI_END
    3095                    
    3096                    
    3097 000158b0            SUBR   ck_getup
    3098                    
    3099 000158b0     b5a1          move    *a13(ANIMODE),a1
         000158c0     0660  
    3100 000158d0     0b81          andni   MODE_STATUS2,a1
         000158e0 00000200  
    3101 00015900     b02d          move    a1,*a13(ANIMODE)
         00015910     0660  
    3102                    
    3103 00015920     b7a0          move    *a13(WHOIHIT),a0,L
         00015930     0500  
    3104                    
    3105 00015940     b400          move    *a0(GETUP_TIME),a0
         00015950     0460  
    3106 00015960     ca07          jrz     oghimisshim
    3107                    
    3108 00015970     b5a1          move    *a13(ANIMODE),a1
         00015980     0660  
    3109 00015990     0ba1          ori     MODE_STATUS2,a1
         000159a0 00000200  
    3110 000159c0     b02d          move    a1,*a13(ANIMODE)
         000159d0     0660  
    3111                    
    3112 000159e0           oghimisshim
    3113 000159e0     0960          rets
    3114                    
    3115 000159f0           oghiheadheld_tbl
    3116 000159f0 00000000!         .long   hrt_3_head_held_anim
    3117 00015a10 00000000!         .long   rzr_3_head_held_anim
    3118 00015a30 00000000!         .long   und_3_head_held_anim
    3119 00015a50 00000000!         .long   yok_3_head_held_anim
    3120 00015a70 00000000!         .long   shn_3_head_held_anim
    3121 00015a90 00000000!         .long   bam_3_head_held_anim
    3122 00015ab0 0000bf50'         .long   dnk_3_head_held_anim
    3123 00015ad0 00000000          .long   0
    3124 00015af0 00000000!         .long   lex_3_head_held_anim
    3125                    
    3126 00015b10           oghipuppet_tbl
    3127 00015b10 00015c30'  .long oghiBret
    3128 00015b30 00015e30'  .long oghiRazor
    3129 00015b50 00016030'  .long oghiTaker
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   62

    3130 00015b70 00016230'  .long oghiYokozuna
    3131 00015b90 00016430'  .long oghiShawn
    3132 00015bb0 00016630'  .long oghiBamBam
    3133 00015bd0 00016830'  .long oghiDoink
    3134 00015bf0 00016a30'  .long oghiAdam
    3135 00015c10 00016a50'  .long oghiLex
    3136                    
    3137 00015c30           oghiBret
    3138 00015c30            LWWW H3GU4A+FR1,37,-31,0
    3139 00015c80            LWWW H3GU4A+FR2,49,-33,0
    3140 00015cd0            LWWW H3GU4A+FR3,63,-42,0
    3141 00015d20            LWWW H3DU3A+FR3,58,-39,1
    3142 00015d70            LWWW H3DU3A+FR4,60,-29,1
    3143 00015dc0            LWWW H3BF3A+FR1,53,-35,0
    3144 00015e10 00000000   .long 0
    3145 00015e30           oghiRazor
    3146 00015e30            LWWW R3GU2A+FR3,41,-22,0
    3147 00015e80            LWWW R3GU4A+FR3,52,-27,0
    3148 00015ed0            LWWW R3GU4A+FR4,54,-36,0
    3149 00015f20            LWWW R3GU4A+FR5,59,-42,0
    3150 00015f70            LWWW R3DU3B+FR2,53,-43,1
    3151 00015fc0            LWWW R3BF3A+FR1,53,-37,0
    3152 00016010 00000000   .long 0
    3153 00016030           oghiTaker
    3154 00016030            LWWW U3DU3B+FR2,42,-23,1
    3155 00016080            LWWW U3DU3B+FR5,53,-23,1
    3156 000160d0            LWWW U3DU3B+FR6,59,-29,1
    3157 00016120            LWWW U3DU3B+FR8,49,-26,1
    3158 00016170            LWWW U3DU3B+FR10,59,-21,1
    3159 000161c0            LWWW U4BF3Z+FR5,54,-16,0
    3160 00016210 00000000   .long 0
    3161 00016230           oghiYokozuna
    3162 00016230            LWWW Y3GU2A+FR1,47,-17,0
    3163 00016280            LWWW Y3GU2A+FR2,57,-18,0
    3164 000162d0            LWWW Y3GU2A+FR4,44,-25,0
    3165 00016320            LWWW Y3GU2A+FR7,44,-37,0
    3166 00016370            LWWW Y3GU2A+FR11,60,-30,0
    3167 000163c0            LWWW Y3BF3A+FR1,57,-25,0
    3168 00016410 00000000   .long 0
    3169 00016430           oghiShawn
    3170 00016430            LWWW S3GU2A+FR1,44,-25,0
    3171 00016480            LWWW S3GU4A+FR2,51,-25,0
    3172 000164d0            LWWW S3GU4A+FR4,58,-36,0
    3173 00016520            LWWW S3GU4A+FR5,58,-35,0
    3174 00016570            LWWW S3GU4A+FR6,59,-30,0
    3175 000165c0            LWWW S3BF3A+FR1,41,-36,0
    3176 00016610 00000000   .long 0
    3177 00016630           oghiBamBam
    3178 00016630            LWWW B3GU4A+FR3,49,-21,0
    3179 00016680            LWWW B3GU4A+FR4,57,-28,0
    3180 000166d0            LWWW B3GU4A+FR5,64,-33,0
    3181 00016720            LWWW B3GU4A+FR8,60,-25,0
    3182 00016770            LWWW B3GU4A+FR9,60,-23,0
    3183 000167c0            LWWW B3BF3C+FR5,59,-29,0
    3184 00016810 00000000   .long 0
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   63

    3185 00016830           oghiDoink
    3186 00016830            LWWW D3GU4A+FR2,50,-28,0
    3187 00016880            LWWW D3GU4A+FR3,56,-31,0
    3188 000168d0            LWWW D3GU4A+FR4,57,-43,0
    3189 00016920            LWWW D3GU4A+FR5,52,-34,0
    3190 00016970            LWWW D3GU4A+FR7,68,-36,0
    3191 000169c0            LWWW D3BF3A+FR2,55,-35,0
    3192 00016a10 00000000   .long 0
    3193 00016a30           oghiAdam
    3194 00016a30 00000000   .long 0
    3195 00016a50           oghiLex
    3196 00016a50            LWWW L3GU4A+FR1,50,-26,0
    3197 00016aa0            LWWW L3DU3A+FR4,42,-23,1
    3198 00016af0            LWWW L3DU3A+FR6,49,-31,1
    3199 00016b40            LWWW L3DU3A+FR7,55,-29,1
    3200 00016b90            LWWW L3DU3A+FR9,64,-29,1
    3201 00016be0            LWWW L3BF3B+FR5,57,-32,0
    3202 00016c30 00000000   .long 0
    3203                    
    3204                    *****************************************************************************
    3205                    *
    3206                    * THROWN FROM RING (shn_bslm, shn_frnk)
    3207                    
    3208 00016c50            SUBR   dnk_flyout_anim
    3209                    
    3210 00016c50     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
    3211 00016c70     8004          .word   ANI_SETPLYRMODE,MODE_INAIR
    3212 00016c90     8026          .word   ANI_SETSPEED,100h
    3213 00016cb0     807b          .word   ANI_SET_IDIOT
    3214 00016cc0                   WWL     ANI_SETLONG,OBJ_GRAVITY,0f000h
    3215 00016d00                   WL      ANI_CODE,DO_WAIL
    3216                    
    3217 00016d30                   WL      8,D3OS3A+FR4
    3218 00016d60                   WL      8,D3OS3A+FR5
    3219 00016d90           mjbicont        WL      8,D3OS3A+FR6
    3220 00016dc0     8015          .word   ANI_OFFSET,0,45,0
    3221 00016e00                   WL      1,D3FD3E+FR2
    3222 00016e30     800b          .word   ANI_WAITHITGND
    3223 00016e40                   WWL     ANI_SETLONG,OBJ_GRAVITY,GRAVITY
    3224 00016e80                   WL      ANI_CODE,HIT_THE_MAT
    3225 00016eb0     8037          .word   ANI_SHAKEALL,2
    3226 00016ed0     801f          .word   ANI_SHAKER,60
    3227                    
    3228 00016ef0     8038          .word   ANI_DAMAGE,D_HIPTOSS
    3229                    
    3230                    ;       .word   ANI_SETWORD,DELAY_METER,0
    3231                    ;       .word   ANI_GETUP,500
    3232                    
    3233 00016f10                   WL      ANI_CHANGEANIM,dnk_hitonground_xflip_anim
    3234                    
    3235                    
    3236 00016f40            SUBR   dnk_flyout2_anim
    3237                    
    3238 00016f40     8002          .word   ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
    3239 00016f60     8004          .word   ANI_SETPLYRMODE,MODE_INAIR
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   64

    3240 00016f80     8026          .word   ANI_SETSPEED,100h
    3241 00016fa0     807b          .word   ANI_SET_IDIOT
    3242 00016fb0                   WWL     ANI_SETLONG,OBJ_GRAVITY,0E000h
    3243 00016ff0                   WL      ANI_CODE,DO_WAIL
    3244 00017020                   WL      ANI_GOTO,mjbicont
    3245                    
    3246                    ******************************************************************************
    3247                    
    3248 00017050            SUBR   dnk_4_taunt_anim
    3249                    
    3250 00017050     8002          .word   ANI_SETMODE,MODE_UNINT
    3251 00017070     8003          .word   ANI_ZEROVELS
    3252 00017080     8026          .word   ANI_SETSPEED,100h
    3253 000170a0     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    3254                    
    3255 000170c0     801b          .word   ANI_SETFACING           ;ANI_XFLIP <- not primary anim
    3256 000170d0     805f          .word   ANI_SET_WRESTLER_XFLIP
    3257                    
    3258 000170e0                   WL      4,D4CO4A+FR1
    3259 00017110                   WL      4,D4CO4A+FR2
    3260 00017140                   WL      4,D4CO4A+FR3
    3261 00017170                   WL      4,D4CO4A+FR4
    3262 000171a0                   WL      4,D4CO4A+FR5
    3263 000171d0                   WL      4,D4CO4A+FR6
    3264                    
    3265 00017200                   WL      4,D4CO4A+FR5
    3266 00017230                   WL      4,D4CO4A+FR4
    3267 00017260                   WL      4,D4CO4A+FR3
    3268 00017290                   WL      4,D4CO4A+FR4
    3269 000172c0                   WL      4,D4CO4A+FR5
    3270 000172f0                   WL      4,D4CO4A+FR6
    3271                    
    3272 00017320                   WL      3,D4CO4A+FR5
    3273 00017350                   WL      3,D4CO4A+FR4
    3274 00017380                   WL      3,D4CO4A+FR3
    3275 000173b0                   WL      3,D4CO4A+FR2
    3276 000173e0                   WL      3,D4CO4A+FR1
    3277                    
    3278                    ;       WL      ANI_CODE,set_taunt_bit
    3279                    
    3280 00017410     8022          .word   ANI_FACEDOWN
    3281 00017420     8002          .word   ANI_SETMODE,MODE_NORMAL
    3282 00017440     8004          .word   ANI_SETPLYRMODE,MODE_NORMAL
    3283 00017460                   WL      ANI_CHANGEANIM,dnk_stand4_anim
    3284                    ;       .word   ANI_END
    3285                    
    3286                    
    3287                    ; SUBR  set_taunt_bit
    3288                    ;;Successful taunt achieved!
    3289                    ;
    3290                    ;       move    *a13(STATUS_FLAGS),a14
    3291                    ;       ori     M_DID_TAUNT,a14
    3292                    ;       move    a14,*a13(STATUS_FLAGS)
    3293                    ;       rets
    3294                    
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   65

    3295                    *****************************************************************************
    3296                    *
    3297                    * END OF BACK BROKEN SEQ.
    3298                    
    3299 00017490            SUBR   dnk_backbroken_anim
    3300                    
    3301 00017490     8002          .word   ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP
    3302 000174b0     8003          .word   ANI_ZEROVELS
    3303 000174c0     8026          .word   ANI_SETSPEED,100h
    3304                    ;       .word   ANI_DETACH
    3305                    
    3306 000174e0     8010          .word   ANI_GRAVITY_OFF
    3307 000174f0                   WL      5,D3BK3Z+FR7
    3308 00017520     800f          .word   ANI_GRAVITY_ON
    3309                    
    3310 00017530                   WL      ANI_SET_YVEL,070000h
    3311 00017560                   WLW     ANI_SET_ZVEL,20000h,AM_ABS
    3312                    
    3313 000175a0                   WL      25,D3BK3Z+FR7
    3314                    
    3315 000175d0                   WL      4,D3BK3Z+FR6
    3316                    ;       WL      4,D3UC3A+FR5
    3317                    
    3318 00017600     800b          .word   ANI_WAITHITGND
    3319 00017610     8003          .word   ANI_ZEROVELS
    3320 00017620     800d          .word   ANI_BOUNCE,2
    3321 00017640     800c          .word   ANI_XFLIP
    3322 00017650                   WL      ANI_CODE,HIT_THE_MAT
    3323 00017680                   WL      ANI_CODE,HIT_THE_MAT
    3324 000176b0                   WL      ANI_CODE,HIT_THE_MAT
    3325                    
    3326 000176e0     805e          .word   ANI_DEBRIS,100,1,0,8,0          ;%chance, tbl index, x,y,z off
    3327                    
    3328 00017740                   WL      2,D3SA3A+FR2
    3329 00017770                   WL      3,D3SA3A+FR3
    3330 000177a0                   WL      6,D3SA3A+FR4
    3331 000177d0                   WL      3,D3SA3A+FR5
    3332                    
    3333 00017800                   WL      3,D3SA3A+FR7
    3334 00017830                   WL      2,D3SA3A+FR8
    3335 00017860                   WL      3,D3SA3A+FR9
    3336                    
    3337 00017890     8004          .word   ANI_SETPLYRMODE,MODE_ONGROUND
    3338                    
    3339                    ;No stars around head here...
    3340                    
    3341 000178b0     800a          .word   ANI_DETACH
    3342                    
    3343 000178c0                   WL      5,D3SA3A+FR9
    3344                    
    3345 000178f0     8054          .word   ANI_WAITROLL
    3346 00017900                   WL      ANI_CHANGEANIM,dnk_faceup_getup_anim
    3347                    ;       .word   ANI_END
    3348                    
    3349                    ;*****************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   66

    3350                    ;*
    3351                    ;* CHAIR STUFF
    3352                    ;
    3353                    ; SUBR  dnk_pkup_chair_anim
    3354                    ;
    3355                    ;       .word   ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP
    3356                    ;       .word   ANI_ZEROVELS
    3357                    ;       .word   ANI_SETSPEED,100h
    3358                    ;
    3359                    ;wmoolp
    3360                    ;       WL      4,D4WA4A+FR1
    3361                    ;       WL      4,D4WA4A+FR2
    3362                    ;       WL      4,D4WA4A+FR3
    3363                    ;
    3364                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR1,42,-10,1 ;image, x,y,zoff
    3365                    ;       WL      4,D4WA4A+FR4
    3366                    ;
    3367                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR1,42,0,1 ;image, x,y,zoff
    3368                    ;       WL      4,D4WA4A+FR5
    3369                    ;
    3370                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR2,48,37,1 ;image, x,y,zoff
    3371                    ;       WL      4,D4WA4A+FR6
    3372                    ;
    3373                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR3,48,90,1 ;image, x,y,zoff
    3374                    ;       WL      4,D4WA4A+FR7
    3375                    ;
    3376                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR4,19,124,1 ;image, x,y,zoff
    3377                    ;       WL      4,D4WA4A+FR8
    3378                    ;
    3379                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR4,-5,141,1 ;image, x,y,zoff
    3380                    ;       WL      4,D4WA4A+FR10
    3381                    ;
    3382                    ;; .word ANI_SINGLESTEP
    3383                    ;
    3384                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR6,-31,131,1 ;image, x,y,zoff
    3385                    ;       WL      4,D3CS3Z+FR2
    3386                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR6,-38,123,1 ;image, x,y,zoff
    3387                    ;       WL      4,D3CS3Z+FR3
    3388                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR7,9,130,1 ;image, x,y,zoff
    3389                    ;       WL      4,D3CS3Z+FR4
    3390                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR8,67,100,1 ;image, x,y,zoff
    3391                    ;       WL      4,D3CS3Z+FR5
    3392                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR9,77,46,1 ;image, x,y,zoff
    3393                    ;       WL      4,D3CS3Z+FR6
    3394                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR9,83,66,1 ;image, x,y,zoff
    3395                    ;       WL      4,D3CS3Z+FR7
    3396                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR7,3,140,1 ;image, x,y,zoff
    3397                    ;       WL      4,D3CS3Z+FR8
    3398                    ;       WLWWW   ANI_ATTCHIMAGE2,CHAIR_SWING+FR6,-25,129,1 ;image, x,y,zoff
    3399                    ;       WL      4,D3CS3Z+FR9
    3400                    ;
    3401                    ;; .word ANI_SINGLESTEP
    3402                    ;       WLW     ANI_ATTCHIMAGE,0,0
    3403                    ;
    3404                    ;       WL      ANI_GOTO,wmoolp
TMS340 COFF Macro Assembler Version 6.10     Wed Oct 25 09:57:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

Krusty the Clown animation sequences                                 PAGE   67

    3405                    ;
    3406                    ; SUBR  CHAIR_SWING
    3407                    ;       .long   0               ;0
    3408                    ;       .long   CHSWNG01        ;1
    3409                    ;       .long   CHSWNG02        ;2
    3410                    ;       .long   CHSWNG03        ;3
    3411                    ;       .long   CHSWNG04        ;4
    3412                    ;       .long   CHSWNG05        ;5
    3413                    ;       .long   CHSWNG06        ;6
    3414                    ;       .long   CHSWNG07        ;7
    3415                    ;       .long   CHSWNG08        ;8
    3416                    ;       .long   CHSWNG09        ;9
    3417                    ;       .long   CHSWNFL         ;10
    3418                    ;
    3419                    
    3420                    ******************************************************************************
    3421                    
    3422                            .end

 No Errors,  No Warnings
