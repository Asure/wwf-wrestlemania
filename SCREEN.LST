TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                    **************************************************************
       2                    *
       3                    * Software:             Jake Simpson
       4                    * Initiated:            10/11/94
       5                    *
       6                    * Modified:
       7                    *
       8                    * COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
       9                    *
      10                    **************************************************************
      11                    
      12                            .file   "screen.asm"
      14                            .width  132
      15                            .option b,d,l,t
      16                            .mnolist
      17                    
      18                    
      19                            .include        "macros.h"
      20                            .include        "mproc.equ"             ;Mproc equates
      21                            .include        "display.equ"           ;Display proc equates
      22                            .include        "gsp.equ"               ;Gsp asm equates
      23                            .include        "sys.equ"
      24                            .include        "wwfsec.equ"
      25                            .include        "game.equ"
      26                            .INCLUDE        "SCREEN.TBL"
      27                            .include        "imgtbl.glo"
      28                    
      29                    
      30                            .ref    triple_sound
      31                            .ref    FADERAM, RNDRNG0
      32                            .ref    ZERO_BITS
      33                            .ref    HALT
      34                            .ref    dpageflip
      35                            .REF    dpageflip_off
      36                            .ref    clear_objs
      37                            .ref    IRQSKYE
      38                            .ref    BGND_UD1
      39                            .ref    BAKMODS
      40                            .ref    pal_getf
      41                            .ref    SYSCOPY
      42                            .REF    pal_clean
      43                            .REF    WHAT_SPEED
      44                            .REF    GAMSTATE
      45                            .REF    get_all_buttons_cur2
      46                    
      47                    ;       .GLOBAL CLOSE_SCREEN_BOX, OPEN_SCREEN_BOX 
      48                    ;       .GLOBAL CLOSE_SCREEN_BOX_CENTER, OPEN_SCREEN_BOX_CENTER 
      49                            .GLOBAL CLOSE_SCREEN_LINE, OPEN_SCREEN_LINE
      50                            .GLOBAL BLOW_0_TO_1,RESET_FROM_PIXEL_WIPE
      51                            .GLOBAL SET_UP_PIXEL_WIPE
      52                            .DEF    DUMRETS
      53                            .def    special_screen
      54                            .DEF    RESETUP_LINES
      55                            .DEF    dma_it_out
      56                            .def    LINES
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    2

      57                    
      58                            .DEF    CLOSE_VERT_SCREEN_LINE
      59                            .DEF    OPEN_VERT_SCREEN_LINE
      60                            .DEF    LINES_VERT
      61                    
      62                            .def    HORZTRN1,HORZTRN2
      63                    
      64 00000000                   BSSX    WHICH_SCREEN,32
      65 00000000                   BSSX    TOP_LEFT,32
      66 00000000                   BSSX    BOT_RIGHT,32
      67 00000060                   .BSS    LINE_1,64*8
      68 00000260                   .bss    LINE_START,32
      69 00000280                   .BSS    WHICH_WAY,16
      70 00000290                   .bss    special_screen,16
      71 000002a0                   .bss    which_pal,16
      72                    
      73                    ;array size = 2560*32
      74                    ;ARRAYS .equ    FADERAM
      75 000002b0                   .bss    ARRAYS,256*16*80
      76                    
      77 00000000                   .text
      78                    
      79 00000000           GROW_SCREEN
      80 00000000                   RETP
      81                    
      82                    ;**************************************************************************
      83                    ;*                                                                                            *
      84                    ;* DO NOT call WIPEOUT or any of that stuff before calling this routine ! *
      85                    ;* In order to use the pixel wipes, you must call this routine before doing *
      86                    ;* anything else. It will do ALL screen setting up for you. Don't mess around *
      87                    ;* with that BLANK or UNBLANK thing. Call this routine with A0 set to the *
      88                    ;* background module you want to display. Once this routine is done, create *
      89                    ;* the objects you want to display etc and then do a sleep of 1. Then    *
      90                    ;* JSRP BLOW_0_TO_1 or BLOW_0_TO_1 and then when returned, call                  *
      91                    ;* RESET_FROM_PIXEL_WIPE and resume normal processing.                           *
      92                    ;*                                                                                            *
      93                    ;**************************************************************************
      94 00000030           SET_UP_PIXEL_WIPE
      95 00000030                   PUSH    A0
      96 00000040     5600          clr     a0
      97 00000050     0580          move    a0,@HALT
         00000060 00000000! 
      98 00000080     0580          move    a0,@dtype               ;2d mode
         00000090 00000000! 
      99 000000b0     0580          move    a0,@IRQSKYE
         000000c0 00000000! 
     100 000000e0     0780          move    a0,@WORLDTLX,L
         000000f0 00000000! 
     101 00000110     0780          move    a0,@WORLDTLY,L
         00000120 00000000! 
     102                    
     103 00000140     1020          inc     a0
     104 00000150     0580          move    a0,@special_screen
         00000160 00000290- 
     105                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    3

     106 00000180     09e0          movi    SCRNEND,a0              ;[256,405]
         00000190 00fe01b0  
     107 000001b0     0780          move    a0,@SCRNLR,L
         000001c0 00000000! 
     108                    
     109 000001e0     5600          clr     a0
     110                    
     111 000001f0     0d5f          CALLA   dpageflip_off
         00000200 00000000! 
     112 00000220     0d5f          calla   clear_objs
         00000230 00000000! 
     113 00000250     0d5f          calla   ZERO_BITS
         00000260 00000000! 
     114                    
     115 00000280     09e0          movi    SCRNEND,a0              ;[256,405]
         00000290 00fe01b0  
     116 000002b0     0780          move    a0,@SCRNLR,L
         000002c0 00000000! 
     117                    
     118 000002e0     5600          clr     a0
     119 000002f0     0780          move    a0,@WORLDTLX,L
         00000300 00000000! 
     120 00000320     0780          move    a0,@WORLDTLY,L
         00000330 00000000! 
     121                    
     122 00000350                   PULL    A0
     123 00000360     0780          move    a0,@BAKMODS,L
         00000370 00000000! 
     124 00000390     c080          JAUC    BGND_UD1                ;create objects for background
         000003a0 00000000! 
     125                    
     126 000003c0           RESET_FROM_PIXEL_WIPE
     127 000003c0     5600          clr     a0
     128 000003d0     0580          move    a0,@special_screen
         000003e0 00000290- 
     129 00000400     1820          movk    1,a0                    ;page flipping on
     130 00000410     0580          move    a0,@dpageflip
         00000420 00000000! 
     131 00000440     0960          RETS
     132                    
     133              2000  ARRAY_SIZE      .EQU    256*32
     134                    
     135              0000  ARRAYA  .EQU    ARRAY_SIZE*0
     136                    
     137              a000  ARRAYB  .EQU    ARRAY_SIZE*5
     138                    
     139 00000450           BLOW_0_TO_1
     140 00000450     0d3f          CALLR   INIT_TABLES
         00000460     00bb  
     141 00000470                   SLEEP   1
     142 000004c0     09e3          MOVI    ARRAYA+ARRAYS,A3
         000004d0 000002b0- 
     143 000004f0     0d3f          CALLR   RANDOMIZE_TABLES
         00000500     00a1  
     144 00000510                   SLEEP   1
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    4

     145 00000560     09e3          MOVI    ARRAYB+ARRAYS,A3
         00000570 0000a2b0- 
     146 00000590     0d3f          CALLR   RANDOMIZE_TABLES
         000005a0     0097  
     147 000005b0                   SLEEP   1
     148                    
     149 00000600     5600          CLR     A0
     150 00000610     0580          MOVE    A0,@DISPLAYON
         00000620 00000000! 
     151 00000640                   SLEEP   1
     152                    
     153 00000690     09c9          MOVI    1C0H,A9
         000006a0     01c0  
     154                    
     155 000006b0     194a          MOVK    10,A10
     156 000006c0           DO_NEXT_BLOCK
     157 000006c0     09e8          MOVI    ARRAYA+ARRAYS,A8
         000006d0 000002b0- 
     158 000006f0                   SLEEP   3
     159 00000740                   CREATE0 DISPLAY_ARRAY
     160 000007b0     0b09          ADDI    0A0H,A9
         000007c0     00a0  
     161 000007d0     09e8          MOVI    ARRAYB+ARRAYS,A8
         000007e0 0000a2b0- 
     162 00000800                   SLEEP   3
     163 00000850                   CREATE0 DISPLAY_ARRAY
     164 000008c0     0b09          ADDI    0A0H,A9
         000008d0     00a0  
     165 000008e0     142a          DEC     A10
     166 000008f0     cbdc          JRNZ    DO_NEXT_BLOCK
     167                    
     168 00000900                   SLEEP   25
     169                    
     170 00000950     1820          MOVK    1,A0
     171 00000960     0580          MOVE    A0,@DISPLAYON
         00000970 00000000! 
     172 00000990                   RETP
     173                    
     174 000009c0           DISPLAY_ARRAY
     175 000009c0     09ea          MOVI    100000H,A10
         000009d0 00100000  
     176                    
     177 000009f0     0d3f          callr   PAL_RAM_OFF
         00000a00     0047  
     178                    
     179 00000a10     09c0          movi    5,a0
         00000a20     0005  
     180 00000a30           next_copy
     181 00000a30                   pushp   a0
     182 00000a40     0d3f          CALLR   COPY_ARRAY
         00000a50     000c  
     183                    ;       SUBI    256*32,A8
     184                    ;       CALLR   PAL_RAM_ON
     185                    ;       CALLR   COPY_ARRAY
     186 00000a60     0d3f          callr   PAL_RAM_OFF
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    5

         00000a70     0040  
     187 00000a80                   sleep   1
     188 00000ad0                   pullp   a0
     189 00000ae0     3d80          dsjs    a0,next_copy
     190 00000af0                   DIE
     191                    
     192 00000b20           COPY_ARRAY
     193 00000b20     01e0          pushst
     194 00000b30     0360          dint
     195 00000b40     09e7          movi    DMACMAP,a7
         00000b50 01a00080  
     196 00000b70     09c2          MOVI    256,A2
         00000b80     0100  
     197 00000b90     09eb          movi    SYSCINIT,a11
         00000ba0 0000987f  
     198 00000bc0     4d65          move    a11,a5
     199 00000bd0     0b85          ANDi    0FFFFH-PALENB,a5
         00000be0 ffff0800  
     200                            .ALIGN
     201 00000c00           COPY_NEXT
     202 00000c00     9703          MOVE    *A8+,A3,L
     203 00000c10     4123          ADD     A9,A3
     204 00000c20     4c60          MOVE    A3,A0
     205 00000c30     4140          ADD     A10,A0
     206 00000c40     0585          move    a5,@SYSCTRL
         00000c50 01b00000  
     207 00000c70     8807          MOVE    *A0,*A7
     208 00000c80     058b          move    a11,@SYSCTRL
         00000c90 01b00000  
     209 00000cb0     8803          MOVE    *A0,*A3
     210 00000cc0     0585          move    a5,@SYSCTRL
         00000cd0 01b00000  
     211 00000cf0     b807          move    *a0(1000h),*a7(0)
         00000d00     1000  
         00000d10     0000  
     212 00000d20     058b          move    a11,@SYSCTRL
         00000d30 01b00000  
     213 00000d50     b803          MOVE    *A0(1000H),*A3(1000H)
         00000d60     1000  
         00000d70     1000  
     214 00000d80     3f22          DSJS    A2,COPY_NEXT
     215 00000d90     01c0          popst
     216 00000da0     0960          RETS
     217                    
     218 00000db0           PAL_RAM_ON
     219 00000db0     09eb          movi    SYSCINIT,a11
         00000dc0 0000987f  
     220 00000de0     0b8b          ANDi    0FFFFH-PALENB,a11
         00000df0 ffff0800  
     221 00000e10     058b          move    a11,@SYSCOPY
         00000e20 00000000! 
     222 00000e40     058b          move    a11,@SYSCTRL
         00000e50 01b00000  
     223 00000e70     0960          rets
     224                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    6

     225 00000e80           PAL_RAM_OFF
     226 00000e80     09eb          movi    SYSCINIT,a11
         00000e90 0000987f  
     227 00000eb0     058b          move    a11,@SYSCTRL
         00000ec0 01b00000  
     228 00000ee0     058b          move    a11,@SYSCOPY
         00000ef0 00000000! 
     229 00000f10     0960          RETS
     230                    
     231 00000f20           RANDOMIZE_TABLES
     232 00000f20     09c2          MOVI    1279,A2
         00000f30     04ff  
     233 00000f40           RAND_NEXT_POINT
     234 00000f40     4c40          MOVE    A2,A0
     235 00000f50     0d5f          CALLA   RNDRNG0
         00000f60 00000000! 
     236 00000f80     24a0          SLL     5,A0
     237 00000f90     4060          ADD     A3,A0
     238 00000fa0     4c44          MOVE    A2,A4
     239 00000fb0     24a4          SLL     5,A4
     240 00000fc0     4064          ADD     A3,A4
     241 00000fd0     860e          MOVE    *A0,A14,L
     242 00000fe0     8a80          MOVE    *A4,*A0,L
     243 00000ff0     83c4          MOVE    A14,*A4,L
     244 00001000     3da2          DSJS    A2,RAND_NEXT_POINT
     245 00001010     0960          RETS
     246                    
     247 00001020           INIT_TABLES
     248 00001020     09c4          MOVI    010H,A4
         00001030     0010  
     249 00001040     09c5          MOVI    2000H-(10*10H),A5
         00001050     1f60  
     250 00001060     09e1          MOVI    ARRAYA+ARRAYS,A1
         00001070 000002b0- 
     251 00001090     0d3f          CALLR   INIT_ARRAY
         000010a0     0003  
     252 000010b0     09e1          MOVI    ARRAYB+ARRAYS,A1
         000010c0 0000a2b0- 
     253                    
     254 000010e0           INIT_ARRAY
     255 000010e0     09c3          MOVI    128,A3
         000010f0     0080  
     256 00001100     5600          CLR     A0
     257 00001110           NEXT_DOWN
     258 00001110     09c2          MOVI    10,A2
         00001120     000a  
     259 00001130           NEXT_ACROSS
     260 00001130     9201          MOVE    A0,*A1+,L
     261 00001140     4080          ADD     A4,A0
     262 00001150     3c62          DSJS    A2,NEXT_ACROSS
     263 00001160     40a0          ADD     A5,A0
     264 00001170     3ce3          DSJS    A3,NEXT_DOWN
     265 00001180     0960          RETS
     266                    
     267                    ** NOTE !!!! ALL SCREEN CLEAR AND OPENS MUST BE CALLED WITH A JSRP ****
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    7

     268                    
     269                    ;**************************************************************************
     270                    ;*                                                                                            *
     271                    ;* For close/open screen box, send the y:x coor you want to close                *
     272                    ;* to in a9. Send the duration of close in a8                                            *
     273                    ;*                                                                                            *
     274                    ;**************************************************************************
     275                    
     276                            .IF     0
     277                    
     278                    OPEN_SCREEN_BOX_CENTER
     279                            MOVI    [127,200],A9
     280                            MOVI    25,A8
     281                    OPEN_SCREEN_BOX
     282                            MOVI    DRAW_BOXES,A0
     283                            MOVE    A0,@WHICH_SCREEN,L
     284                            CALLR   CALC_INCREMENTS
     285                    
     286                            NEG     A0
     287                            NEG     A1
     288                            NEG     A2
     289                            NEG     A3
     290                    
     291                            MOVY    A9,A6
     292                            MOVY    A9,A7
     293                            SLL     16,A9
     294                            MOVE    A9,A4
     295                            MOVE    A9,A5
     296                            JRUC    PUT_UP_BOX
     297                    
     298                    CLOSE_SCREEN_BOX_CENTER
     299                            MOVI    [127,200],A9
     300                            MOVK    25,A8
     301                    CLOSE_SCREEN_BOX
     302                            MOVI    DRAW_BOXES,A0
     303                            MOVE    A0,@WHICH_SCREEN,L
     304                            CALLR   CALC_INCREMENTS
     305                            MOVI    [400,0],A5
     306                            MOVI    [254,0],A7
     307                    
     308                    PUT_UP_BOX
     309                            CALLR   CALC_BOX
     310                            PUSHP   A0,A1,A2,A3
     311                            PUSHP   A4,A5,A6,A7
     312                            SLEEP   1
     313                            PULLP   A4,A5,A6,A7
     314                            PULLP   A0,A1,A2,A3
     315                            DSJS    A8,PUT_UP_BOX
     316                            MOVI    DUMRETS,A1
     317                            MOVE    A1,@WHICH_SCREEN,L
     318                            CLR     A0
     319                            MOVE    A0,@TOP_LEFT,L
     320                            MOVE    A0,@BOT_RIGHT,L
     321                            RETP
     322                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    8

     323                    CALC_INCREMENTS
     324                            MOVY    A9,A7
     325                            CLR     A1
     326                            MOVX    A9,A1
     327                            SLL     16,A1
     328                            DIVS    A8,A1
     329                            MOVE    A1,A0
     330                            CLR     A1
     331                            MOVX    A9,A1
     332                            MOVI    400,A5
     333                            SUB     A5,A1
     334                            SLL     16,A1
     335                            DIVS    A8,A1
     336                    
     337                            CLR     A3
     338                            MOVY    A7,A3
     339                            DIVS    A8,A3
     340                            MOVE    A3,A2
     341                            CLR     A3
     342                            MOVY    A7,A3
     343                            SRL     16,A3
     344                            MOVI    254,A5
     345                            SUB     A5,A3
     346                            SLL     16,A3
     347                            DIVS    A8,A3
     348                    
     349                            CLR     A4
     350                            CLR     A5
     351                            CLR     A6
     352                            CLR     A7
     353                    DUMRETS
     354                            RETS
     355                    
     356                    ;A0 32BIT ADD FOR LEFT
     357                    ;A1 32BIT ADD FOR RIGHT
     358                    ;A2 32BIT ADD FOR TOP
     359                    ;A3 32BIT ADD FOR BOTTOM
     360                    ;A4 32BIT XPOS FOR LEFT
     361                    ;A5 32BIT XPOS FOR RIGHT
     362                    ;A6 32BIT YPOS FOR TOP
     363                    ;A7 32BIT YPOS FOR BOTTOM
     364                    
     365                    CALC_BOX
     366                            ADD     A0,A4
     367                            ADD     A1,A5
     368                            ADD     A2,A6
     369                            ADD     A3,A7
     370                            MOVE    A4,A14
     371                            SRL     16,A14
     372                            MOVY    A6,A14
     373                            MOVE    A14,@TOP_LEFT,L
     374                            MOVE    A5,A14
     375                            SRL     16,A14
     376                            MOVY    A7,A14
     377                            MOVE    A14,@BOT_RIGHT,L
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE    9

     378                            RETS
     379                    
     380                    DRAW_BOXES
     381                            MOVI    01000100H,A5
     382                            CLR     A8
     383                            MOVI    4a748c9H,A11
     384                            MOVI    900C0000H,A12
     385                    
     386                            CLR     A10
     387                            MOVI    [255,0],A1
     388                            MOVE    @TOP_LEFT,A9
     389                            jrz     no_draw_anything1
     390                            MOVY    A1,A9
     391                    
     392                            callr   dma_it_out
     393                    
     394                    no_draw_anything1
     395                            MOVI    400,A1
     396                            MOVE    @BOT_RIGHT,A10
     397                            SUB     A10,A1
     398                            jrz     no_draw_anything2
     399                            jrn     no_draw_anything2
     400                            MOVX    A1,A9
     401                            CLR     A10
     402                            MOVE    @BOT_RIGHT,A10
     403                    
     404                            callr   dma_it_out
     405                    
     406                    no_draw_anything2
     407                            CLR     A10
     408                            MOVE    @TOP_LEFT,A10
     409                    
     410                            MOVE    @BOT_RIGHT,A9
     411                            SUB     A10,A9
     412                            JRZ     no_draw_anything4
     413                            JRN     no_draw_anything4
     414                            MOVE    @TOP_LEFT+010H,A14
     415                            JRZ     no_draw_anything3
     416                            JRN     no_draw_anything3
     417                            SLL     16,A14
     418                            MOVY    A14,A9
     419                    
     420                            callr   dma_it_out
     421                    
     422                    no_draw_anything3
     423                    
     424                            CLR     A10
     425                            MOVE    @TOP_LEFT,A10
     426                            MOVE    @BOT_RIGHT,A14,L
     427                            MOVY    A14,A10
     428                    
     429                            MOVI    254,A3
     430                            SRL     16,A14
     431                            SUB     A14,A3
     432                            JRZ     no_draw_anything4
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   10

     433                            JRN     no_draw_anything4
     434                            SLL     16,A3
     435                            MOVY    A3,A9
     436                    
     437                            callr   dma_it_out
     438                    no_draw_anything4
     439                    
     440                            RETS
     441                            .ENDIF
     442                    
     443                    ;A5 SCALE
     444                    ;A8 PAL|CONST
     445                    ;A9 YSIZE|XSIZE
     446                    ;A10 DAG
     447                    ;A11 SAG
     448                    ;A12 OCTRL|OFFSET
     449 00001190           dma_it_out
     450 00001190     4e51          move    b2,a1
     451 000011a0     e02a          addxy   a1,a10                  ;Add the page y offset : XPad
     452 000011b0     0984          mmtm    a4,a5,a8,a9,a10,a11,a12 ;Save the dma regs
         000011c0     04f8  
     453 000011d0     103d          addk    1,b13                   ;+1 Q cnt
     454 000011e0     c70d          jrgt    cigwnxt                 ;DMA going?
     455                    
     456 000011f0     0360          dint
     457                    
     458 00001200     0541          setf    1,0,0                   ;0EHnable DMA int
     459 00001210     1821          movk    1,a1
     460 00001220     0581          move    a1,@INTENB+1            ;X1E
         00001230 c0000111  
     461 00001250     0570          setf    16,1,0
     462                    
     463 00001260     8570          move    *b11,b0
     464 00001270     ce03          jrn     cigwdmaok                       ;DMA busy?
     465                    
     466 00001280     4dbd          move    b13,b13
     467 00001290     ce01          jrn     cigwdmaok                       ;DMA int done?
     468                    
     469 000012a0     0901          trap    1                       ;Cause DMA int
     470                    
     471 000012b0     0d60  cigwdmaok       eint
     472 000012c0           cigwnxt
     473 000012c0           DUMRETS
     474 000012c0     0960          rets
     475                    
     476                    ;**************************************************************************
     477                    ;*                                                                                            *
     478                    ;* ENTRY A8=SPEED OF ONE LINE, A9=DELAY BETWEEN EACH LINE (IF NEG START A *
     479                    ;* at the top, otherwise start at the bottom                                             *
     480                    ;*                                                                                            *
     481                    ;**************************************************************************
     482 000012d0           OPEN_VERT_SCREEN_LINE
     483                    
     484 000012d0     05a8          move    @WHAT_SPEED,A8
         000012e0 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   11

     485                    
     486 00001300     09e0          MOVI    HORZTRN1P,A0
         00001310 00000000! 
     487 00001330     0d5f          CALLA   pal_getf
         00001340 00000000! 
     488 00001360     0580          move    a0,@which_pal
         00001370 000002a0- 
     489                    
     490 00001390     09c1          MOVI    [0,400],A1
         000013a0     0190  
     491 000013b0     0781          MOVE    A1,@TOP_LEFT,L
         000013c0 00000020- 
     492 000013e0     5621          CLR     A1
     493 000013f0     0781          MOVE    A1,@BOT_RIGHT,L
         00001400 00000040- 
     494                    
     495 00001420     09e0          MOVI    [256,0],A0
         00001430 01000000  
     496 00001450     5621          CLR     A1
     497 00001460     5663          CLR     A3
     498 00001470     0d3f          CALLR   SET_INITIAL_LINES
         00001480     01b0  
     499                    
     500 00001490     09e1          MOVI    LINES_VERT,A1
         000014a0 000020b0' 
     501 000014c0     0781          MOVE    A1,@WHICH_SCREEN,L
         000014d0 00000000- 
     502                    
     503 000014f0     09eb          MOVI    [255,0],A11
         00001500 00ff0000  
     504 00001520     590b          DIVS    A8,A11
     505 00001530     03ab          NEG     A11
     506                    
     507 00001540     18ea          MOVK    7,A10
     508 00001550           cigwNEXT_LINE2B
     509 00001550     1a40          movk    18,a0
     510 00001560     0d5f          calla   triple_sound
         00001570 00000000! 
     511 00001590                   CREATE0 MOVE_LINE_VERT
     512 00001600     4d20          MOVE    A9,A0
     513 00001610     0d5f          CALLA   PRCSLP
         00001620 00000000! 
     514 00001640     142a          DEC     A10
     515 00001650     cfef          JRNN    cigwNEXT_LINE2B
     516                    
     517 00001660     4d00          MOVE    A8,A0
     518 00001670     4520          SUB     A9,A0
     519 00001680     1040          ADDK    2,A0
     520 00001690     0d5f          CALLA   PRCSLP
         000016a0 00000000! 
     521 000016c0     09e1          MOVI    DUMRETS,A1
         000016d0 000012c0' 
     522 000016f0     0781          MOVE    A1,@WHICH_SCREEN,L
         00001700 00000000- 
     523 00001720     5621          CLR     A1
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   12

     524 00001730     0781          MOVE    A1,@TOP_LEFT,L
         00001740 00000020- 
     525 00001760     0781          MOVE    A1,@BOT_RIGHT,L
         00001770 00000040- 
     526                    ;       CALLA   pal_clean
     527 00001790                   RETP
     528                    
     529                    ;**************************************************************************
     530                    ;*                                                                                            *
     531                    ;* ENTRY A8=SPEED OF ONE LINE, A9=DELAY BETWEEN EACH LINE                 *
     532                    ;* IF DELAY IS NEGATIVE (IE TWOS COMPLEMENT) THEN GO FROM TOP DOWN        *
     533                    ;*                                                                                            *
     534                    ;**************************************************************************
     535 000017c0           CLOSE_VERT_SCREEN_LINE
     536                    
     537 000017c0     0d5f          calla   get_all_buttons_cur2
         000017d0 00000000! 
     538 000017f0     ca01          jrz     cigwreg_spd
     539 00001800     2fe8          srl     1,a8
     540 00001810           cigwreg_spd
     541 00001810     0588          move    a8,@WHAT_SPEED
         00001820 00000000! 
     542 00001840     09e0          MOVI    HORZTRN1P,A0
         00001850 00000000! 
     543 00001870     0d5f          CALLA   pal_getf
         00001880 00000000! 
     544 000018a0     0580          move    a0,@which_pal
         000018b0 000002a0- 
     545                    
     546 000018d0     5621          CLR     A1
     547 000018e0     0781          MOVE    A1,@TOP_LEFT,L
         000018f0 00000020- 
     548 00001910     0781          MOVE    A1,@BOT_RIGHT,L
         00001920 00000040- 
     549                    
     550 00001940     5600          CLR     A0
     551 00001950     5663          CLR     A3
     552 00001960     09e1          MOVI    [256,0],A1
         00001970 01000000  
     553 00001990     0d3f          CALLR   SET_INITIAL_LINES
         000019a0     015e  
     554                    
     555 000019b0     09e1          MOVI    LINES_VERT,A1
         000019c0 000020b0' 
     556 000019e0     0781          MOVE    A1,@WHICH_SCREEN,L
         000019f0 00000000- 
     557                    
     558 00001a10     09eb          MOVI    [255,0],A11
         00001a20 00ff0000  
     559 00001a40     590b          DIVS    A8,A11
     560                    
     561 00001a50     18ea          MOVK    7,A10
     562 00001a60           cigwNEXT_LINE2A
     563 00001a60     1a40          movk    18,a0
     564 00001a70     0d5f          calla   triple_sound
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   13

         00001a80 00000000! 
     565 00001aa0                   CREATE0 MOVE_LINE_VERT
     566 00001b10     4d20          MOVE    A9,A0
     567 00001b20     0d5f          CALLA   PRCSLP
         00001b30 00000000! 
     568 00001b50     142a          DEC     A10
     569 00001b60     cfef          JRNN    cigwNEXT_LINE2A
     570                    
     571 00001b70     4d00          MOVE    A8,A0
     572 00001b80     4520          SUB     A9,A0
     573 00001b90     1040          ADDK    2,A0
     574 00001ba0     0d5f          CALLA   PRCSLP
         00001bb0 00000000! 
     575 00001bd0     09e1          MOVI    DUMRETS,A1
         00001be0 000012c0' 
     576 00001c00     0781          MOVE    A1,@WHICH_SCREEN,L
         00001c10 00000000- 
     577 00001c30     5621          CLR     A1
     578 00001c40     0781          MOVE    A1,@TOP_LEFT,L
         00001c50 00000020- 
     579 00001c70     0781          MOVE    A1,@BOT_RIGHT,L
         00001c80 00000040- 
     580                    ;       CALLA   pal_clean
     581 00001ca0                   RETP
     582                    
     583 00001cd0           MOVE_LINE_VERT
     584 00001cd0     4d6b          MOVE    A11,A11
     585 00001ce0     cf07          JRNN    NO_NEED_TO_RESET_NOW
     586                    
     587 00001cf0     4d41          MOVE    A10,A1
     588 00001d00     09c3          MOVI    50,A3
         00001d10     0032  
     589 00001d20     5e61          MPYU    A3,A1
     590 00001d30     0581          MOVE    A1,@TOP_LEFT
         00001d40 00000020- 
     591                    
     592 00001d60           NO_NEED_TO_RESET_NOW
     593                    
     594 00001d60     4d49          MOVE    A10,A9
     595 00001d70     24c9          SLL     6,A9
     596 00001d80     0b29          ADDI    LINE_1,A9
         00001d90 00000060- 
     597 00001db0           ADD_NEXT_BIT_TO_LINE
     598 00001db0     4d40          MOVE    A10,A0
     599 00001dc0     2fe0          SRL     1,A0
     600 00001dd0     c903          JRNC    YOU_STAY_HERE
     601 00001de0     8720          MOVE    *A9,A0,L
     602 00001df0     4560          SUB     A11,A0
     603 00001e00     8209          MOVE    A0,*A9,L
     604 00001e10           YOU_STAY_HERE
     605 00001e10     b720          MOVE    *A9(020H),A0,L
         00001e20     0020  
     606 00001e30     4160          ADD     A11,A0
     607 00001e40     b209          MOVE    A0,*A9(020H),L
         00001e50     0020  
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   14

     608 00001e60                   SLEEPK  1
     609 00001ea0     3e08          DSJS    A8,ADD_NEXT_BIT_TO_LINE
     610 00001eb0     4d6b          MOVE    A11,A11
     611 00001ec0     ce14          JRN     WE_OPENING
     612 00001ed0     09e0          MOVI    [100H,0],A0
         00001ee0 01000000  
     613 00001f00     b209          MOVE    A0,*A9(020H),L
         00001f10     0020  
     614 00001f20     5600          CLR     A0
     615 00001f30     8209          MOVE    A0,*A9,L
     616                    
     617 00001f40     09c1          MOVI    9,A1
         00001f50     0009  
     618 00001f60     4541          SUB     A10,A1
     619 00001f70     09c3          MOVI    50,A3
         00001f80     0032  
     620 00001f90     5e61          MPYU    A3,A1
     621 00001fa0     03a1          NEG     A1
     622 00001fb0     0581          MOVE    A1,@BOT_RIGHT
         00001fc0 00000040- 
     623 00001fe0                   DIE
     624                    
     625 00002010           WE_OPENING
     626 00002010     5600          CLR     A0
     627 00002020     b209          MOVE    A0,*A9(020H),L
         00002030     0020  
     628 00002040     09e0          MOVI    [100H,0],A0
         00002050 01000000  
     629 00002070     8209          MOVE    A0,*A9,L
     630 00002080                   DIE
     631                    
     632 000020b0           LINES_VERT
     633 000020b0     09e5          MOVI    01000100H,A5
         000020c0 01000100  
     634 000020e0     5708          CLR     A8
     635 000020f0     09e9          MOVI    [256,50],A9
         00002100 01000032  
     636 00002120     05a8          move    @which_pal,a8
         00002130 000002a0- 
     637 00002150     09ec          MOVI    0d0020000H,A12
         00002160 d0020000  
     638                    
     639 00002180     57ce          CLR     A14
     640 00002190     09e3          MOVI    LINE_1,A3,L
         000021a0 00000060- 
     641 000021c0     1902          MOVK    8,A2
     642 000021d0           DO_NEXT_VERT_LINE
     643 000021d0     0d3f          CALLR   DISPLAY_VERT_LINE
         000021e0     0002  
     644 000021f0     3c62          DSJS    A2,DO_NEXT_VERT_LINE
     645 00002200     0960          RETS
     646                    
     647 00002210           DISPLAY_VERT_LINE
     648 00002210     07ab          MOVE    @VERTTRN1+040H,A11,L
         00002220 00000160" 
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   15

     649 00002240     4c40          MOVE    A2,A0
     650 00002250     2fe0          SRL     1,A0
     651 00002260     c903          JRNC    GOT_TOP_BAR
     652 00002270     07ab          MOVE    @VERTTRN2+040H,A11,L
         00002280 000001f0" 
     653 000022a0           GOT_TOP_BAR
     654                    
     655 000022a0     4dca          MOVE    A14,A10
     656 000022b0     2e0a          SRL     16,A10
     657 000022c0     9660          MOVE    *A3+,A0,L       ;POSITION
     658 000022d0     ee0a          MOVY    A0,A10
     659 000022e0     9660          MOVE    *A3+,A0,L       ;SIZE
     660 000022f0     2a00          SRA     16,A0
     661 00002300     ca13          JRZ     NO_DISPLAY_VERT_LINE
     662 00002310     ce12          JRN     NO_DISPLAY_VERT_LINE
     663 00002320     4c01          MOVE    A0,A1
     664 00002330     2600          SLL     16,A0
     665 00002340     ee09          MOVY    A0,A9
     666                    
     667 00002350     4c46          MOVE    A2,A6
     668 00002360     2fe6          SRL     1,A6
     669 00002370     c80a          JRC     NO_SHIFT_SAG
     670 00002380     09c6          MOVI    256,A6
         00002390     0100  
     671 000023a0     4426          SUB     A1,A6
     672 000023b0     09c1          MOVI    50,A1
         000023c0     0032  
     673 000023d0     5ec1          MPYU    A6,A1
     674 000023e0     4c26          MOVE    A1,A6
     675 000023f0     2441          SLL     2,A1
     676 00002400     40c1          ADD     A6,A1
     677 00002410     402b          ADD     A1,A11
     678 00002420           NO_SHIFT_SAG
     679                    
     680 00002420     0d3f          CALLR   dma_it_out
         00002430     fed5  
     681 00002440           NO_DISPLAY_VERT_LINE
     682 00002440     0b2e          ADDI    [50,0],A14
         00002450 00320000  
     683 00002470     0960          RETS
     684                    
     685                    
     686                    ;**************************************************************************
     687                    ;*                                                                                            *
     688                    ;* ENTRY A8=SPEED OF ONE LINE, A9=DELAY BETWEEN EACH LINE (IF NEG START A *
     689                    ;* at the top, otherwise start at the bottom                                             *
     690                    ;*                                                                                            *
     691                    ;**************************************************************************
     692 00002480           OPEN_SCREEN_LINE
     693 00002480     05a8          move    @WHAT_SPEED,A8
         00002490 00000000! 
     694 000024b0     09e0          MOVI    HORZTRN1P,A0
         000024c0 00000000! 
     695 000024e0     0d5f          CALLA   pal_getf
         000024f0 00000000! 
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   16

     696 00002510     0580          move    a0,@which_pal
         00002520 000002a0- 
     697                    
     698 00002540     09e0          MOVI    LINE_1+040H,A0
         00002550 000000a0- 
     699 00002570     0780          MOVE    A0,@LINE_START,L
         00002580 00000260- 
     700 000025a0     5621          CLR     A1
     701 000025b0     5663          CLR     A3
     702 000025c0     09e0          MOVI    [400,0],A0
         000025d0 01900000  
     703 000025f0     0d3f          CALLR   SET_INITIAL_LINES
         00002600     0098  
     704 00002610     09eb          MOVI    [400,0],A11
         00002620 01900000  
     705 00002640     590b          DIVS    A8,A11
     706 00002650     03ab          NEG     A11
     707 00002660     4d29          MOVE    A9,A9
     708 00002670     ce07          JRN     cigwSET_BOT_RIGHT
     709 00002680     09ea          MOVI    [254,0],A10
         00002690 00fe0000  
     710 000026b0     078a          MOVE    A10,@TOP_LEFT,L
         000026c0 00000020- 
     711 000026e0     c030          JRUC    DO_LINES
     712 000026f0           cigwSET_BOT_RIGHT
     713 000026f0     09ea          MOVI    [254,0],A10
         00002700 00fe0000  
     714 00002720     03aa          NEG     A10
     715 00002730     078a          MOVE    A10,@BOT_RIGHT,L
         00002740 00000040- 
     716 00002760     c028          JRUC    DO_LINES
     717                    
     718                    ;**************************************************************************
     719                    ;*                                                                                            *
     720                    ;* ENTRY A8=SPEED OF ONE LINE, A9=DELAY BETWEEN EACH LINE                 *
     721                    ;* IF DELAY IS NEGATIVE (IE TWOS COMPLEMENT) THEN GO FROM TOP DOWN        *
     722                    ;*                                                                                            *
     723                    ;**************************************************************************
     724 00002770           CLOSE_SCREEN_LINE
     725 00002770     05ae          MOVE    @GAMSTATE,A14
         00002780 00000000! 
     726 000027a0     0b4e          CMPI    INAMODE,A14
         000027b0     fffe  
     727 000027c0     ca04          JREQ    MAKE_IT_FAST
     728                    
     729 000027d0     0d5f          calla   get_all_buttons_cur2
         000027e0 00000000! 
     730 00002800     ca01          jrz     cigwreg_spd2
     731 00002810           MAKE_IT_FAST
     732 00002810     2fe8          srl     1,a8
     733 00002820           cigwreg_spd2
     734 00002820     0588          move    a8,@WHAT_SPEED
         00002830 00000000! 
     735                    
     736 00002850     09e0          MOVI    HORZTRN1P,A0
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   17

         00002860 00000000! 
     737                    ;       MOVE    @GAMSTATE,A14
     738                    ;       CMPI    INAMODE,A14
     739                    ;       JRNE    NORMAL_COLOURS
     740                    ;       MOVI    DRKTRPLTP,A0
     741                    ;NORMAL_COLOURS
     742 00002880     0d5f          CALLA   pal_getf
         00002890 00000000! 
     743 000028b0     0580          move    a0,@which_pal
         000028c0 000002a0- 
     744                    
     745 000028e0     09e0          MOVI    LINE_1,A0
         000028f0 00000060- 
     746 00002910     0780          MOVE    A0,@LINE_START,L
         00002920 00000260- 
     747 00002940     5600          CLR     A0
     748 00002950     5663          CLR     A3
     749 00002960     09e1          MOVI    [400,0],A1
         00002970 01900000  
     750 00002990     0d3f          CALLR   SET_INITIAL_LINES
         000029a0     005e  
     751                    
     752 000029b0     09eb          MOVI    [400,0],A11
         000029c0 01900000  
     753 000029e0     590b          DIVS    A8,A11
     754 000029f0           DO_LINES
     755 000029f0     0589          MOVE    A9,@WHICH_WAY
         00002a00 00000280- 
     756 00002a20     4d29          MOVE    A9,A9
     757 00002a30     cf1d          JRNN    cigwBOTTOM_UP
     758 00002a40     03a9          NEG     A9
     759                    
     760                    ;TOP DOWN
     761 00002a50     182a          MOVK    1,A10
     762 00002a60           cigwNEXT_LINE1
     763                    
     764 00002a60     05a0          MOVE    @GAMSTATE,A0
         00002a70 00000000! 
     765 00002a90     0b40          CMPI    INAMODE,A0
         00002aa0     fffe  
     766 00002ab0     ca04          JREQ    NO_SOUNDS
     767 00002ac0     1a40          movk    18,a0
     768 00002ad0     0d5f          calla   triple_sound
         00002ae0 00000000! 
     769 00002b00           NO_SOUNDS
     770 00002b00                   CREATE0 MOVE_LINE
     771 00002b70     4d20          MOVE    A9,A0
     772 00002b80     ca03          JRZ     cigwNO_SLEEP_BETWEEN1
     773 00002b90     0d5f          CALLA   PRCSLP
         00002ba0 00000000! 
     774 00002bc0           cigwNO_SLEEP_BETWEEN1
     775 00002bc0     102a          INC     A10
     776 00002bd0     0b4a          CMPI    7,A10
         00002be0     fff8  
     777 00002bf0     cbe6          JRNE    cigwNEXT_LINE1
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   18

     778 00002c00     c018          JRUC    EXIT_CLOSE_LINE
     779                    
     780 00002c10           cigwBOTTOM_UP
     781 00002c10     18ca          MOVK    6,A10
     782 00002c20           cigwNEXT_LINE2
     783 00002c20     05a0          MOVE    @GAMSTATE,A0
         00002c30 00000000! 
     784 00002c50     0b40          CMPI    INAMODE,A0
         00002c60     fffe  
     785 00002c70     ca04          JREQ    NO_SOUNDS2
     786 00002c80     1a40          movk    18,a0
     787 00002c90     0d5f          calla   triple_sound
         00002ca0 00000000! 
     788 00002cc0           NO_SOUNDS2
     789 00002cc0                   CREATE0 MOVE_LINE
     790 00002d30     4d20          MOVE    A9,A0
     791 00002d40     ca03          JRZ     cigwNO_SLEEP_BETWEEN2
     792 00002d50     0d5f          CALLA   PRCSLP
         00002d60 00000000! 
     793 00002d80           cigwNO_SLEEP_BETWEEN2
     794 00002d80     3eea          DSJS    A10,cigwNEXT_LINE2
     795 00002d90           EXIT_CLOSE_LINE
     796 00002d90     4d00          MOVE    A8,A0
     797 00002da0     4520          SUB     A9,A0
     798 00002db0     1040          ADDK    2,A0
     799 00002dc0     0d5f          CALLA   PRCSLP
         00002dd0 00000000! 
     800 00002df0     09e1          MOVI    DUMRETS,A1
         00002e00 000012c0' 
     801 00002e20     0781          MOVE    A1,@WHICH_SCREEN,L
         00002e30 00000000- 
     802 00002e50     5621          CLR     A1
     803 00002e60     0781          MOVE    A1,@TOP_LEFT,L
         00002e70 00000020- 
     804 00002e90     0781          MOVE    A1,@BOT_RIGHT,L
         00002ea0 00000040- 
     805 00002ec0     07a1          MOVE    @LINE_START,A1,L
         00002ed0 00000260- 
     806                    
     807 00002ef0     0b61          CMPI    LINE_1,A1
         00002f00 ffffff9f- 
     808 00002f20     ca03          JREQ    NO_CLEAR_OUT_PALS
     809 00002f30     0d5f          CALLA   pal_clean
         00002f40 00000000! 
     810 00002f60           NO_CLEAR_OUT_PALS
     811 00002f60                   RETP
     812                    
     813 00002f90           SET_INITIAL_LINES
     814 00002f90     09e2          MOVI    LINE_1,A2
         00002fa0 00000060- 
     815 00002fc0     9262          MOVE    A3,*A2+,L
     816 00002fd0     9202          MOVE    A0,*A2+,L
     817 00002fe0     9222          MOVE    A1,*A2+,L
     818 00002ff0     9202          MOVE    A0,*A2+,L
     819                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   19

     820 00003000     9262          MOVE    A3,*A2+,L
     821 00003010     9202          MOVE    A0,*A2+,L
     822 00003020     9222          MOVE    A1,*A2+,L
     823 00003030     9202          MOVE    A0,*A2+,L
     824                    
     825 00003040     9262          MOVE    A3,*A2+,L
     826 00003050     9202          MOVE    A0,*A2+,L
     827 00003060     9222          MOVE    A1,*A2+,L
     828 00003070     9202          MOVE    A0,*A2+,L
     829                    
     830 00003080     9262          MOVE    A3,*A2+,L
     831 00003090     9202          MOVE    A0,*A2+,L
     832 000030a0     9222          MOVE    A1,*A2+,L
     833 000030b0     9202          MOVE    A0,*A2+,L
     834                    
     835 000030c0     09e1          MOVI    LINES,A1
         000030d0 000036e0' 
     836 000030f0     0781          MOVE    A1,@WHICH_SCREEN,L
         00003100 00000000- 
     837                    
     838 00003120     0960          RETS
     839                    
     840 00003130           MOVE_LINE
     841 00003130     4d6b          MOVE    A11,A11
     842 00003140     ce02          JRN     NO_DEC_A10
     843 00003150     142a          DEC     A10
     844 00003160     c018          JRUC    A10_POINTS_AT_START_LINE
     845 00003170           NO_DEC_A10
     846 00003170     09c7          MOVI    43,A7
         00003180     002b  
     847 00003190     142a          DEC     A10
     848 000031a0     5d47          MPYS    A10,A7
     849 000031b0     102a          INC     A10
     850                    
     851 000031c0     05a0          MOVE    @WHICH_WAY,A0
         000031d0 00000280- 
     852 000031f0     cf0b          JRNN    LINES_OPEN_DOWN
     853                    
     854 00003200           LINES_OPEN_UP
     855 00003200     0b07          ADDI    43,A7
         00003210     002b  
     856 00003220     09c0          MOVI    254,A0
         00003230     00fe  
     857 00003240     44e0          SUB     A7,A0
     858 00003250     2600          SLL     16,A0
     859 00003260     03a0          NEG     A0
     860 00003270     0780          MOVE    A0,@BOT_RIGHT,L
         00003280 00000040- 
     861 000032a0     c004          JRUC    A10_POINTS_AT_START_LINE
     862                    
     863 000032b0           LINES_OPEN_DOWN
     864 000032b0     2607          SLL     16,A7
     865 000032c0     0787          MOVE    A7,@TOP_LEFT,L
         000032d0 00000020- 
     866                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   20

     867 000032f0           A10_POINTS_AT_START_LINE
     868 000032f0     4d49          MOVE    A10,A9
     869 00003300     24c9          SLL     6,A9
     870 00003310     0b29          ADDI    LINE_1,A9
         00003320 00000060- 
     871 00003340           EXPAND_LINE
     872 00003340     4d40          MOVE    A10,A0
     873 00003350     2fe0          SRL     1,A0
     874 00003360     c903          JRNC    NO_MOVE_LINE_X
     875 00003370     8720          MOVE    *A9,A0,L
     876 00003380     4560          SUB     A11,A0
     877 00003390     8209          MOVE    A0,*A9,L
     878 000033a0           NO_MOVE_LINE_X
     879 000033a0     b720          MOVE    *A9(020H),A0,L
         000033b0     0020  
     880 000033c0     4160          ADD     A11,A0
     881 000033d0     b209          MOVE    A0,*A9(020H),L
         000033e0     0020  
     882 000033f0                   SLEEPK  1
     883 00003430     3e08          DSJS    A8,EXPAND_LINE
     884 00003440     4d6b          MOVE    A11,A11
     885 00003450     cf06          JRNN    SET_LINES_SOLID
     886 00003460     5600          CLR     A0
     887 00003470     b209          MOVE    A0,*A9(020H),L
         00003480     0020  
     888 00003490                   DIE
     889                    
     890 000034c0           SET_LINES_SOLID
     891 000034c0     5600          CLR     A0
     892 000034d0     8209          MOVE    A0,*A9,L
     893 000034e0     09e0          MOVI    [400,0],A0
         000034f0 01900000  
     894 00003510     b209          MOVE    A0,*A9(020H),L
         00003520     0020  
     895                    
     896 00003530     09c7          MOVI    43,A7
         00003540     002b  
     897 00003550     5d47          MPYS    A10,A7
     898                    
     899 00003560     05a0          MOVE    @WHICH_WAY,A0
         00003570 00000280- 
     900 00003590     ce0b          JRN     LINES_CLOSE_DOWN
     901                    
     902 000035a0           LINES_CLOSE_UP
     903 000035a0     09c0          MOVI    254,A0
         000035b0     00fe  
     904 000035c0     44e0          SUB     A7,A0
     905 000035d0     2600          SLL     16,A0
     906 000035e0     03a0          NEG     A0
     907 000035f0     0780          MOVE    A0,@BOT_RIGHT,L
         00003600 00000040- 
     908 00003620                   DIE
     909                    
     910 00003650           LINES_CLOSE_DOWN
     911 00003650     0b07          ADDI    43,A7
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   21

         00003660     002b  
     912 00003670     2607          SLL     16,A7
     913 00003680     0787          MOVE    A7,@TOP_LEFT,L
         00003690 00000020- 
     914 000036b0                   DIE
     915                    
     916 000036e0           LINES
     917 000036e0     09e5          MOVI    01000100H,A5
         000036f0 01000100  
     918 00003710     5708          CLR     A8
     919 00003720     05a8          move    @which_pal,a8
         00003730 000002a0- 
     920 00003750     09e9          MOVI    [43,400],A9
         00003760 002b0190  
     921 00003780     09ec          MOVI    0d0020000H,A12
         00003790 d0020000  
     922                    
     923 000037b0     57ce          CLR     A14
     924 000037c0     07a3          MOVE    @LINE_START,A3,L
         000037d0 00000260- 
     925 000037f0     18c2          MOVK    6,A2
     926 00003800           DO_NEXT_LINE
     927 00003800     0d3f          CALLR   DISPLAY_LINE
         00003810     0002  
     928 00003820     3c62          DSJS    A2,DO_NEXT_LINE
     929 00003830     0960          RETS
     930                    
     931 00003840           DISPLAY_LINE
     932 00003840     07ab          MOVE    @HORZTRN1+040H,A11,L
         00003850 00000040" 
     933 00003870     4c40          MOVE    A2,A0
     934 00003880     2fe0          SRL     1,A0
     935 00003890     c903          JRNC    GOT_RIGHT_BAR
     936 000038a0     07ab          MOVE    @HORZTRN2+040H,A11,L
         000038b0 000000d0" 
     937 000038d0           GOT_RIGHT_BAR
     938                    
     939 000038d0     9660          MOVE    *A3+,A0,L       ;POSITION
     940 000038e0     2e00          SRL     16,A0
     941 000038f0     ec0a          MOVX    A0,A10
     942 00003900     efca          MOVY    A14,A10
     943 00003910     9660          MOVE    *A3+,A0,L       ;SIZE
     944 00003920     2a00          SRA     16,A0
     945 00003930     ca16          JRZ     NO_DISPLAY_LINE
     946 00003940     ce15          JRN     NO_DISPLAY_LINE
     947                    
     948 00003950     09c1          MOVI    400,A1
         00003960     0190  
     949 00003970     4401          SUB     A0,A1
     950 00003980     ec2c          MOVX    A1,A12
     951                    
     952 00003990     4c46          MOVE    A2,A6
     953 000039a0     07a0          MOVE    @LINE_START,A0,L
         000039b0 00000260- 
     954 000039d0     0b60          CMPI    LINE_1,A0
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:47 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

wrestling game program                                               PAGE   22

         000039e0 ffffff9f- 
     955 00003a00     ca01          JREQ    WHICH_SIDE_CLIP
     956 00003a10     1426          DEC     A6
     957 00003a20           WHICH_SIDE_CLIP
     958 00003a20     2fe6          SRL     1,A6
     959 00003a30     c804          JRC     NO_SHIFT_CLIP
     960 00003a40     4c26          MOVE    A1,A6
     961 00003a50     2441          SLL     2,A1
     962 00003a60     4026          ADD     A1,A6
     963 00003a70     40cb          ADD     A6,A11
     964 00003a80           NO_SHIFT_CLIP
     965                    
     966 00003a80     0d3f          CALLR   dma_it_out
         00003a90     fd6f  
     967 00003aa0           NO_DISPLAY_LINE
     968 00003aa0     0b2e          ADDI    [43,0],A14
         00003ab0 002b0000  
     969 00003ad0     0960          RETS
     970                    
     971 00003ae0           RESETUP_LINES
     972 00003ae0     09e0          MOVI    LINES,A0
         00003af0 000036e0' 
     973 00003b10     0780          MOVE    A0,@WHICH_SCREEN,L
         00003b20 00000000- 
     974 00003b40     09e0          MOVI    HORZTRN1P,A0
         00003b50 00000000! 
     975 00003b70     0d5f          CALLA   pal_getf
         00003b80 00000000! 
     976 00003ba0     0580          move    a0,@which_pal
         00003bb0 000002a0- 
     977 00003bd0     0960          rets
     978                    
     979 00003be0            SUBR    DRKTRPLTP
     980 00003be0     001f     .word   31 
     981 00003bf0     0000     .word   00000h,00407h,00407h,00808h,00809h,00c09h,00809h,0100ah
     982 00003c70     100a     .word   0100ah,01009h,0100bh,00808h,00408h,00007h,00408h,01c0bh
     983 00003cf0     140a     .word   0140ah,01409h,0180ah,01809h,01c0ah,0180ah,00c08h,00006h
     984 00003d70     140d     .word   0140dh,02410h,00004h,00003h,00001h,0344dh,05ef7h
     985                    
     986                    ******************************************************************************
     987                    
     988                            .end

 No Errors,  No Warnings
