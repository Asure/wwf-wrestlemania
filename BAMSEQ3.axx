**************************************************************
*
* Software:		Jamie Rivett
* Initiated:		5/17/94
*
* COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
*
**************************************************************

	.file	"bamseq3.asm"
	.title	"Bam Bam Bigelo animation sequences"
	.width	132
	.option	b,d,l,t
	.mnolist


	.include	"macros.h"
	.include	"mproc.equ"		;Mproc equates
	.include	"sys.equ"
	.include	"game.equ"
	.include	"plyr.equ"
	.include	"anim.equ"
	.include	"sound.h"

	.include	"bamimg.h"
	.include	"bretimg.h"
	.include	"razorimg.h"
	.include	"takerimg.h"
	.include	"yokoimg.h"
	.include	"shawnimg.h"
	.include	"doinkimg.h"
	.include	"leximg.h"

	.include	"display.equ"
	.include	"damage.equ"
	.include	"miscimg.glo"



******************************************************************************
* EXTERNAL REFERENCES

	.ref	MOVE_NAME_ANNC

	.REF	DO_NONO
	.REF	DO_OTHERNONO
	.REF	FIND_AND_KILL_ENDLESS
	.ref	CALL_SETUP
	.ref	DO_COMBO_MESS
	.ref	CALL_THROWN_OUT

	.ref	D4SK4A,bam_faceup_getup_anim,face_inside
	.ref	HIT_THE_MAT,CALL_SPECIAL_MOVE
	.ref	CALL_MISSES,tgt_tbukl,tbukl_flip,make_white
	.ref	set_position,make_white,make_norm,start_smoke
	.ref	set_skeleton_pal,set_my_pal
	.ref	bam_4_lbowdrop_anim
	.ref	dnk_3_head_held_anim
	.ref	bam_3_butt_drop_anim
	.ref	bam_combo_butt_drop_anim
	.ref	bam_combo_lbowdrop_anim
	.ref	CALL_BONE_BREAK,am_I_dead,clear_opp_counts
	.ref	lex_backbroken_anim,head_grab_time,bam_stand4_anim
	.ref	powerp_dtime1,BAMFRE_P,lex_break_neck2_anim,ckzpos
	.ref	bam_4_faceup_getup_anim,lex_break_neck3_anim
	.ref	lex_break_face_anim,no_bk_xvel,bam_fall_back_anim
	.ref	SMALL_BOUNCE

BCDARM
	.long	0
	.long	0
	.long	BCDARM02
	.long	0
	.long	BCDARM04
	.long	BCDARM05
	.long	BCDARM06
	.long	0
	.long	BCDARM08

******************************************************************************
* SYMBOLS DEFINED IN THIS FILE

******************************************************************************
* EQUATES FOR THIS FILE

*****************************************************************************
*
* GRAB OPPONENT AND HOLD OVERHEAD

 SUBR	bam_2_graboh_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_PUPPET,15
	WL	2,B1TT5Z+FR2	;2.5
	WL	2,B1TT5Z+FR3	;3.5

 SUBR	bam_4_graboh_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_LEAPING,11
	WL	3,B3PO4A+FR1

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,80,80,60,90000h,TGT_CHEST,66,67,0
	WL	ANI_SET_YVEL,20000h
;	WL	ANI_CODE,store_opp_xvel

	WL	3,B3PO4A+FR2
	WL	3,B3PO4A+FR3

	.word	ANI_ATTACK_ON, AMODE_PUPPET,29,57,39,35 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,5,B3PO4A+FR4
	.word	ANI_ATTACK_OFF
	.word	ANI_ZEROVELS

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFNOTSTATUS2,eabmissed
	WL	ANI_IFBLOCKED,eabmissedb

;eabgothim
	WL	ANI_CODE,CALL_SETUP
	.word	ANI_SOUND,82h			;Effort grunt

	.word	ANI_ATTACHZ,0,0,2		;x & y don't matter.
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR4,eabpuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR5,eabpuppet_tbl,1

;	.word	ANI_WAITHITGND
;	.word	ANI_ZEROVELS

	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR6,eabpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR7,eabpuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR8,eabpuppet_tbl,4

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	ANI_SLAVEANIM,eabstrt_flail_tbl

	.word	ANI_FACEDOWN
	.word	ANI_SETPLYRMODE,MODE_OPPOVERHEAD
	.word	ANI_SETMODE,MODE_NOAUTOFLIP
	.word	ANI_END

eabmissedb
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	10,B3PO4A+FR4

eabmissed
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	25,B3PO4A+FR4
	WL	3,B3PO4A+FR3
	WL	3,B3PO4A+FR2
	WL	3,B3PO4A+FR1

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

******************************************************************************
*
* GRAB OPPONENT AND HOLD OVERHEAD (combo version)

 SUBR	bam_combo_graboh_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WLW	ANI_SET_XVEL,010000h,AM_FACE_REL

	.word	ANI_STARTATTACK,AT_PUPPET,11
	WL	3,B3PO4A+FR1

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff

	WL	3,B3PO4A+FR2
	WL	3,B3PO4A+FR3

	.word	ANI_ATTACK_ON, AMODE_PUPPET,29,47,39,45 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,5,B3PO4A+FR4
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,eabmissed_c

	WL	ANI_IFBLOCKED,eabmissed_c

;eabgothim
	.word	ANI_SOUND,82h			;Effort grunt

	.word	ANI_ATTACHZ,0,0,2		;x & y don't matter.
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR4,eabpuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR5,eabpuppet_tbl,1

	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR6,eabpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR7,eabpuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,4,B3PO4A+FR8,eabpuppet_tbl,4

	.word	ANI_SET_RPTCOUNT,4	;3 times
;start of back breaker
START_OF_BREAKER
	.word	ANI_CLR_BUTCOUNT
	WL	ANI_SLAVEANIM,eabstrt_flail_tbl

	.word	ANI_SETPLYRMODE,MODE_OPPOVERHEAD

	.word	ANI_ATTACK_ON, AMODE_PUPPET,-30,138,64,11 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,6,B4BB1X+FR2

	.word	ANI_ATTACK_OFF

	.word	ANI_ATTACHZ,0,0,4
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_KEEPATTACHED|MODE_OVERLAP|MODE_NOCONFINE

	.word	ANI_OFFSET,0,10,0			;x,y,z

	WWL	ANI_SETLONG,OBJ_GRAVITY,0c000h
	WL	ANI_SET_YVEL,50000h
;Float away from side ropes!
;Float toward the center of ring!
	WL	ANI_CODE,set_xdrift

	WWLLW	ANI_SUPERSLAVE2,16,B4BB1X+FR2,puppet_tbl_back,0
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_ZEROVELS
	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR3,puppet_tbl_back,1
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR4,puppet_tbl_back,2
;	.word	ANI_SOUND,33h			;neck break (5-7 ticks late)
	WL	ANI_CODE,CALL_BONE_BREAK
;	.word	ANI_SOUND,9Bh			;neck break (5-7 ticks late)
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR5,puppet_tbl_back,3
	.word	ANI_DAMAGEOPP,D_BACKBRKR,RD_BACKBRKR

;Perhaps even shake ropes
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,30
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR5,puppet_tbl_back,3

	WL	ANI_CODE,CALL_SPECIAL_MOVE
	.WORD	ANI_INC_COMBO

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,LET_GO_VICTIM
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IFNOT_RPTCOUNT,LET_GO_VICTIM

	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR4,puppet_tbl_back,2
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR3,puppet_tbl_back,1

	WL	ANI_GOTO,START_OF_BREAKER

LET_GO_VICTIM

	WL	ANI_SLAVEANIM,bncoff_tbl

	.word	ANI_DETACH

	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO

	WL	30,B4BB1X+FR5
	WL	4,B4BB1X+FR6
	WL	4,B4BB1X+FR7
	WL	4,B4BB1X+FR8
	WL	4,B4BB1X+FR9

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

eabmissed_c
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	20,B3PO4A+FR4
	WL	3,B3PO4A+FR3
	WL	3,B3PO4A+FR2
	WL	3,B3PO4A+FR1

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

eabpuppet_tbl
 .long eabBret
 .long eabRazor
 .long eabTaker
 .long eabYokozuna
 .long eabShawn
 .long eabBamBam
 .long eabDoink
 .long eabAdam
 .long eabLex
	.ref	H3MS3Z,H4MF4B
	.ref	R3MS3Z,R4MF4B
	.ref	U4GH3C,U3MS3Z,U4PM3C,U4GH3C
	.ref	Y3MS3Z,Y3MF3B
	.ref	S3PM4B,S3MS3Z,S3MF3B
;	.ref	B3MS3Z,B4MF4A
	.ref	D3GS3X,D4MF4A
	.ref	L3MS3Z,L3MF3B
eabBret
 LWWW H3MS3Z+FR1,53,16,0
 LWWW H3MS3Z+FR2,37,20,0
 LWWW H3MS3Z+FR3,24,22,0
 LWWW H3MS3Z+FR4,-12,26,0
 LWWW H4MF4B+FR1,-31,10,0
 .long 0
eabRazor
 LWWW R3MS3Z+FR1,57,7,0
 LWWW R3MS3Z+FR2,37,13,0
 LWWW R3MS3Z+FR3,10,13,0
 LWWW R3MS3Z+FR4,-25,21,0
 LWWW R4MF4B+FR6,-40,16,0
 .long 0
eabTaker
 LWWW U4GH3C+FR10,67,16,0
 LWWW U3MS3Z+FR1,31,36,0
 LWWW U3MS3Z+FR2,-6,32,0
 LWWW U3MS3Z+FR4,-31,17,0
 LWWW U4PM3C+FR6,-44,20,0
 .long 0
eabYokozuna
 LWWW Y3MS3Z+FR1,65,4,0
 LWWW Y3MS3Z+FR2,48,30,0
 LWWW Y3MS3Z+FR3,24,30,0
 LWWW Y3MS3Z+FR5,-29,28,0
 LWWW Y3MF3B+FR7,-32,19,0
 .long 0
eabShawn
 LWWW S3PM4B+FR1,53,14,0
 LWWW S3MS3Z+FR1,18,20,0
 LWWW S3MS3Z+FR2,3,20,0
 LWWW S3MS3Z+FR4,-33,19,0
 LWWW S3MF3B+FR6,-45,21,0
 .long 0
eabBamBam
 LWWW B3MS3Z+FR1,60,13,0
 LWWW B3MS3Z+FR2,38,13,0
 LWWW B3MS3Z+FR3,15,10,0
 LWWW B3MS3Z+FR4,-21,27,0
 LWWW B4MF4A+FR6,-41,31,0
 .long 0
eabDoink
 LWWW D3GS3X+FR1,70,0,0
 LWWW D3GS3X+FR3,35,22,0
 LWWW D3GS3X+FR4,18,15,0
 LWWW D3GS3X+FR5,-16,19,0
 LWWW D4MF4A+FR1,-36,14,0
 .long 0
eabAdam
 .long 0
eabLex
 LWWW L3MS3Z+FR1,63,8,0
 LWWW L3MS3Z+FR2,37,22,0
 LWWW L3MS3Z+FR3,7,12,0
 LWWW L3MS3Z+FR5,-32,16,0
 LWWW L3MF3B+FR6,-37,14,0
 .long 0
 

eabstrt_flail_tbl
	REFLONG	hrt_heldoh_anim
	REFLONG	rzr_heldoh_anim
	REFLONG	und_heldoh_anim
	REFLONG	yok_heldoh_anim
	REFLONG	shn_heldoh_anim
	REFLONG	bam_heldoh_anim
	REFLONG	dnk_heldoh_anim
	.long	0
	REFLONG	lex_heldoh_anim


 SUBR	bam_stndholdoh_anim

	.word	ANI_SETMODE,MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WL	999,B3PO4A+FR8
	.word	ANI_REPEAT


*****************************************************************************
*
* OPPONENT HELD OVERHEAD - SLAM DOWN


 SUBR	bam_slamdwn_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_ATTACK_ON, AMODE_PUPPET,-30,138,64,11 ;mode,x,y,w,h

	WWL	ANI_WAITHITOPP,6,B3PO4A+FR8
	.word	ANI_ATTACK_OFF

	.word	ANI_ATTACHZ,0,0,4
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_KEEPATTACHED|MODE_OVERLAP|MODE_NOCONFINE

	WWLLW	ANI_SUPERSLAVE2,4,B4CF4A+FR1,wowpuppet_tbl,0

	.word	ANI_SOUND,82h			;Effort grunt

	WLW	ANI_SET_ZVEL,-18000h,AM_ABS
	WL	ANI_SET_YVEL,50000h
;Float away from side ropes!
;Float toward the center of ring!
	WL	ANI_CODE,set_xdrift

	.word	ANI_DRAW_NAME,6

	WWLLW	ANI_SUPERSLAVE2,4,B4CF4A+FR2,wowpuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,4,B4CF4A+FR3,wowpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,4,B4CF4A+FR4,wowpuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,3,B4CF4A+FR5,wowpuppet_tbl,4
	WWLLW	ANI_SUPERSLAVE2,3,B4CF4A+FR6,wowpuppet_tbl,5
	WWLLW	ANI_SUPERSLAVE2,3,B4CF4A+FR7,wowpuppet_tbl,6
	WWLLW	ANI_SUPERSLAVE2,3,B4CF4A+FR8,wowpuppet_tbl,7

	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS

	WWLLW	ANI_SUPERSLAVE2,3,B4CF4A+FR9,wowpuppet_tbl,8

	.WORD	ANI_ADD_MOVE,MOVE_C_1,2,2

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_DAMAGEOPP,D_HIPTOSS,RD_HIPTOSS
	.word	ANI_SHAKER,40

	WL	ANI_CODE,CALL_SPECIAL_MOVE

	.word	ANI_OFFSET,-20,0,0			;x,y,z

	WL	ANI_SLAVEANIM,wowfaced_tbl
	.word	ANI_DETACH
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	WL	ANI_SET_YVEL,30000h
	WLW	ANI_SET_ZVEL,-10000h,AM_ABS
	WL	5,B4CF4A+FR9
	WL	ANI_CODE,wowset_opp_y

	WL	2,B4CF4A+FR9

	.word	ANI_WAITHITGND
	WL	4,B3PO4E+FR2
	WL	4,B3PO4E+FR3
	WL	4,B3PO4E+FR4

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL

;	.word	ANI_SETPLYRMODE,MODE_OPPOVERHEAD
;	.word	ANI_SETMODE,MODE_NOAUTOFLIP

	.word	ANI_END

wowset_opp_y
	move	*a13(WHOIHIT),a0,L
	movi	[5,0],a14
	move	a14,*a0(OBJ_YVEL),L
	movi	[2,0],a14
	move	a14,*a0(OBJ_ZVEL),L

	movi	-[3,0],a1
	move	*a0(NEW_FACING_DIR),a14
	btst	MOVE_RIGHT_BIT,a14
	jrnz	wowabs			;right
	neg	a1			;left
wowabs
	move	a1,*a0(OBJ_XVEL),L
	rets


wowpuppet_tbl
 .long wowBret
 .long wowRazor
 .long wowTaker
 .long wowYokozuna
 .long wowShawn
 .long wowBamBam
 .long wowDoink
 .long wowAdam
 .long wowLex

	.ref	S3CF3Z,Y3KF3B,L3TF3X

wowBret
 LWWW H4MF4B+FR1,-29,11,0
 LWWW H4MF4B+FR1,-31,8,0
 LWWW H4MF4B+FR1,-34,9,0
 LWWW H4MF4B+FR1,-39,7,0
 LWWW H4MF4B+FR1,-43,10,0
 LWWW H4MF4B+FR1,-40,14,0
 LWWW H4MF4B+FR1,-33,15,0
 LWWW H4MF4B+FR1,-13,6,0
 LWWW H4MF4B+FR1,-8,-41,0
 .long 0
wowRazor
 LWWW R4MF4B+FR6,-35,15,0
 LWWW R4MF4B+FR6,-38,14,0
 LWWW R4MF4B+FR6,-40,15,0
 LWWW R4MF4B+FR6,-41,16,0
 LWWW R4MF4B+FR6,-38,24,0
 LWWW R4MF4B+FR6,-43,24,0
 LWWW R4MF4B+FR6,-41,21,0
 LWWW R4MF4B+FR6,-29,11,0
 LWWW R3MS3Z+FR6,25,-46,0
 .long 0
wowTaker
	.ref	U3CF3Q
 LWWW U4PM3C+FR6,-42,17,0
 LWWW U4PM3C+FR6,-44,14,0
 LWWW U4PM3C+FR6,-47,14,0
 LWWW U4PM3C+FR6,-48,14,0
 LWWW U4PM3C+FR6,-44,21,0
 LWWW U4PM3C+FR6,-49,21,0
 LWWW U4PM3C+FR6,-46,19,0
 LWWW U4PM3C+FR6,-30,10,0
 LWWW U3CF3Q+FR1,14,-62,0
 .long 0
wowYokozuna
 LWWW Y3MF3B+FR7,-37,18,0
 LWWW Y3MF3B+FR7,-42,15,0
 LWWW Y3MF3B+FR7,-45,16,0
 LWWW Y3MF3B+FR7,-46,16,0
 LWWW Y3MF3B+FR7,-42,23,0
 LWWW Y3MF3B+FR7,-46,23,0
 LWWW Y3MF3B+FR7,-42,22,0
 LWWW Y3MF3B+FR7,-20,14,0
 LWWW Y3KF3B+FR1,18,-37,0
 .long 0
wowShawn
 LWWW S3MF3B+FR6,-43,18,0
 LWWW S3MF3B+FR6,-44,16,0
 LWWW S3MF3B+FR6,-47,17,0
 LWWW S3MF3B+FR6,-48,17,0
 LWWW S3MF3B+FR6,-44,23,0
 LWWW S3MF3B+FR6,-49,23,0
 LWWW S3MF3B+FR6,-47,20,0
 LWWW S3MF3B+FR6,-28,10,0
 LWWW S3CF3Z+FR1,27,-59,0
 .long 0
wowBamBam
 LWWW B4MF4A+FR6,-48,35,0
 LWWW B4MF4A+FR6,-50,34,0
 LWWW B4MF4A+FR6,-54,34,0
 LWWW B4MF4A+FR6,-58,32,0
 LWWW B4MF4A+FR6,-56,37,0
 LWWW B4MF4A+FR6,-61,37,0
 LWWW B4MF4A+FR6,-53,40,0
 LWWW B4MF4A+FR6,-33,29,0
 LWWW B3RL1A+FR7,35,-55,0
 .long 0
wowDoink
 LWWW D4MF4A+FR1,-34,15,0
 LWWW D4MF4A+FR1,-36,12,0
 LWWW D4MF4A+FR1,-39,13,0
 LWWW D4MF4A+FR1,-42,12,0
 LWWW D4MF4A+FR1,-40,19,0
 LWWW D4MF4A+FR1,-44,19,0
 LWWW D4MF4A+FR1,-34,17,0
 LWWW D4MF4A+FR1,-24,6,0
 LWWW D3GS3X+FR8,20,-59,0
 LWWW B4CF4A+FR1,-47,141,0
 .long 0
wowAdam
 .long 0
wowLex
 LWWW L3MF3B+FR6,-35,12,0
 LWWW L3MF3B+FR6,-36,9,0
 LWWW L3MF3B+FR6,-37,10,0
 LWWW L3MF3B+FR6,-38,11,0
 LWWW L3MF3B+FR6,-35,19,0
 LWWW L3MF3B+FR6,-40,18,0
 LWWW L3MF3B+FR6,-40,16,0
 LWWW L3MF3B+FR6,-30,5,0
 LWWW L3TF3X+FR1,9,-55,0
 .long 0
 

wowfaced_tbl
	REFLONG	hrt_break_face_anim,rzr_break_face_anim
	REFLONG	und_break_face_anim
	REFLONG	yok_break_face_anim
	REFLONG	shn_break_face_anim,bam_break_face_anim
	REFLONG	dnk_break_face_anim
	.long	0
	REFLONG	lex_break_face_anim

*****************************************************************************
*
* HELD OVERHEAD ANIMATION

 SUBR	bam_heldoh_anim

	.word	ANI_SETPLYRMODE,MODE_ATTACHED
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOGRAVITY
	.word	ANI_SETSPEED,100h

	.word	ANI_SETWORD,USR_VAR1,0		;loop count
	WL	ANI_CODE,DO_OTHERNONO

bigloop	WL	5,B4MF4A+FR1
	WL	5,B4MF4A+FR2
	WL	5,B4MF4A+FR3
	WL	5,B4MF4A+FR4
	WL	5,B4MF4A+FR5
	WL	5,B4MF4A+FR6
	WL	5,B4MF4A+FR7

	WL	ANI_CODE,biginc_loop
	WL	ANI_IFNOTSTATUS2,bigloop

;Fall out of overhead hold by reversing thru pickup frames
	.word	ANI_DETACH

	.word	ANI_OFFSET,-20,-50,0			;x,y,z
 
	WL	ANI_CODE,FIND_AND_KILL_ENDLESS

	.word	ANI_SETMODE,MODE_NORMAL|MODE_OVERLAP
	.word	ANI_SETPLYRMODE,MODE_INAIR

	WL	ANI_SET_YVEL,10000h
	WLW	ANI_SET_XVEL,-40000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,10000h,AM_ABS
	.word	ANI_FRICTION,3000h

	WL	5,B3MS3Z+FR4
	WL	5,B3MS3Z+FR3
	WL	5,B3MS3Z+FR2
	WL	5,B3MS3Z+FR1
	WL	5,B2ST2A+FR1

	.word	ANI_WAITHITGND
	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

;Loop 4 times, then break out!
biginc_loop
	move	*a13(USR_VAR1),a0
	inc	a0
	move	a0,*a13(USR_VAR1)
	cmpi	3,a0
	jrgt	bigbreakout
	
;	move	*a13(ATTACH_PROC),a0,L
;	jrz	bigbreakout

	move	*a13(ANIMODE),a1
	andni	MODE_STATUS2,a1
	move	a1,*a13(ANIMODE)
	rets

bigbreakout
	move	*a13(ANIMODE),a1
	ori	MODE_STATUS2,a1
	move	a1,*a13(ANIMODE)
	rets

*****************************************************************************
*
* BACK BREAKER

 SUBR	bam_backbreaker_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_ATTACK_ON, AMODE_PUPPET,-30,138,64,11 ;mode,x,y,w,h

	WWL	ANI_WAITHITOPP,6,B3PO4A+FR8
	.word	ANI_ATTACK_OFF

	.word	ANI_ATTACHZ,0,0,4
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_KEEPATTACHED|MODE_OVERLAP|MODE_NOCONFINE

	.word	ANI_OFFSET,0,10,0			;x,y,z

	WLW	ANI_SET_ZVEL,-18000h,AM_ABS
	WL	ANI_SET_YVEL,70000h
;Float away from side ropes!
;Float toward the center of ring!
	WL	ANI_CODE,set_xdrift

	.word	ANI_DRAW_NAME,5

	WWLLW	ANI_SUPERSLAVE2,16,B4BB1X+FR2,puppet_tbl_back,0
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_ZEROVELS
	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR3,puppet_tbl_back,1
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR4,puppet_tbl_back,2
	WL	ANI_CODE,CALL_BONE_BREAK
;	.word	ANI_SOUND,9Bh			;neck break (5-7 ticks late)
	WWLLW	ANI_SUPERSLAVE2,4,B4BB1X+FR5,puppet_tbl_back,3
	.word	ANI_DAMAGEOPP,D_BACKBRKR,RD_BACKBRKR
	.WORD	ANI_ADD_MOVE,MOVE_C_5,2,2

;Perhaps even shake ropes
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,50

	WL	ANI_CODE,CALL_SPECIAL_MOVE

	WL	ANI_SLAVEANIM,bncoff_tbl

	.word	ANI_DETACH

	WL	30,B4BB1X+FR5
	WL	4,B4BB1X+FR6
	WL	4,B4BB1X+FR7
	WL	4,B4BB1X+FR8
	WL	4,B4BB1X+FR9

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	set_xdrift

;Float
;This could become a leap at position command
;Leap at the center of ring!

;Check to make sure I'm in ring!
	move	*a13(INRING),a1
	jrnz	tanok

	move	*a13(OBJ_XPOSINT),a0
	subi	RING_X_MID,a0
	abs	a0
	cmpi	60h,a0
	jrlt	tanok

	move	*a13(OBJ_XPOSINT),a0
	cmpi	RING_X_MID,a0
	jrgt	tanonrgt

	movi	[3,0000h],a0
	move	a0,*a13(OBJ_XVEL),L
	rets
tanonrgt
	movi	-[3,0000h],a0
	move	a0,*a13(OBJ_XVEL),L
tanok
	rets


puppet_tbl_back
 .long tanBret
 .long tanRazor
 .long tanTaker
 .long tanYokozuna
 .long tanShawn
 .long tanBamBam
 .long tanDoink
 .long tanAdam
 .long tanLex

tanBret
	.ref	H3BR3Z,H3DC3A
 LWWW H3BR3Z+FR4,-28,16,1
 LWWW H3DC3A+FR5,-9,32,1
 LWWW H3DC3A+FR5,-11,30,1
 LWWW H3BR3Z+FR1,4,-23,1
 .long 0
tanRazor
	.ref	R3BR3Z,R3FD3B
 LWWW R3BR3Z+FR1,-21,15,1
 LWWW R3FD3B+FR9,-15,18,1
; LWWW R3FD3B+FR6,-19,34,1
 LWWW R3FD3B+FR9,-15,18,1
 LWWW R3BR3Z+FR3,-15,-30,1
 .long 0
tanTaker
	.ref	U3BR3Z,U3CP3B
 LWWW U3BR3Z+FR1,-30,10,1
 LWWW U3BR3Z+FR2,-31,10,1
 LWWW U3CP3B+FR4,-28,36,0
 LWWW U3BR3Z+FR3,-18,-21,1
 .long 0
tanYokozuna
	.ref	Y3RL1A,Y3CP3B,Y3BR3Z
 LWWW Y3RL1A+FR3,-21,18,0
 LWWW Y3RL1A+FR2,-21,22,0
 LWWW Y3CP3B+FR1,-8,24,0
 LWWW Y3BR3Z+FR1,-21,-11,1
 .long 0
tanShawn
	.ref	S3RL3A,S3BR3Z
 LWWW S3RL3A+FR3,-21,16,0
 LWWW S3RL3A+FR1,-25,14,0
 LWWW S3BR3Z+FR5,-23,19,1
 LWWW S3BR3Z+FR3,6,-27,1
 .long 0
tanBamBam
	.ref	B3BR3Z
 LWWW B3BR3Z+FR11,-27,21,1
 LWWW B3BR3Z+FR12,-29,29,1
 LWWW B3BR3Z+FR13,-27,19,1
 LWWW B3BR3Z+FR14,-24,-8,1
 .long 0
tanDoink
	.ref	D3UC3A,D3BK3Z
 LWWW D3BK3Z+FR2,-15,11,1
 LWWW D3BK3Z+FR3,-9,20,1
 LWWW D3UC3A+FR5,-13,28,1
 LWWW D3BK3Z+FR7,-18,-30,1
 .long 0
tanAdam
 .long 0
tanLex
	.ref	L3RL1A,L3UC3A,L3BR3Z
 LWWW L3RL1A+FR7,-29,16,0
 LWWW L3RL1A+FR9,-23,12,0
 LWWW L3UC3A+FR4,-21,24,1
 LWWW L3BR3Z+FR1,-14,-28,1
 .long 0

bncoff_tbl
	REFLONG	hrt_backbroken_anim,rzr_backbroken_anim
	REFLONG	und_backbroken_anim,yok_backbroken_anim
	REFLONG	shn_backbroken_anim,bam_backbroken_anim
	REFLONG	dnk_backbroken_anim
	.long	0
	REFLONG	lex_backbroken_anim


*****************************************************************************
*
* END OF BACK BROKEN SEQ.

 SUBR	bam_backbroken_anim

	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
;	.word	ANI_DETACH

	.word	ANI_GRAVITY_OFF
	WL	5,B3BR3Z+FR14
	.word	ANI_GRAVITY_ON

	WL	ANI_SET_YVEL,070000h
	WLW	ANI_SET_ZVEL,20000h,AM_ABS

;	WL	15,B3BR3Z+FR15
;	WL	4,B3BR3Z+FR16

	WL	25,B3BR3Z+FR14
	WL	4,B3BR3Z+FR16
	.word	ANI_XFLIP
	WL	2,B3RL1A+FR3



;	WL	3,B3RL1A+FR4
;	WL	3,B3RL1A+FR5
;	WL	3,B3RL1A+FR6
;	WL	3,B3RL1A+FR7

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_BOUNCE,2
	.word	ANI_DEBRIS,200,1,0,8,0		;%chance, tbl index, x,y,z off
	WL	ANI_CODE,HIT_THE_MAT
	WL	ANI_CODE,HIT_THE_MAT
	WL	ANI_CODE,HIT_THE_MAT

;	.word	ANI_XFLIP

	WL	3,B3MS3X+FR1
	WL	3,B3MS3X+FR2
	WL	3,B3MS3X+FR3

	.word	ANI_SETPLYRMODE,MODE_ONGROUND
;	.word	ANI_GETUP,100

;No stars around head here...

	.word	ANI_DETACH

	WL	20,B3RL1A+FR7

	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
*
* END OF NECK BROKEN SEQ.

 SUBR	bam_neckbroken_anim

	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WL	ANI_SET_YVEL,060000h
;;	WLW	ANI_SET_ZVEL,20000h,AM_ABS

	.word	ANI_XFLIP

	WL	3,B3CP3B+FR4
	WL	6,B3CP3B+FR5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	5,B3CP3B+FR6
	WL	5,B3CP3B+FR7

	WL	10,B3RL1A+FR1		;1st frame of roll

	.word	ANI_DETACH
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
*
* POGO STICK HEAD CRUNCHER

 SUBR	bam_combo_pogo_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

;Put cool cheers here
	.word	ANI_ATTACK_ON, AMODE_PUPPET,32,25,42h,21 ;mode,x,y,w,h

;vuycontpd
	WWL	ANI_WAITHITOPP,4,B3PG3A+FR1
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,vuymissed

;Check to see if I have tried to pile drive Yokozuna!

;FIX!! Yoko check
;	WL	ANI_CODE,is_this_yoko
;	WL	ANI_IFSTATUS2,vuyyoko_miss

;got him
	.word	ANI_ATTACHZ,0,0,-2		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B3PG3A+FR1,vuypuppet_tbl,0
	.word	ANI_WAITHITGND
	WWLLW	ANI_SUPERSLAVE2,20,B3PG3A+FR1,vuypuppet_tbl,0

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR2,vuypuppet_tbl,1

	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_ZVEL,-28000h,AM_ABS

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR3,vuypuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR4,vuypuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,7,B3PG3A+FR5,vuypuppet_tbl,4

	.word	ANI_SET_RPTCOUNT,4	;3 times
	.word	ANI_CLR_BUTCOUNT

;Place opponent in front of me in z

	.word	ANI_ATTACHZ,0,0,4
	WLW	ANI_ATTCHIMAGE,BCDARM+FR2,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR2,vuypuppet_tbl,5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR8,vuypuppet_tbl,9

	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,4,B4CD3B+FR8,vuypuppet_tbl,10

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,40
	.word	ANI_DAMAGEOPP,D_POGO1,RD_POGO1

	WL	ANI_CODE,CALL_SPECIAL_MOVE
	.WORD	ANI_INC_COMBO

	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,vuyletgo_c
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,vuyrpt_loop_c
vuyletgo_c
	WL	ANI_SLAVEANIM,vuyrollout_tbl
	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	.word	ANI_DETACH
	WLW	ANI_ATTCHIMAGE,0,0		;Turn it off
	WL	12,B4CF4A+FR9

	.word	ANI_WAITHITGND
	WL	2,B3PO4E+FR2
	WL	2,B3PO4E+FR3
	WL	2,B3PO4E+FR4

	WL	ANI_IF_RPTCOUNT,vuyCHECK_NEXT_BUTA

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,vuyCHECK_NEXT_BUT
	.WORD	ANI_INC_COMBO
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.word	ANI_DETACH
	.word	ANI_IMMOBILIZE,80
	WL	6,B3PO4E+FR4
	WL	ANI_CHANGEANIM,bam_combo_lbowdrop_anim

vuyCHECK_NEXT_BUT
	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,vuyCHECK_NEXT_BUTA
	.word	ANI_DETACH
	.word	ANI_IMMOBILIZE,80
	WL	8,B3PO4E+FR4
	WL	ANI_CHANGEANIM,bam_combo_butt_drop_anim
vuyCHECK_NEXT_BUTA

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vuymissed_c
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	WL	4,B3PG3A+FR1
	WL	4,B3PG3A+FR2
	WL	4,B3PG3A+FR3
	WL	4,B3PG3A+FR4

vuycont_c	WL	ANI_SET_YVEL,30000h

	WL	3,B3PG3A+FR5
	.word	ANI_OFFSET,0,26,0			;x,y,z

	WL	4,B4CD3A+FR3
	WL	4,B4CD3A+FR4
	WL	4,B4CD3A+FR5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

;Maybe do a bounce

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.word	ANI_DETACH

	;impact
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,30

	WL	4,B4CD3A+FR6

	WL	4,B4CD3A+FR6

	WLW	ANI_SET_ZVEL,-10000h,AM_ABS

	WL	3,B3PG3A+FR9
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


vuyrpt_loop_c
	.word	ANI_CLR_BUTCOUNT

	WL	ANI_SET_YVEL,60000h

	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR8,vuypuppet_tbl,10
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR8,vuypuppet_tbl,9
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR2,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR2,vuypuppet_tbl,5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR8,vuypuppet_tbl,9
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,4,B4CD3B+FR8,vuypuppet_tbl,10

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,20
	.word	ANI_DAMAGEOPP,D_POGO2,RD_POGO2

	.WORD	ANI_INC_COMBO
	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,vuyletgo_c
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,vuyrpt_loop_c

	WL	ANI_GOTO,vuyletgo_c

 SUBR	bam_pogo_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

;Put cool cheers here
;	.word	ANI_CHEER,3
	.word	ANI_ATTACK_ON, AMODE_PUPPET,32,25,42h,21 ;mode,x,y,w,h

;vuycontpd
	WWL	ANI_WAITHITOPP,4,B3PG3A+FR1
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,vuymissed

;Check to see if I have tried to pile drive Yokozuna!

;FIX!! Yoko check
;	WL	ANI_CODE,is_this_yoko
;	WL	ANI_IFSTATUS2,vuyyoko_miss

;got him
	.word	ANI_ATTACHZ,0,0,-2		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B3PG3A+FR1,vuypuppet_tbl,0
	.word	ANI_WAITHITGND
	WWLLW	ANI_SUPERSLAVE2,20,B3PG3A+FR1,vuypuppet_tbl,0

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR2,vuypuppet_tbl,1

	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_ZVEL,-28000h,AM_ABS
;Float toward the center of ring!
;	WL	ANI_CODE,set_xdrift

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR3,vuypuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR4,vuypuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,7,B3PG3A+FR5,vuypuppet_tbl,4

	.word	ANI_SET_RPTCOUNT,4	;3 times
	.word	ANI_CLR_BUTCOUNT

;Place opponent in front of me in z

	.word	ANI_ATTACHZ,0,0,4
	WLW	ANI_ATTCHIMAGE,BCDARM+FR2,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR2,vuypuppet_tbl,5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR8,vuypuppet_tbl,9

	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,4,B4CD3B+FR8,vuypuppet_tbl,10

	.WORD	ANI_ADD_MOVE,MOVE_C_6,2,2

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,40
	.word	ANI_DAMAGEOPP,D_POGO1,RD_POGO1

	WL	ANI_CODE,CALL_SPECIAL_MOVE
;	WL	ANI_CODE,vuyset_opp_xflip

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,2,vuyletgo
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,vuyrpt_loop
vuyletgo
	WL	ANI_SLAVEANIM,vuyrollout_tbl
	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	.word	ANI_DETACH
	WLW	ANI_ATTCHIMAGE,0,0		;Turn it off
	WL	20,B4CF4A+FR9

	.word	ANI_WAITHITGND
	WL	4,B3PO4E+FR2
	WL	4,B3PO4E+FR3
	WL	4,B3PO4E+FR4

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vuymissed
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	WL	4,B3PG3A+FR1
	WL	4,B3PG3A+FR2
	WL	4,B3PG3A+FR3
	WL	4,B3PG3A+FR4

vuycont	WL	ANI_SET_YVEL,30000h

	WL	3,B3PG3A+FR5
	.word	ANI_OFFSET,0,26,0			;x,y,z

	WL	4,B4CD3A+FR3
	WL	4,B4CD3A+FR4
	WL	4,B4CD3A+FR5

;	WL	ANI_SET_YVEL,-20000h

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

;Maybe do a bounce

	;impact
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,30

	WL	4,B4CD3A+FR6

;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
;	WL	18,D4HS3B+FR8

	WL	4,B4CD3A+FR6

	WLW	ANI_SET_ZVEL,-10000h,AM_ABS

	WL	3,B3PG3A+FR9
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


vuyrpt_loop
	.word	ANI_CLR_BUTCOUNT

	WL	ANI_SET_YVEL,60000h

	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR8,vuypuppet_tbl,10
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR8,vuypuppet_tbl,9
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR2,10
	WWLLW	ANI_SUPERSLAVE2,3,B4CD3B+FR2,vuypuppet_tbl,5

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WLW	ANI_ATTCHIMAGE,BCDARM+FR4,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR4,vuypuppet_tbl,6
	WLW	ANI_ATTCHIMAGE,BCDARM+FR5,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR5,vuypuppet_tbl,7
	WLW	ANI_ATTCHIMAGE,BCDARM+FR6,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR6,vuypuppet_tbl,8
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,1,B4CD3B+FR8,vuypuppet_tbl,9
	WLW	ANI_ATTCHIMAGE,BCDARM+FR8,10
	WWLLW	ANI_SUPERSLAVE2,4,B4CD3B+FR8,vuypuppet_tbl,10

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,20
	.word	ANI_DAMAGEOPP,D_POGO2,RD_POGO2

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,3,vuyletgo
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,vuyrpt_loop
	.word	ANI_DRAW_NAME,31

	WL	ANI_GOTO,vuyletgo

vuyset_opp_xflip
	move	*a13(ATTACH_PROC),a0,L

	move	*a0(OBJ_CONTROL),a14
	xori	M_FLIPH,a14
	move	a14,*a0(OBJ_CONTROL)

	rets

vuypuppet_tbl
 .long vuyBret
 .long vuyRazor
 .long vuyTaker
 .long vuyYokozuna
 .long vuyShawn
 .long vuyBamBam
 .long vuyDoink
 .long vuyAdam
 .long vuyLex

	.ref	H3BF3A,H3PP3X,H4POGO
	.ref	R3BF3A,R3GP3Z,R4POGO
	.ref	U4BF3Z,U3PP3X,U3GP3X,U4POGO
	.ref	Y3BF3A,Y3PP3Q,Y3FD3N,Y4POGO
	.ref	S3BF3A,S3GP3X,S3OS3X,S3FD3X,S4POGO
 	.ref	D3BF3A,D3PD3Z,D4POGO
	.ref	L3BF3B,L3GP3Z,L3FH3A,L3FD3B,L4POGO
;	.ref	B4AM4A,B3PP3Q,B4POGO,B4PO00

vuyBret
 LWWW H3BF3A+FR3,38,-13,0
 LWWW H3PP3X+FR1,18,-32,0
 LWWW H3PP3X+FR2,9,7,0
 LWWW H3PP3X+FR3,19,43,0
 LWWW H3PP3X+FR6,18,36,0

 LWWW H4POGO+FR1,26,50,1
 LWWW H4POGO+FR1,29,51,1
 LWWW H4POGO+FR1,28,56,1
 LWWW H4POGO+FR1,28,50,1
 LWWW H4POGO+FR2,-3,20,1
 LWWW H4POGO+FR3,-9,9,1
 .long 0
vuyRazor
 LWWW R3BF3A+FR9,39,-18,0
 LWWW R3GP3Z+FR1,25,-29,0
 LWWW R3GP3Z+FR2,21,-22,0
 LWWW R3GP3Z+FR4,37,44,0
 LWWW R3GP3Z+FR5,32,44,0

 LWWW R4POGO+FR3,-1,44,1
 LWWW R4POGO+FR3,0,44,1
 LWWW R4POGO+FR3,-4,50,1
 LWWW R4POGO+FR3,-3,48,1
 LWWW R4POGO+FR4,-15,23,1
 LWWW R4POGO+FR5,-21,2,1
 .long 0
vuyTaker
 LWWW U4BF3Z+FR1,37,-12,0
 LWWW U3PP3X+FR1,23,-25,1
 LWWW U3PP3X+FR2,24,-15,1
 LWWW U3PP3X+FR4,17,18,1
 LWWW U3PP3X+FR6,28,58,1

 LWWW U4POGO+FR1,16,59,1
 LWWW U4POGO+FR1,17,61,1
 LWWW U4POGO+FR1,16,69,1
 LWWW U4POGO+FR1,18,64,1
 LWWW U4POGO+FR3,-16,12,1
 LWWW U4POGO+FR4,-19,-3,1
 .long 0
vuyYokozuna
 LWWW Y3BF3A+FR11,46,-7,0
 LWWW Y3PP3Q+FR1,24,-22,0
 LWWW Y3PP3Q+FR3,25,-11,0
 LWWW Y3PP3Q+FR4,35,3,0
 LWWW Y3PP3Q+FR7,25,21,0

 LWWW Y4POGO+FR1,13,44,1
 LWWW Y4POGO+FR1,14,46,1
 LWWW Y4POGO+FR1,11,54,1
 LWWW Y4POGO+FR1,11,53,1
 LWWW Y4POGO+FR3,4,21,1
 LWWW Y4POGO+FR4,-4,7,1
 .long 0
vuyShawn
 LWWW S3BF3A+FR5,29,-27,0
 LWWW S3GP3X+FR1,30,-31,0
 LWWW S3GP3X+FR2,23,-21,0
 LWWW S3GP3X+FR3,27,5,0
 LWWW S3GP3X+FR5,30,40,0

 LWWW S4POGO+FR1,20,49,1
 LWWW S4POGO+FR1,21,49,1
 LWWW S4POGO+FR1,17,57,1
 LWWW S4POGO+FR1,17,54,1
 LWWW S4POGO+FR2,0,26,1
 LWWW S4POGO+FR3,-9,-1,1
 .long 0
vuyBamBam
 LWWW B4AM4A+FR5,41,-13,0
 LWWW B3PP3Q+FR1,23,-32,0
 LWWW B3PP3Q+FR2,23,-14,0
 LWWW B3PP3Q+FR3,27,12,0
 LWWW B3PP3Q+FR5,33,34,0

 LWWW B4POGO+FR5,16,60,1
 LWWW B4POGO+FR5,17,63,1
 LWWW B4POGO+FR5,15,69,1
 LWWW B4POGO+FR5,17,64,1
 LWWW B4POGO+FR3,-7,32,1
 LWWW B4POGO+FR4,-11,1,1

 .long 0
vuyDoink
 LWWW D3BF3A+FR1,40,-14,0
 LWWW D3PD3Z+FR1,29,-36,1
 LWWW D3PD3Z+FR2,24,-14,1
 LWWW D3PD3Z+FR3,26,16,1
 LWWW D3PD3Z+FR6,34,39,1

 LWWW D4POGO+FR2,11,55,1
 LWWW D4POGO+FR2,12,58,1
 LWWW D4POGO+FR2,9,63,1
 LWWW D4POGO+FR2,9,58,1
 LWWW D4POGO+FR3,-3,29,1
 LWWW D4POGO+FR4,-15,7,1
 .long 0
vuyAdam
 .long 0
vuyLex
 LWWW L3BF3B+FR1,27,-21,0
 LWWW L3GP3Z+FR1,25,-29,0
 LWWW L3GP3Z+FR2,23,-13,0
 LWWW L3GP3Z+FR4,29,23,0
 LWWW L3GP3Z+FR6,30,36,0

 LWWW L4POGO+FR1,13,54,1
 LWWW L4POGO+FR1,15,56,1
 LWWW L4POGO+FR1,13,61,1
 LWWW L4POGO+FR1,15,59,1
 LWWW L4POGO+FR3,9,30,1
 LWWW L4POGO+FR4,-8,11,1
 .long 0

vuyrollout_tbl
	REFLONG	hrt_break_neck3_anim,rzr_break_neck3_anim
	REFLONG	und_break_neck3_anim
	REFLONG	yok_break_neck3_anim
	REFLONG	shn_break_neck4_anim,bam_break_neck3_anim
	REFLONG	dnk_break_neck3_anim
	.long	0
	REFLONG	lex_break_neck3_anim


*****************************************************************************
*
* CLIMB UP TURNBUCKLES

 SUBR	bam_climb_up_anim

	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP | MODE_NOCONFINE|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SCROLL_CTRL,BAM_TBUKLY

	WL	2,B4HU4B+FR7
	WL	2,B4HU4B+FR8
	WL	2,B4HU4B+FR9

	.word	ANI_OFFSET,0,20,0

	WL	ANI_CODE,tgt_tbukl
	.word	ANI_LEAPATPOS,20,200,10,4,0	;msgticks,dist,xoff,yoff,zoff
	WL	20,B4HU4B+FR11

	.word	ANI_SETPLYRMODE,MODE_ONTURNBKL
	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP | MODE_NOCONFINE | MODE_NOGRAVITY|MODE_OVERLAP
	.word	ANI_SHAKECORNER
	.word	ANI_ZEROVELS
	.word	ANI_SCROLL_CTRL,SC_RESTORE
  
	WL	3,B4HU4B+FR12

;	WL	3,B4SB4A+FR1
;	WL	3,B4SB4A+FR2
;	WL	3,B4SB4A+FR3
;	WL	3,B4SB4A+FR4
;	WL	3,B4SB4A+FR5
;	WL	3,B4SB4A+FR6

	WL	3,B4SB4A+FR7
	WL	3,B4SB4A+FR8
	WL	3,B4SB4A+FR9
	.word	ANI_SETMODE,MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_NOGRAVITY|MODE_UNINT
	.word	ANI_SCROLL_CTRL,SC_RESTORE
	WL	ANI_CODE,tbukl_flip
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
msgrepeat
	WL	7,B4SB4A+FR10
	WL	ANI_CODE,tbukl_flip
	WL	7,B4SB4A+FR9
	WL	ANI_CODE,tbukl_flip
	WL	7,B4SB4A+FR8
	WL	ANI_CODE,tbukl_flip
	WL	7,B4SB4A+FR7
	WL	ANI_CODE,tbukl_flip
	WL	7,B4SB4A+FR8
	WL	ANI_CODE,tbukl_flip
	WL	7,B4SB4A+FR9
	WL	ANI_CODE,tbukl_flip
	WL	ANI_GOTO,msgrepeat
	

*****************************************************************************
*
* CLIMB DOWN TURNBUCKLES

 SUBR	bam_climb_down_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_NOGRAVITY
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SCROLL_CTRL,SC_RESTORE

	WL	ANI_CODE,face_inside

	.word	ANI_SHAKECORNER
	WL	3,B2JD4A+FR2

	WLW	ANI_SET_XVEL,18000h,AM_FACE_REL
	WLW	ANI_SET_ZVEL,10000h,AM_ABS
	WL	ANI_SET_YVEL,20000h

	.word	ANI_GRAVITY_ON
	WL	3,B2JD4A+FR3
	WL	3,B2JD4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_SHAKECORNER

	WL	3,B2JD4A+FR6
	WL	3,B2JD4A+FR8
;	WL	3,B2JD4A+FR9

	.word	ANI_FACEDOWN

	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************
*
* GET BUZZED FROM DOINK

 SUBR	bam_get_buzz_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
;	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;	.word	ANI_XFLIP
	.word	ANI_GRAVITY_OFF

	WL	ANI_CODE,set_position

	WL	ANI_CODE,set_skeleton_pal
	WL	2,D4SK4A+FR1
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	ANI_CODE,make_white
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,make_norm
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,make_white
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,make_norm
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	ANI_CODE,make_white
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,make_norm
	WL	ANI_CODE,set_my_pal
	WL	3,B4BZ4A+FR1

	WL	ANI_CODE,set_skeleton_pal
	WL	3,D4SK4A+FR1
	WL	ANI_CODE,set_my_pal
	WL	ANI_CODE,start_smoke

	.word	ANI_DETACH
	.word	ANI_GRAVITY_ON
	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_XVEL,-30000h,AM_FACE_REL
	WLW	ANI_SET_ZVEL,20000h,AM_ABS
	WL	ANI_CODE,jozmake_black
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,make_norm
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,jozmake_black
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,make_norm
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,jozmake_black
	WL	3,B4BZ4A+FR1
	WL	ANI_CODE,make_norm
	WL	3,B4BZ4A+FR1

	.word	ANI_WAITHITGND
	.word	ANI_XFLIP
	.word	ANI_FACEDOWN
	.word	ANI_OFFSET,-20,0,0			;x,y,z

	WL	1,B4ST4Z+FR1

	WL	ANI_CODE,am_I_dead
;If I'm dead, goto fall back
	WL	ANI_IFNOTSTATUS2,joznodead

	WL	ANI_CHANGEANIM,bam_fall_back_anim
;	.word	ANI_END

joznodead

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

jozmake_black

;This is a black color within the wrestler's pal.  It is different for each
;wrestler.
	movi	0b0bh,a14

	move	a14,*a13(OBJ_CONST)
	move	*a13(OBJ_CONTROL),a14
	andni	01111b,a14
	ori	M_CONNON,a14
	move	a14,*a13(OBJ_CONTROL)
	rets


*****************************************************************************

 SUBR	bam_3_head_held_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_HEADHELD
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim

;	WL	4,D3BF3Z+FR1
;	WL	4,D3BF3Z+FR2

	.word	ANI_SETWORD,USR_VAR1,0		;loop count

cqyloop
	WL	4,B3BF3C+FR5
	WL	3,B3BF3C+FR6
	WL	4,B3BF3C+FR7
	WL	3,B3BF3C+FR8
	WL	4,B3BF3C+FR9
	WL	3,B3BF3C+FR1
	WL	4,B3BF3C+FR2
	WL	3,B3BF3C+FR3
	WL	4,B3BF3C+FR4
	WL	ANI_CODE,cqyinc_loop
	WL	ANI_IFNOTSTATUS2,cqyloop

;Continue into break...

 SUBR	bam_3_head_held_brk_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	WL	ANI_CODE,FIND_AND_KILL_ENDLESS

	WLW	ANI_SET_XVEL,-38000h,AM_NEWFACE_REL
	WL	ANI_SET_YVEL,40000h
	WLW	ANI_SET_ZVEL,18000h,AM_ABS

	WL	4,B3BF3C+FR5
	.word	ANI_DETACH

;Standard cqy2 head hit from spin kick
	WL	3,B2AH2A+FR4
	WL	3,B2AH2A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B2AH2A+FR6

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


;Loop 4 times, then break out!
cqyinc_loop
	move	*a13(USR_VAR1),a0
	inc	a0
	move	a0,*a13(USR_VAR1)
	cmpi	2,a0
	jrgt	cqybreakout
	
;He may have let me go by hitting his block butn!
;Handled in mode_headheld!
;	move	*a13(ATTACH_PROC),a0,L
;	jrz	cqybreakout

	move	*a13(ANIMODE),a1
	andni	MODE_STATUS2,a1
	move	a1,*a13(ANIMODE)
	rets

cqybreakout
	move	*a13(ANIMODE),a1
	ori	MODE_STATUS2,a1
	move	a1,*a13(ANIMODE)
	rets

 SUBR	bam_3_head_held_stand_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	WL	3,B3BF3C+FR5
	WL	3,B1TT5Z+FR2	;2.5
	.word	ANI_DETACH

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************
*
* ROLL OVER AND BREAK YER STINKIN' NECK

 SUBR	bam_break_neck2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP

	WLW	ANI_SET_XVEL,-20000h,AM_HIT_REL
	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_ZVEL,8000h,AM_ABS

	WL	ANI_CODE,ckzpos

	.word	ANI_XFLIP
;	.word	ANI_OFFSET,25,0,0
	.word	ANI_DEBRIS,300,5,0,-5,0	;%chance, tbl index, x,y,z off
	WL	6,B3FD3C+FR1
	WL	8,B3FD3C+FR2
	WL	3,B3FD3C+FR3
	WL	3,B3FD3C+FR4
	WL	3,B3FD3C+FR5
	.word	ANI_WAITHITGND
	WL	4,B3FD3C+FR5

	;hit.  stay.
	WL	ANI_CODE,HIT_THE_MAT

	.word	ANI_OFFSET,-30,0,0
	.word	ANI_ZEROVELS

	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	WL	23,B3RL1A+FR7
	.word	ANI_WAITROLL

	.word	ANI_OFFSET,10,0,-6
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim
;	.word	ANI_END

 SUBR	bam_break_neck3_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP

	WLW	ANI_SET_XVEL,-20000h,AM_HIT_REL
	WL	ANI_SET_YVEL,58000h
	WLW	ANI_SET_ZVEL,18000h,AM_ABS

	WL	ANI_CODE,ckzpos

	.word	ANI_DEBRIS,300,5,0,-5,0	;%chance, tbl index, x,y,z off

	WL 	15,B4POGO+FR4
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT

	.word	ANI_XFLIP
	WL	3,B3FD3C+FR3
	WL	3,B3FD3C+FR4
	WL	3,B3FD3C+FR5

	;hit.  stay.
 
	.word	ANI_OFFSET,-30,0,0
	.word	ANI_ZEROVELS

	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	WL	23,B3RL1A+FR7
	.word	ANI_WAITROLL

	.word	ANI_OFFSET,10,0,-6

	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim
;	.word	ANI_END

 SUBR	bam_break_neck4_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP

	WLW	ANI_SET_XVEL,-20000h,AM_HIT_REL
	WL	ANI_SET_YVEL,60000h
	WL	ANI_CODE,ckzpos

	WWWL	ANI_IFROPE,RC_EITHER,100,tjkfall_back4

	WL	4,B4UC3B+FR6
	WL	4,B3FD3C+FR2
	WL	4,B3FD3C+FR3
	WL	4,B3FD3C+FR4
	WL	4,B3FD3C+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim

tjkfall_back4
	WL	4,B4UC3B+FR6
	WL	4,B4UC3B+FR7
	WL	4,B4UC3B+FR8
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim



 SUBR	bam_break_neck_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_ZEROVELS
	WWWL	ANI_IFROPE,RC_EITHER,100,tjkfall_back

	;plenty of room.  fall over.
	.word	ANI_OFFSET,-20,0,0
	WL	5,B3FD3C+FR4
	.word	ANI_OFFSET,-13,0,0
	WL	5,B3FD3C+FR5
	.word	ANI_OFFSET,-51,0,0
	WL	5,B3RL1A+FR7
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim

tjkfall_back
	;no room.  roll back onto yer back.
	.word	ANI_OFFSET,14,0,0
	WL	5,B4TD3B+FR7
	.word	ANI_OFFSET,-12,0,0
	WL	5,B4TD3B+FR8
	.word	ANI_OFFSET,-26,0,0
	WL	5,B4UC3B+FR7
	.word	ANI_OFFSET,-16,0,0
	.word	ANI_XFLIP
	WL	10,B3RL1A+FR1
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim


******************************************************************************

 SUBR	bam_2_hair_pickup_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	.word	ANI_STARTATTACK,AT_PUPPET,16
	WL	2,B1TT5Z+FR2	;2.5
	WL	2,B1TT5Z+FR3	;3.5

 SUBR	bam_4_hair_pickup_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	.word	ANI_STARTATTACK,AT_PUPPET,12

;Put cool cheers here
;	.word	ANI_CHEER,3

	WL	3,B4WS4A+FR1

	LEAPATOPP 8,999,80,80,30000h,TGT_HEAD,26,6,-2
	WL	4,B4WS4A+FR2
	WL	4,B4WS4A+FR3
	.word	ANI_ZERO_XZVELS

	.word	ANI_ATTACK_ON, AMODE_PUPPET2,25,0,25,22 ;mode,x,y,w,h
	WL	4,B4WS4A+FR4
	.word	ANI_ATTACK_OFF

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFNOTSTATUS2,hgsmissed

;got him
	.word	ANI_CLR_BUTCOUNT
	WL	ANI_CODE,clear_opp_counts
	.word	ANI_ATTACHZ,0,0,-4		;x & y don't matter.
	WL	ANI_CODE,DO_NONO
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	WL	ANI_CODE,CALL_SETUP

	WL	ANI_CODE,CALL_BONE_BREAK
;	.word	ANI_SOUND,9Bh			;neck break (5-7 ticks late)

	WWLLW	ANI_SUPERSLAVE2,3,B4WS4A+FR4,hgspuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,3,B4GH3D+FR2,hgspuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,3,B4GH3D+FR3,hgspuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,3,B4GH3D+FR4,hgspuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,3,B4GH3D+FR5,hgspuppet_tbl,4
	WWLLW	ANI_SUPERSLAVE2,3,B4GH3D+FR5,hgspuppet_tbl,5

	.word	ANI_SETPLYRMODE,MODE_HEADHOLD
	WL	ANI_SLAVEANIM,hgsheadheld_tbl

	WL	1,B4GH3D+FR5
	.word	ANI_CLROPPMODE,MODE_GHOST

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

hgsmissed
	WL	ANI_CODE,CALL_MISSES
	WL	20,B4WS4A+FR4
	WL	3,B4WS4A+FR3
	WL	3,B4WS4A+FR2
	WL	3,B4WS4A+FR1

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


hgsheadheld_tbl
	.long	hrt_3_head_held_anim
	.long	rzr_3_head_held_anim
	.long	und_3_head_held_anim
	.long	yok_3_head_held_anim
	.long	shn_3_head_held_anim
	.long	bam_3_head_held_anim
	.long	dnk_3_head_held_anim
	.long	0
	.long	lex_3_head_held_anim

hgspuppet_tbl
 .long hgsBret
 .long hgsRazor
 .long hgsTaker
 .long hgsYokozuna
 .long hgsShawn
 .long hgsBamBam
 .long hgsDoink
 .long hgsAdam
 .long hgsLex

	.ref	H3GU4A,H3DU3A,H3BF3A
	.ref	R3GU4A,R3DU3B,R3BF3A
	.ref	U3DU3B,U4BF3Z
	.ref	Y3GU2A,Y3BF3A
	.ref	S3GU4A,S3BF3A
	.ref	B3GU4A,B3BF3C
	.ref	D3HT3Z,D3BF3A
	.ref	L3DU3A,L3BF3B

hgsBret
 LWWW H3GU4A+FR1,42,-42,0
 LWWW H3GU4A+FR3,65,-31,0
 LWWW H3DU3A+FR3,54,-44,1
 LWWW H3DU3A+FR4,57,-34,1
 LWWW H3DU3A+FR5,55,-36,1
 LWWW H3BF3A+FR1,57,-34,0
 .long 0
hgsRazor
 LWWW R3GU2A+FR3,42,-33,0
 LWWW R3GU4A+FR4,49,-25,0
 LWWW R3GU4A+FR5,54,-47,0
 LWWW R3DU3B+FR2,57,-47,1
 LWWW R3DU3B+FR4,61,-37,1
 LWWW R3BF3A+FR1,63,-36,0
 .long 0
hgsTaker
 LWWW U3DU3B+FR2,45,-34,1
 LWWW U3DU3B+FR5,56,-21,1
 LWWW U3DU3B+FR6,60,-42,1
 LWWW U3DU3B+FR8,52,-37,1
 LWWW U3DU3B+FR10,50,-30,1
 LWWW U4BF3Z+FR5,58,-15,0
 .long 0
hgsYokozuna
 LWWW Y3GU2A+FR1,49,-28,0
 LWWW Y3GU2A+FR2,59,-14,0
 LWWW Y3GU2A+FR4,42,-34,0
 LWWW Y3GU2A+FR7,41,-45,0
 LWWW Y3GU2A+FR11,59,-34,0
 LWWW Y3BF3A+FR1,60,-24,0
 .long 0
hgsShawn
 LWWW S3GU2A+FR1,47,-36,0
 LWWW S3GU4A+FR3,54,-20,0
 LWWW S3GU4A+FR4,58,-48,0
 LWWW S3GU4A+FR5,58,-45,0
 LWWW S3GU4A+FR7,59,-41,0
 LWWW S3BF3A+FR1,47,-35,0
 .long 0
hgsBamBam
 LWWW B3GU4A+FR3,54,-32,0
 LWWW B3GU4A+FR4,62,-26,0
 LWWW B3GU4A+FR6,61,-40,0
 LWWW B3GU4A+FR7,60,-45,0
 LWWW B3GU4A+FR10,63,-37,0
 LWWW B3BF3C+FR5,63,-28,0
 .long 0
hgsDoink
 LWWW D3GU4A+FR2,49,-39,0
 LWWW D3GU4A+FR3,54,-29,0
 LWWW D3GU4A+FR4,55,-53,0
 LWWW D3GU4A+FR5,49,-39,0
 LWWW D3GU4A+FR7,66,-41,0
 LWWW D3BF3A+FR2,60,-34,0
 .long 0
hgsAdam
 .long 0
hgsLex
 LWWW L3GU4A+FR1,44,-36,0
 LWWW L3DU3A+FR4,38,-20,1
 LWWW L3DU3A+FR6,38,-44,1
 LWWW L3DU3A+FR7,48,-39,1
 LWWW L3DU3A+FR9,58,-39,1
 LWWW L3BF3B+FR5,57,-32,0
 .long 0
;hgsBret
; LWWW H3GU4A+FR1,33,-42,0
; LWWW H3GU4A+FR3,62,-31,0
; LWWW H3DU3A+FR3,59,-38,1
; LWWW H3DU3A+FR4,64,-36,1
; LWWW H3DU3A+FR5,63,-33,1
; LWWW H3BF3A+FR1,60,-34,0
; .long 0
;hgsRazor
; LWWW R3GU4A+FR2,41,-43,1
; LWWW R3GU4A+FR3,46,-31,0
; LWWW R3GU4A+FR5,59,-44,0
; LWWW R3DU3B+FR2,59,-48,1
; LWWW R3DU3B+FR4,60,-31,1
; LWWW R3BF3A+FR4,64,-35,0
; .long 0
;hgsTaker
; LWWW U3DU3B+FR2,39,-40,1
; LWWW U3DU3B+FR5,36,-29,1
; LWWW U3DU3B+FR6,49,-44,1
; LWWW U3DU3B+FR8,60,-40,1
; LWWW U3DU3B+FR10,56,-27,1
; LWWW U4BF3Z+FR5,64,-14,0
; .long 0
;hgsYokozuna
; LWWW Y3GU2A+FR1,45,-28,0
; LWWW Y3GU2A+FR3,53,-16,0
; LWWW Y3GU2A+FR6,32,-43,0
; LWWW Y3GU2A+FR9,55,-45,0
; LWWW Y3GU2A+FR12,61,-31,0
; LWWW Y3BF3A+FR1,65,-24,0
; .long 0
;hgsShawn
; LWWW S3GU4A+FR1,39,-42,1
; LWWW S3GU4A+FR2,47,-26,0
; LWWW S3GU4A+FR4,64,-43,0
; LWWW S3GU4A+FR5,59,-39,0
; LWWW S3DU3A+FR2,60,-42,1
; LWWW S3BF3A+FR1,50,-34,0
; .long 0
;hgsBamBam
; LWWW B3GU4A+FR3,46,-30,0
; LWWW B3GU4A+FR4,50,-24,0
; LWWW B3GU4A+FR6,58,-34,0
; LWWW B3GU4A+FR7,59,-50,0
; LWWW B3DU3A+FR2,60,-33,1
; LWWW B3BF3C+FR5,69,-28,0
; .long 0
;hgsDoink
; LWWW D3DU3A+FR2,41,-36,1
; LWWW D3DU3A+FR3,53,-25,1
; LWWW D3DU3A+FR5,49,-39,1
; LWWW D3DU3A+FR8,55,-47,1
; LWWW D3HT3Z+FR1,56,-34,1
; LWWW D3BF3A+FR2,62,-34,0
; .long 0
;hgsAdam
; .long 0
;hgsLex
; LWWW L3DU3A+FR2,50,-39,1
; LWWW L3DU3A+FR4,33,-18,1
; LWWW L3DU3A+FR6,37,-39,1
; LWWW L3DU3A+FR7,52,-34,1
; LWWW L3DU3A+FR9,65,-39,1
; LWWW L3BF3B+FR2,65,-38,0
; .long 0


******************************************************************************

 SUBR	bam_4_taunt_anim

	.word	ANI_SETMODE,MODE_UNINT
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	3,B4SW4B+FR3
	WL	3,B4SW4B+FR4
	WL	3,B4SW4B+FR5
	WL	3,B4SW4B+FR6
	WL	3,B4SW4B+FR7
	WL	3,B4SW4B+FR8

;	WL	ANI_CODE,set_taunt_bit

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	WL	ANI_CHANGEANIM,bam_stand4_anim
;	.word	ANI_END

*****************************************************************************
*
* Head slams into mat
;From head slam - repeated head slam

 SUBR	bam_break_face2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS

	WL	2,B3RL1A+FR7		;Face down
	.word	ANI_DEBRIS,100,1,-8,12,0	;%chance, tbl index, x,y,z off
	WL	ANI_SET_YVEL,80000h
	WL	4,B3MS3X+FR1
	WL	4,B3MS3X+FR2
	WL	4,B3MS3X+FR3
	.word	ANI_WAITHITGND
	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	.word	ANI_WAITROLL
	WL	3,B3RL1A+FR7		;Face down
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim
	

 SUBR	bam_break_face3_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS

	.word	ANI_DEBRIS,100,1,-8,12,0	;%chance, tbl index, x,y,z off
	WL	3,B3MS3Z+FR3
	WL	ANI_SET_YVEL,078000h
	WL	100,B3MS3Z+FR3
	.word	ANI_WAITHITGND
	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim
	

* Head slams into mat
;From head slam

 SUBR	bam_break_face_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS

	WL	2,B3RL1A+FR7		;Face down
	.word	ANI_DEBRIS,100,1,-8,12,0	;%chance, tbl index, x,y,z off
	WL	ANI_SET_YVEL,40000h
	WL	4,B3MS3X+FR1
	WL	4,B3MS3X+FR2
	WL	4,B3MS3X+FR3
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
;	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS
	WL	4,B3MS3X+FR1
	WL	4,B3MS3X+FR2
	WL	4,B3MS3X+FR3

	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	WL	2,B3RL1A+FR7		;Face down
	.word	ANI_WAITROLL

	WL	ANI_CHANGEANIM,bam_4_faceup_getup_anim

*****************************************************************************
*
* PILE DRIVER

 SUBR	bam_3_pile_driver_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

;Put cool cheers here
;	.word	ANI_CHEER,3
	.word	ANI_ATTACK_ON, AMODE_PUPPET,32,25,42h,21 ;mode,x,y,w,h

;wfkcontpd
	WWL	ANI_WAITHITOPP,4,B3PG3A+FR1
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,wfkmissed

;Check to see if I have tried to pile drive Yokozuna!

;FIX!! Yoko check
;	WL	ANI_CODE,is_this_yoko
;	WL	ANI_IFSTATUS2,wfkyoko_miss

;got him

	.word	ANI_ATTACHZ,0,0,-2		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B3PG3A+FR1,wfkpuppet_tbl,0
	.word	ANI_WAITHITGND
	WWLLW	ANI_SUPERSLAVE2,20,B3PG3A+FR1,wfkpuppet_tbl,0

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR2,wfkpuppet_tbl,1

;	WL	ANI_SET_YVEL,30000h
	WL	ANI_SET_YVEL,70000h
;Float toward the center of ring!
	WL	ANI_CODE,set_xdrift

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR3,wfkpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR4,wfkpuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR5,wfkpuppet_tbl,4

;Mess with the physics!

;	WL	ANI_SET_YVEL,-20000h

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

;	WWLLW	ANI_SUPERSLAVE2,2,B3PG3A+FR5,wfkpuppet_tbl,4	;13
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR3,wfkpuppet_tbl,5
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR4,wfkpuppet_tbl,6
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR5,wfkpuppet_tbl,7
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR6,wfkpuppet_tbl,8
	WWLLW	ANI_SUPERSLAVE2,2,B3PG3A+FR9,wfkpuppet_tbl,9

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,40
	.word	ANI_DAMAGEOPP,D_PILEDRIVER,RD_PILEDRIVER
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	WL	ANI_CODE,CALL_SPECIAL_MOVE
	WL	ANI_CODE,wfkset_opp_xflip

	WL	ANI_SLAVEANIM,wfkrollout_tbl
	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	.word	ANI_DETACH

	WL	20,B3PG3A+FR9
	WLW	ANI_SET_ZVEL,-10000h,AM_ABS
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

;wfkyoko_miss
;;Cause Yoko to stand up out of his head hold and break free
;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
;
;	WL	ANI_CODE,CALL_MISS_YOKO
;
;	WL	3,D3PP3Z+FR1
;	WL	3,D3PP3Z+FR2
;	WL	3,D3PP3Z+FR3
;	WL	3,D3PP3Z+FR4
;	WL	ANI_CODE,wfkbreak
;	WL	ANI_GOTO,wfkcont
;

wfkmissed
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	WL	4,B3PG3A+FR1
	WL	4,B3PG3A+FR2
	WL	4,B3PG3A+FR3
	WL	4,B3PG3A+FR4

wfkcont	WL	ANI_SET_YVEL,30000h

	WL	3,B3PG3A+FR5
	.word	ANI_OFFSET,0,26,0			;x,y,z

	WL	4,B4CD3A+FR3
	WL	4,B4CD3A+FR4
	WL	4,B4CD3A+FR5

;	WL	ANI_SET_YVEL,-20000h

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

;Maybe do a bounce

	;impact
;	WL	ANI_CODE,SMALL_BOUNCE
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,30

	WL	4,B4CD3A+FR6

;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
;	WL	18,D4HS3B+FR8

	WL	4,B4CD3A+FR6

	WLW	ANI_SET_ZVEL,-10000h,AM_ABS

	WL	3,B3PG3A+FR9
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

wfkset_opp_xflip
	move	*a13(ATTACH_PROC),a0,L

	move	*a0(OBJ_CONTROL),a14
	xori	M_FLIPH,a14
	move	a14,*a0(OBJ_CONTROL)

	rets

;Check to see if I have tried to pile drive Yokozuna!

; SUBR	is_this_yoko
;
;	move	*a13(ATTACH_PROC),a0,L
;	move	*a0(WRESTLERNUM),a0
;	cmpi	3,a0
;	jrnz	wfkok
;
;;Yes, this is Yoko!
;
;	move	*a13(ANIMODE),a1
;	ori	MODE_STATUS2,a1
;	move	a1,*a13(ANIMODE)
;	rets
;wfkok
;	move	*a13(ANIMODE),a1
;	andni	MODE_STATUS2,a1
;	move	a1,*a13(ANIMODE)
;	rets
;
;;For Yoko breaking free
;wfkbreak
;	move	*a13(ATTACH_PROC),a2,L
;	.ref	yok_3_head_held_brk_anim
;	movi	yok_3_head_held_brk_anim,a0
;;a0 = * animation script
;;a2 = * wrestler process
;	.ref	change_anim_anim
;	calla	change_anim_anim
;	rets


******************************************************************************
*
* PILE DRIVER (combo version)

 SUBR	bam_combo_pile_driver_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL

;Put cool cheers here
	.word	ANI_ATTACK_ON, AMODE_PUPPET,32,25,42h,21 ;mode,x,y,w,h

	WWL	ANI_WAITHITOPP,4,B3PG3A+FR1
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,wfkmissedxc

;got him
	.word	ANI_INC_COMBO

	.word	ANI_ATTACHZ,0,0,-2		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	.word	ANI_SOUND,82h			;Effort grunt

	WWLLW	ANI_SUPERSLAVE2,4,B3PG3A+FR1,wfkpuppet_tbl,0
	.word	ANI_WAITHITGND
	WWLLW	ANI_SUPERSLAVE2,20,B3PG3A+FR1,wfkpuppet_tbl,0

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR2,wfkpuppet_tbl,1

	WL	ANI_SET_YVEL,70000h
;Float toward the center of ring!
	WL	ANI_CODE,set_xdrift

	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR3,wfkpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR4,wfkpuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,5,B3PG3A+FR5,wfkpuppet_tbl,4

;Mess with the physics!

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR3,wfkpuppet_tbl,5
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR4,wfkpuppet_tbl,6
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR5,wfkpuppet_tbl,7
	WWLLW	ANI_SUPERSLAVE2,2,B4CD3A+FR6,wfkpuppet_tbl,8
	WWLLW	ANI_SUPERSLAVE2,2,B3PG3A+FR9,wfkpuppet_tbl,9

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,40
	.word	ANI_DAMAGEOPP,D_PILEDRIVER,RD_PILEDRIVER

	WL	ANI_CODE,CALL_SPECIAL_MOVE
	WL	ANI_CODE,wfkset_opp_xflip

	WL	ANI_SLAVEANIM,wfkrollout_tbl
	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	.word	ANI_DETACH

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	20,B3PG3A+FR9
	WLW	ANI_SET_ZVEL,-10000h,AM_ABS
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

wfkmissedxc
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	WL	4,B3PG3A+FR1
	WL	4,B3PG3A+FR2
	WL	4,B3PG3A+FR3
	WL	4,B3PG3A+FR4

	WL	ANI_SET_YVEL,30000h

	WL	3,B3PG3A+FR5
	.word	ANI_OFFSET,0,26,0			;x,y,z

	WL	4,B4CD3A+FR3
	WL	4,B4CD3A+FR4
	WL	4,B4CD3A+FR5


	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

;Maybe do a bounce

	;impact
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,30

	WL	4,B4CD3A+FR6


	WL	4,B4CD3A+FR6

	WLW	ANI_SET_ZVEL,-10000h,AM_ABS

	WL	3,B3PG3A+FR9
	WL	3,B3PG3A+FR10
	WL	3,B3PG3A+FR11
	WL	3,B3PG3A+FR12

	.word	ANI_FACEDOWN

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

wfkpuppet_tbl
 .long wfkBret
 .long wfkRazor
 .long wfkTaker
 .long wfkYokozuna
 .long wfkShawn
 .long wfkBamBam
 .long wfkDoink
 .long wfkAdam
 .long wfkLex

	.ref	H3BF3A,H3PP3X
	.ref	R3BF3A,R3GP3Z
	.ref	U4BF3Z,U3PP3X,U3GP3X
	.ref	Y3BF3A,Y3PP3Q,Y3FD3N
	.ref	S3BF3A,S3GP3X,S3OS3X,S3FD3X
 	.ref	B4AM4A,B3PP3Q
 	.ref	D3BF3A,D3PD3Z
	.ref	L3BF3B,L3GP3Z,L3FH3A,L3FD3B

wfkBret
 LWWW H3BF3A+FR3,38,-13,0
 LWWW H3PP3X+FR1,18,-32,0
 LWWW H3PP3X+FR2,9,7,0
 LWWW H3PP3X+FR3,17,52,0
 LWWW H3PP3X+FR6,18,72,0
 LWWW H3PP3X+FR6,28,74,0
 LWWW H3PP3X+FR6,34,71,0
 LWWW H3PP3X+FR6,43,67,0
 LWWW H3PP3X+FR7,47,-9,0
 LWWW H3PP3X+FR8,42,-29,0
 .long 0
wfkRazor
 LWWW R3BF3A+FR9,39,-18,0
 LWWW R3GP3Z+FR1,25,-29,0
 LWWW R3GP3Z+FR2,21,-22,0
 LWWW R3GP3Z+FR4,34,58,0
 LWWW R3GP3Z+FR5,32,74,0
 LWWW R3GP3Z+FR5,42,77,0
 LWWW R3GP3Z+FR5,45,76,0
 LWWW R3GP3Z+FR5,51,67,0
 LWWW R3GP3Z+FR7,48,9,0
 LWWW R3GP3Z+FR8,40,-33,0
 .long 0
wfkTaker
 LWWW U4BF3Z+FR1,37,-12,0
 LWWW U3PP3X+FR1,23,-25,1
 LWWW U3PP3X+FR2,24,-15,1
 LWWW U3PP3X+FR3,20,17,1
 LWWW U3PP3X+FR5,25,60,1
 LWWW U3PP3X+FR6,38,86,1
 LWWW U3PP3X+FR6,41,86,1
 LWWW U3PP3X+FR6,47,77,1
 LWWW U3GP3X+FR1,52,-18,1
; with a Y beneath the mat, which promptly results in his Y pos being
; set to match his GROUND_Y and his Yvel being zeroed.  This sucks.
 LWWW U3GP3X+FR2,51,-41+5,1
 .long 0
wfkYokozuna
 LWWW Y3BF3A+FR11,46,-7,0
 LWWW Y3PP3Q+FR1,24,-22,0
 LWWW Y3PP3Q+FR3,28,-9,0
 LWWW Y3PP3Q+FR4,36,20,0
 LWWW Y3PP3Q+FR6,24,40,0
 LWWW Y3PP3Q+FR7,36,49,0
 LWWW Y3PP3Q+FR7,36,51,0
 LWWW Y3PP3Q+FR7,43,34,0
 LWWW Y3FD3N+FR2,52,-8,0
 LWWW Y3FD3N+FR3,48,-9,0
 .long 0
wfkShawn
 LWWW S3BF3A+FR5,29,-27,0
 LWWW S3GP3X+FR1,30,-31,0
 LWWW S3GP3X+FR2,23,-19,0
 LWWW S3GP3X+FR3,28,19,0
 LWWW S3GP3X+FR4,22,65,0
 LWWW S3OS3X+FR8,43,66,1
 LWWW S3OS3X+FR8,43,66,1
 LWWW S3OS3X+FR8,47,57,1
 LWWW S3FD3X+FR2,57,-2,0
 LWWW S3GP3X+FR6,49,-30,0
 .long 0
wfkBamBam
 LWWW B4AM4A+FR5,41,-13,0
 LWWW B3PP3Q+FR1,23,-28,0
 LWWW B3PP3Q+FR2,23,-7,0
 LWWW B3PP3Q+FR3,29,33,0
 LWWW B3PP3Q+FR5,34,66,0
 LWWW B3PP3Q+FR6,35,74,0
 LWWW B3PP3Q+FR6,38,74,0
 LWWW B3PP3Q+FR6,46,68,0
 LWWW B3PP3Q+FR7,54,1,0
 LWWW B3FD3C+FR1,44,-23,0
 .long 0
wfkDoink
 LWWW D3BF3A+FR1,40,-14,0
 LWWW D3PD3Z+FR1,29,-36,1
 LWWW D3PD3Z+FR2,24,-12,1
 LWWW D3PD3Z+FR3,26,23,1
 LWWW D3PD3Z+FR4,19,63,1
 LWWW D3PD3Z+FR6,45,66,1
 LWWW D3PD3Z+FR6,47,62,1
 LWWW D3PD3Z+FR6,52,57,1
 LWWW D3PD3Z+FR8,52,-17,1
 LWWW D3PD3Z+FR9,48,-36,1
 .long 0
wfkAdam
 .long 0
wfkLex
 LWWW L3BF3B+FR1,27,-21,0
 LWWW L3GP3Z+FR1,25,-29,0
 LWWW L3GP3Z+FR2,23,-13,0
 LWWW L3GP3Z+FR4,29,36,0
 LWWW L3GP3Z+FR6,31,63,0
 LWWW L3GP3Z+FR6,42,64,0
 LWWW L3GP3Z+FR6,44,64,0
 LWWW L3GP3Z+FR6,53,54,0
 LWWW L3FH3A+FR6,51,-5,0
 LWWW L3FD3B+FR1,49,-30,0
 .long 0


wfkrollout_tbl
	REFLONG	hrt_break_neck2_anim,rzr_break_neck2_anim
	REFLONG	und_break_neck2_anim
	REFLONG	yok_break_neck2_anim
	REFLONG	shn_break_neck2_anim,bam_break_neck2_anim
	REFLONG	dnk_break_neck2_anim
	.long	0
	REFLONG	lex_break_neck2_anim

*****************************************************************************

	.bss	mroopp_xvel,32

 SUBR	bam_3_fake_hold_anim
;Head hold when standing next to player
;No collisions possible

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;mro4 grab to head hold

	.word	ANI_STARTATTACK,AT_PUPPET,8

	WL	2,B4GH3B+FR1
	WL	2,B4GH3B+FR2
	WL	1,B4GH3B+FR3
	WL	1,B4GH3B+FR4
	WL	7,B4GH3B+FR5
	WL	ANI_GOTO,mromissed

 SUBR	bam_3_head_hold2_anim
;Head hold when standing next to player
;No collisions possible

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;mro4 grab to head hold

	.word	ANI_STARTATTACK,AT_PUPPET,8

	WL	2,B4GH3B+FR1
	WL	2,B4GH3B+FR2
	WL	1,B4GH3B+FR3
	WL	1,B4GH3B+FR4
	.word	ANI_ATTACK_ON, AMODE_PUPPET_HDGRAB,28,82,59,21 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,7,B4GH3B+FR5
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS2,mromissed
	WL	ANI_IFBLOCKED,mromissedb

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	WL	ANI_IFBLOCKED,mromissed
	WL	ANI_GOTO,mrogothim

 SUBR	bam_3_head_hold_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;mro4 grab to head hold
	.word	ANI_STARTATTACK,AT_PUPPET,12

	WL	2,B4GH3B+FR1
	WL	2,B4GH3B+FR2
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
;	LEAPATOPP 6,999,65,45,90000h,TGT_HEAD,72,105,0
	LEAPATOPP 9,999,40,45,90000h,TGT_HEAD,72,105,0

	WL	2,B4GH3B+FR3
	WL	3,B4GH3B+FR4
	.word	ANI_ATTACK_ON, AMODE_PUPPET,28,82,59,21 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,6,B4GH3B+FR5
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS2,mromissed

	WL	ANI_IFBLOCKED,mromissedb

mrogothim
;got him

	.word	ANI_CLR_BUTCOUNT
	WL	ANI_CODE,head_grab_time

	.word	ANI_ATTACHZ,0,0,-4		;x & y don't matter.
	WL	ANI_CODE,DO_NONO
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	WWLLW	ANI_SUPERSLAVE2,1,B4GH3B+FR5,mropuppet_tbl,0

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim

	WWLLW	ANI_SUPERSLAVE2,4,B4GH3B+FR5,mropuppet_tbl,0

	WWLLW	ANI_SUPERSLAVE2,4,B4GH3B+FR6,mropuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,4,B4GH3B+FR7,mropuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,4,B4GH3D+FR5,mropuppet_tbl,3

	.word	ANI_SETPLYRMODE,MODE_HEADHOLD
	WL	ANI_SLAVEANIM,mroheadheld_tbl

	WL	1,B4GH3D+FR5

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

mromissed
	WL	ANI_CODE,CALL_MISSES

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	5,B4GH3B+FR5
	WL	3,B4GH3B+FR4
	WL	3,B4GH3B+FR3

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

mromissedb
	WL	2,B4GH3B+FR5
	.word	ANI_ZEROVELS
	WL	ANI_SET_YVEL,30000h

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	5,B4GH3B+FR5
	WL	3,B4GH3B+FR4
	WL	3,B4GH3B+FR3

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

mropuppet_tbl
 .long mroBret
 .long mroRazor
 .long mroTaker
 .long mroYokozuna
 .long mroShawn
 .long mroBamBam
 .long mroDoink
 .long mroAdam
 .long mroLex

	.ref	H2AH3A,H3HB3A,H3BF3A
	.ref	R2AH2D,R3HB3A,R3BF3A
	.ref	U4BF3A,U4BF3Z,U4AM4C
	.ref	Y3BF3A,Y3LB3A
	.ref	S4AH3D,S4BF3A
;	.ref	B4BF3A,B3HB3A,B3BF3C
	.ref	D3AK3A,D3BF3A
	.ref	L4AH4B,L3BF3A,L3BF3B
mroBret
 LWWW H4AH3A+FR1,76,11,0
 LWWW H3HB3A+FR3,75,-15,0
 LWWW H3HB3A+FR2,65,-19,0
 LWWW H3BF3A+FR1,52,-34,0
 .long 0
mroRazor
 LWWW R4AH4C+FR3,76,10,0
 LWWW R3HB3A+FR3,81,-16,0
 LWWW R3HB3A+FR2,78,-29,0
 LWWW R3BF3A+FR1,63,-36,0
 .long 0
mroTaker
 LWWW U4AH3A+FR2,66,20,0
 LWWW U4BF3A+FR2,68,-2,0
 LWWW U4BF3A+FR3,42,-16,0
 LWWW U4BF3Z+FR5,58,-15,0
 .long 0
mroYokozuna
 LWWW Y4AE4A+FR2,86,1,0
 LWWW Y4AM4A+FR1,88,-13,0
 LWWW Y4AM4A+FR2,79,-18,0
 LWWW Y3BF3A+FR1,60,-24,0
 .long 0
mroShawn
 LWWW S4AH3D+FR5,74,0,0
 LWWW S4AH3D+FR1,66,-10,0
 LWWW S4BF3A+FR2,65,-21,0
 LWWW S3BF3A+FR1,45,-35,0
 .long 0
mroBamBam
 LWWW B4AH4A+FR1,68,5,0
 LWWW B4BF3A+FR1,77,-4,0
 LWWW B3HB3A+FR2,67,-32,0
 LWWW B3BF3C+FR5,57,-28,0
 .long 0
mroDoink
 LWWW D3AH3B+FR1,62,7,0
 LWWW D3AK3A+FR3,61,-5,0
 LWWW D3AK3A+FR2,73,-18,0
 LWWW D3BF3A+FR2,55,-34,0
 .long 0
mroAdam
 .long 0
mroLex
 LWWW L4AH4B+FR3,66,3,0
 LWWW L3BF3A+FR1,74,-8,1
 LWWW L3BF3A+FR2,71,-22,1
 LWWW L3BF3B+FR5,54,-32,0
 .long 0


mroheadheld_tbl
	REFLONG	hrt_3_head_held_anim
	REFLONG	rzr_3_head_held_anim
	REFLONG	und_3_head_held_anim
	REFLONG	yok_3_head_held_anim
	REFLONG	shn_3_head_held_anim
	REFLONG	bam_3_head_held_anim
	REFLONG	dnk_3_head_held_anim
	.long	0
	REFLONG	lex_3_head_held_anim


*****************************************************************************
*
* NECKBREAKER

 SUBR	bam_neckbreaker2_anim
;Button charge
;Standing no vel

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_STARTATTACK,AT_PUPPET,5
	WL	2,B3PG3A+FR1
	.word	ANI_ATTACK_ON, AMODE_PUPPET,0,15,60,41 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,22,B3PG3A+FR1
	.word	ANI_ATTACK_OFF
	WL	2,B3PG3A+FR1
	WL	ANI_IFNOTSTATUS2,hremissed
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFBLOCKED,hremissedb

	WL	ANI_GOTO,hregothim

 SUBR	bam_neckbreaker_run_anim
;Button charge released while running
;Sliding neck breaker

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.ref	slaveanim_tbl
	WLWW	ANI_SHADOWTRAIL,BAMFRE_P,3,12	;pal,rate,lifespan

	.word	ANI_STARTATTACK,AT_PUPPET,8

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,70,70,40,90000h,TGT_CHEST,40,0,0
	WL	ANI_CODE,no_bk_xvel
	WL	ANI_SET_YVEL,0000h
	WL	2,B3PG3A+FR1

	.word	ANI_ATTACK_ON, AMODE_PUPPET,0,15,55,41 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,12,B3PG3A+FR1
	.word	ANI_ZERO_XZVELS
	WL	4,B3PG3A+FR1
	.word	ANI_ATTACK_OFF
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFNOTSTATUS2,hremissed
	WL	ANI_IFBLOCKED,hremissedb

	WL	ANI_GOTO,hregothim

 SUBR	bam_neckbreaker_anim
;From head hold move
;From grabfling attempt

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h


;Do this to setup attach_proc
;Also allow misses!

	.word	ANI_OFFSET,15,0,0	;x,y,z
	.word	ANI_ATTACK_ON, AMODE_PUPPET,32,15,55,41 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,4,B3DD3C+FR1
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS2,hremissed
	WL	ANI_IFBLOCKED,hremissed

;Check to see if I have tried to pile drive Yokozuna!
hregothim
	.word	ANI_SOUND,82h			;Effort grunt

	.word	ANI_ATTACHZ,0,0,-2		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST	;can go through ground
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

	.word	ANI_ADD_MOVE,MOVE_C_7,2,2

	.word	ANI_SETOPP_PLYRMODE,MODE_NORMAL

	WL	ANI_SLAVEANIM,slaveanim_tbl
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR1,hrepuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR2,hrepuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR3,hrepuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR4,hrepuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR5,hrepuppet_tbl,4
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR6,hrepuppet_tbl,5

	WWL	ANI_SETLONG,OBJ_GRAVITY,0c000h
	WL	ANI_SET_YVEL,80000h

	.word	ANI_OFFSET,0,72,0	;x,y,z
	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR7,hrepuppet_tbl,6
;do message

	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR9,hrepuppet_tbl,7
	.word	ANI_WAITHITGND
	.word	ANI_ZERO_XZVELS
	.word	ANI_ATTACHZ,0,0,2		;put opp in front of attacker
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY

;impact
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,40
	.word	ANI_DAMAGEOPP,D_NECKBRKR,RD_NECKBRKR
	WL	ANI_CODE,CALL_SPECIAL_MOVE

	WWLLW	ANI_SUPERSLAVE2,4,B3DD3C+FR10,hrepuppet_tbl,8

	WL	ANI_XFLIP_TBL,hrexflip_tbl
	WL	ANI_SLAVEANIM,hreslambounce_tbl
	WLLL	ANI_SETOPPVELS,0,60000h,0	;x,y,z vels

	.word	ANI_DETACH
	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP

	WL	4,B3DD3C+FR12
	WL	ANI_CODE,hrezero_butn

	.word	ANI_SHADOWTRAIL,0	;off

	WL	ANI_CHANGEANIM,bam_faceup_getup_anim

hremissedb
	.word	ANI_SHADOWTRAIL,0	;off
	WL	25,B3PG3A+FR1
hremissed
	.word	ANI_SHADOWTRAIL,0	;off
	WL	15,B3PG3A+FR1
	WL	ANI_CODE,hrezero_butn

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

hrezero_butn
;Force player to start holding his button down starting at the end
;of the current buzz sequence.

	move	*a13(PLYRNUM),a0
	X16	a0
	addi	powerp_dtime1,a0
	clr	a14
	move	a14,*a0
	rets

hrexflip_tbl
	.word	0 ;bret
	.word	0 ;razor
	.word	0 ;taker
	.word	1 ;yoko
	.word	0 ;shawn
	.word	0 ;bam
	.word	0 ;doink
	.word	1 ;spare
	.word	0 ;lex

hreslambounce_tbl
	REFLONG	hrt_slambounce2_anim	;bret
	REFLONG	rzr_slambounce2_anim	;razor
	REFLONG	und_slambounce2_anim	;taker
	REFLONG	yok_slambounce2_anim	;yoko
	REFLONG	shn_slambounce2_anim	;shawn
	REFLONG	bam_slambounce2_anim	;bam
	REFLONG	dnk_slambounce2_anim	;doink
	REFLONG	und_slambounce2_anim	;spare
	REFLONG	lex_slambounce2_anim	;lex

hrepuppet_tbl
 .long hreBret
 .long hreRazor
 .long hreTaker
 .long hreYokozuna
 .long hreShawn
 .long hreBamBam
 .long hreDoink
 .long hreAdam
 .long hreLex

hreBret
 LWWW H3DD3B+FR1,59,-29,1
 LWWW H3DD3B+FR2,65,-22,1
 LWWW H3DD3B+FR3,52,-23,1
 LWWW H3DD3B+FR4,44,-13,1
 LWWW H3UC3X+FR2,26,-19,1
 LWWW H3UC3X+FR3,33,-15,1
 LWWW H3UC3X+FR4,53,-9,1
 LWWW H3UC3X+FR4,98,-11,1
 LWWW H3UC3Z+FR10,86,-32,1
 .long 0
hreRazor
 LWWW R3DD3C+FR1,62,-27,1
 LWWW R3DD3C+FR2,61,-9,1
 LWWW R3DD3C+FR3,56,-9,1
 LWWW R3DD3C+FR6,54,-7,1
 LWWW R3FD3B+FR2,35,-21,1
 LWWW R3FD3B+FR3,43,-14,1
 LWWW R3FD3B+FR4,59,-10,1
 LWWW R3FD3B+FR5,99,-8,1
 LWWW R3AM3X+FR1,90,-55,1
 .long 0
hreTaker
 LWWW U3DD3B+FR1,67,-26,1
 LWWW U3DD3B+FR2,65,-4,1
 LWWW U3DD3B+FR3,49,-8,1
 LWWW U3DD3B+FR4,47,-11,1
 LWWW U3DD3B+FR6,36,-28,1
 LWWW U3FD3X+FR3,39,-18,0
 LWWW U3FD3X+FR4,51,-7,0
 LWWW U3FD3X+FR5,92,13,0
 LWWW U3DD3X+FR9,95,-41,1
 .long 0
hreYokozuna
 LWWW Y3FD3B+FR2,64,-21,1
 LWWW Y3FD3B+FR3,53,-14,1
 LWWW Y3FD3B+FR4,35,-8,1
 LWWW Y3FD3B+FR5,42,10,1
 LWWW Y3FD3A+FR4,27,2,1
 LWWW Y3CP3B+FR2,44,-7,0
 LWWW Y3CP3B+FR3,63,-3,0
 LWWW Y3CP3B+FR4,107,-7,0
 LWWW Y3FD3Z+FR7,87,-27,1
 .long 0
hreShawn
 LWWW S3DD3B+FR1,64,-24,1
 LWWW S3DD3B+FR2,58,-7,1
 LWWW S3DD3B+FR3,43,-14,1
 LWWW S3DD3B+FR5,46,-14,1
 LWWW S3UC3X+FR2,19,-25,1
 LWWW S3UC3X+FR3,38,-26,1
 LWWW S3UC3X+FR4,55,-24,1
 LWWW S3UC3X+FR5,99,-6,1
 LWWW S3UC3Z+FR8,87,-31,1
 .long 0
hreBamBam
 LWWW B3DD3D+FR1,65,-25,1
 LWWW B3DD3D+FR2,62,-4,1
 LWWW B3DD3D+FR3,49,3,1
 LWWW B3DD3D+FR4,47,8,1
 LWWW B3DD3D+FR5,34,-3,1
 LWWW B3DD3D+FR6,45,5,1
 LWWW B4UC3B+FR3,61,-17,1
 LWWW B3CP3B+FR1,112,-13,0
 LWWW B4UC3Z+FR8,96,-33,1
 .long 0
hreDoink
 LWWW D3DD3C+FR1,60,-28,1
 LWWW D3DD3C+FR2,58,-12,1
 LWWW D3DD3C+FR3,45,-3,1
 LWWW D3DD3C+FR4,43,4,1
 LWWW D3UC3A+FR3,22,-9,1
 LWWW D3UC3A+FR4,37,-6,1
 LWWW D3UC3A+FR5,54,-6,1
 LWWW D3UC3A+FR6,105,-6,1
 LWWW D3SA3X+FR2,96,-50,1
 .long 0
hreAdam
 .long 0
hreLex
 LWWW L3DD3A+FR1,59,-29,1
 LWWW L3DD3A+FR2,59,-8,1
 LWWW L3DD3A+FR3,38,-21,1
 LWWW L3UC3X+FR2,47,-15,1
 LWWW L3UC3X+FR3,32,-28,1
 LWWW L3CP3X+FR2,48,-23,0
 LWWW L3CP3X+FR3,68,-8,0
 LWWW L3CP3X+FR4,116,-1,0
 LWWW L3UC3Z+FR10,90,-33,1
 .long 0

*****************************************************************************
*
* THROW NAPALM ON GROUNDED OPPONENT

 SUBR	bam_2_napalm_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WL	2,B1TT5Z+FR2
	WL	2,B1TT5Z+FR3
	WL	ANI_GOTO,fumcont

 SUBR	bam_4_napalm_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

fumcont	WL	4,B4NP3Z+FR1
	WL	4,B4NP3Z+FR2
	WL	4,B4NP3Z+FR3
	WL	4,B4NP3Z+FR4
	WL	4,B4NP3Z+FR5
	WL	4,B4NP3Z+FR6
	WL	4,B4NP3Z+FR7

	.word	ANI_ATTACK_ON,AMODE_NAPALM,12,-6,58,30
	WL	4,B4NP3Z+FR8
	.word	ANI_ATTACK_OFF
	WL	4,B4NP3Z+FR9
	WL	4,B4NP3Z+FR10

	.word	ANI_FACEDOWN

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

;
;*****************************************************************************
;*
;* CHAIR STUFF
;
;	.ref	CHAIR_SWING
;
; SUBR	bam_pkup_chair_anim
;
;	.word	ANI_SETMODE,MODE_UNINT | MODE_NOAUTOFLIP
;	.word	ANI_ZEROVELS
;	.word	ANI_SETSPEED,100h
;
;fumlp
;	WL	4,B4WA4D+FR1
;	WL	4,B4WA4D+FR2
;	WL	4,B4WA4D+FR3
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR1,51,-5,1 ;image, x,y,zoff
;	WL	4,B4WA4D+FR4
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR1,50,13,1 ;image, x,y,zoff
;	WL	4,B4WA4D+FR5
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR1,51,30,1 ;image, x,y,zoff
;	WL	4,B4WA4D+FR6
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR2,56,85,1 ;image, x,y,zoff
;	WL	4,B4CF4Z+FR1
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR3,44,133,1 ;image, x,y,zoff
;	WL	4,B4CF4Z+FR2
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR4,-2,155,1 ;image, x,y,zoff
;	WL	4,B4CF4Z+FR3
;
;; .word ANI_SINGLESTEP
;
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR4,-30,145,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR2
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR5,-55,100,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR3
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR6,-33,139,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR4
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR8,61,108,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR5
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR9,71,34,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR6
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR10,41,8,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR7
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR9,77,51,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR8
;	WLWWW	ANI_ATTCHIMAGE2,CHAIR_SWING+FR8,62,127,1 ;image, x,y,zoff
;	WL	4,B4WA4C+FR9
;
;; .word ANI_SINGLESTEP
;	WLW	ANI_ATTCHIMAGE,0,0
;
;	WL	ANI_GOTO,fumlp
;

*****************************************************************************

	.end

