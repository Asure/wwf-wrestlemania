TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                    **************************************************************
       2                    *
       3                    * Software:             Jamie Rivett
       4                    * Initiated:            8/8/94
       5                    *
       6                    * COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
       7                    *
       8                    **************************************************************
       9                    
      10                            .file   "react9.asm"
      12                            .width  132
      13                            .option b,d,l,t
      14                            .mnolist
      15                    
      16                    
      17                            .include        "macros.h"
      18                            .include        "mproc.equ"             ;Mproc equates
      19                            .include        "display.equ"           ;Display proc equates
      20                            .include        "gsp.equ"               ;Gsp asm equates
      21                            .include        "sys.equ"
      22                            .include        "game.equ"
      23                            .include        "plyr.equ"
      24                            .include        "anim.equ"
      25                            .include        "audit.equ"
      26                            .include        "sound.h"
      27                            .include        "ring.equ"
      28                            .include        "lifebar.h"
      29                    
      30                    
      31                    ******************************************************************************
      32                    * EXTERNAL REFERENCES
      33                    
      34                            .ref    fall_back_tbl,head_hit_dizzy_tbl,head_hit_tbl,head_hit2_tbl
      35                            .ref    block_hit_flail,triple_sound,hit_damage_pending
      36                            .ref    change_anim1a,wres_collis_off,block_hit
      37                            .ref    CALL_FACE_HIT,hitonground_tbl
      38                            .ref    knee_hit_tbl,burn_tbl
      39                    
      40                    ******************************************************************************
      41                    * EXTERNAL ANIM SEQUENCES
      42                    
      43                    ;BAM BAM
      44                    ;DOINK
      45                    ;BRET
      46                    ;LEX
      47                    ;RAZOR
      48                    ;SHAWN
      49                    ;TAKER
      50                    ;YOKO
      51                    
      52                    
      53                    ******************************************************************************
      54                    * SYMBOLS DEFINED IN THIS FILE
      55                    
      56                    ******************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    2

      57                    * EQUATES FOR THIS FILE
      58                    
      59                    
      60                    *****************************************************************************
      61                    ;AMODE_RSLASH   40
      62 00000000            SUBR   hit_rslash
      63                    
      64 00000000     b5a1          move    *a13(PLYRMODE),a1
         00000010     05c0  
      65 00000020     0b41          cmpi    MODE_BLOCK,a1
         00000030     fff8  
      66 00000040     cb04          jrnz    cpjonoblock
      67                    
      68                    ;       move    *a13(FACING_DIR),a0             ;check for hit
      69                    ;       move    *a13(NEW_FACING_DIR),a1         ;from behind
      70                    ;       and     a0,a1
      71                    ;       andi    MOVE_LEFT|MOVE_RIGHT,a1
      72                    ;       jrz     cpjonoblock
      73                    
      74 00000050     0d5f          calla   block_hit_flail
         00000060 00000000! 
      75 00000080     0960          rets
      76                    
      77 00000090           cpjonoblock
      78                    
      79                    ;All of the damage amounts need to be in lookup tables linked to the wrestler
      80                    ;who actually struck the blow.
      81                    
      82 00000090     0d5f          CALLA   CALL_FACE_HIT
         000000a0 00000000! 
      83                    
      84 000000c0                   GETLIFE
      85 00000110     ca57          jrz     cpjoisdead
      86                    
      87                    ;       calla   create_damage_points
      88                    
      89 00000120                   WRSNDX  RSLASH_L1,RSLASH_L2
      90                    
      91                    ;       move    *a13(PLYR_DIZZY),a0
      92                    ;       jrnz    cpjodiz
      93                    ;
      94                    ;       calla   check_dizzy
      95                    ;       jrz     cpjonot_dizzy
      96                    ;
      97                    ;       movi    5*TSEC,a0
      98                    ;       move    a0,*a13(GETUP_TIME)
      99                    ;
     100                    ;cpjodiz
     101                    ;       FACE24TBL head_hit_dizzy_tbl
     102                    ;       calla   change_anim1a
     103                    ;
     104                    ;
     105                    ;cpjonot_dizzy
     106                    ;
     107                    ;       calla   inc_burnout
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    3

     108                    
     109 00000460                   SETMODE NORMAL
     110                    
     111 00000510           cpjodo_hit
     112 00000510     b5ae          move    *a13(OBJ_YPOSINT),a14
         00000520     0130  
     113 00000530     b5a0          move    *a13(GROUND_Y),a0
         00000540     0570  
     114 00000550     440e          sub     a0,a14
     115 00000560     0b4e          cmpi    20,a14
         00000570     ffeb  
     116 00000580     c514          jrge    cpjofall_back
     117                    
     118                            ;normal punch
     119 00000590                   FACE24TBL head_hit2_tbl
     120 00000660     0d5f          calla   change_anim1a
         00000670 00000000! 
     121 00000690           cpjoisdead
     122 00000690     0d5f          calla   wres_collis_off
         000006a0 00000000! 
     123 000006c0     0960          rets
     124                    
     125 000006d0           cpjofall_back
     126 000006d0                   FACETBL fall_back_tbl
     127                    
     128 00000740     0d5f          calla   change_anim1a
         00000750 00000000! 
     129 00000770     0d5f          calla   wres_collis_off
         00000780 00000000! 
     130                    
     131 000007a0     09e2          movi    [3,0],a2
         000007b0 00030000  
     132 000007d0     b540          move    *a10(OBJ_XPOSINT),a0
         000007e0     0110  
     133 000007f0     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000800     0110  
     134 00000810     4801          cmp     a0,a1                   ;offx - defx
     135 00000820     c701          jrgt    cpjofall_right          ;attacker on left
     136 00000830     03a2          neg     a2
     137 00000840           cpjofall_right
     138 00000840     b24d          move    a2,*a13(OBJ_XVEL),L
         00000850     02d0  
     139                    
     140 00000860     0960          rets
     141                    
     142                    *****************************************************************************
     143                    ;AMODE_HEADDSLASH       41
     144                    
     145 00000870            SUBR   hit_headdslash
     146                    
     147 00000870                   WRSNDX  RSLASH_L1,RSLASH_L2
     148                    
     149 00000bb0                   GETLIFE
     150 00000c00     ca27          jrz     lswxisdead
     151                    
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    4

     152                    
     153 00000c10                   FACE24TBL knee_hit_tbl
     154 00000ce0     0d5f          calla   change_anim1a
         00000cf0 00000000! 
     155                    
     156 00000d10     09e0          movi    2C000h,a0
         00000d20 0002c000  
     157 00000d40     b20d          move    a0,*a13(OBJ_YVEL),L
         00000d50     02f0  
     158 00000d60     5600          clr     a0
     159 00000d70     b20d          move    a0,*a13(OBJ_XVEL),L
         00000d80     02d0  
     160                    
     161                            ;move a little bit toward the attacker
     162 00000d90     18a2          movk    5,a2
     163 00000da0     b540          move    *a10(OBJ_XPOSINT),a0
         00000db0     0110  
     164 00000dc0     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000dd0     0110  
     165 00000de0     4801          cmp     a0,a1
     166 00000df0     c601          jrle    lswxok
     167 00000e00     03a2          neg     a2
     168 00000e10           lswxok
     169 00000e10     4041          add     a2,a1
     170 00000e20     b02d          move    a1,*a13(OBJ_XPOSINT)
         00000e30     0110  
     171                    
     172 00000e40     0d5f          calla   wres_collis_off
         00000e50 00000000! 
     173 00000e70     0960          rets
     174                    
     175 00000e80           lswxisdead
     176                    
     177 00000e80                   FACETBL fall_back_tbl
     178 00000ef0     0d5f          calla   change_anim1a
         00000f00 00000000! 
     179                    
     180 00000f20     09e2          movi    [4,0],a2
         00000f30 00040000  
     181 00000f50     b540          move    *a10(OBJ_XPOSINT),a0
         00000f60     0110  
     182 00000f70     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000f80     0110  
     183 00000f90     4801          cmp     a0,a1                   ;offx - defx
     184 00000fa0     c701          jrgt    lswxgo_rgt                      ;attacker on left
     185 00000fb0     03a2          neg     a2
     186 00000fc0           lswxgo_rgt
     187 00000fc0     b24d          move    a2,*a13(OBJ_XVEL),L
         00000fd0     02d0  
     188                    
     189 00000fe0     0d5f          calla   wres_collis_off
         00000ff0 00000000! 
     190 00001010     0960          rets
     191                    
     192                    *****************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    5

     193                    ;AMODE_HEADUSLASH       42
     194                    
     195 00001020            SUBR   hit_headuslash
     196                    
     197 00001020                   WRSNDX  RSLASH_L1,RSLASH_L2
     198                    
     199 00001360                   GETLIFE
     200 000013b0     ca1c          jrz     svmcisdead
     201                    
     202 000013c0                   FACE24TBL knee_hit_tbl
     203 00001490     0d5f          calla   change_anim1a
         000014a0 00000000! 
     204                    
     205 000014c0     09e0          movi    40000h,a0
         000014d0 00040000  
     206 000014f0     b20d          move    a0,*a13(OBJ_YVEL),L
         00001500     02f0  
     207 00001510     5600          clr     a0
     208 00001520     b20d          move    a0,*a13(OBJ_XVEL),L
         00001530     02d0  
     209                    
     210 00001540     0d5f          calla   wres_collis_off
         00001550 00000000! 
     211 00001570     0960          rets
     212                    
     213 00001580           svmcisdead
     214                    
     215 00001580                   FACETBL fall_back_tbl
     216 000015f0     0d5f          calla   change_anim1a
         00001600 00000000! 
     217                    
     218 00001620     09e2          movi    [4,0],a2
         00001630 00040000  
     219 00001650     b540          move    *a10(OBJ_XPOSINT),a0
         00001660     0110  
     220 00001670     b5a1          move    *a13(OBJ_XPOSINT),a1
         00001680     0110  
     221 00001690     4801          cmp     a0,a1                   ;offx - defx
     222 000016a0     c701          jrgt    svmcgo_rgt                      ;attacker on left
     223 000016b0     03a2          neg     a2
     224 000016c0           svmcgo_rgt
     225 000016c0     b24d          move    a2,*a13(OBJ_XVEL),L
         000016d0     02d0  
     226                    
     227 000016e0     0d5f          calla   wres_collis_off
         000016f0 00000000! 
     228 00001710     0960          rets
     229                    
     230                    *****************************************************************************
     231                    ;AMODE_NAPALM   55
     232                    
     233 00001720            SUBR   hit_napalm
     234                    
     235                            ;if we're standing, ignore this
     236 00001720     b5a0          move    *a13(PLYRMODE),a0
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    6

         00001730     05c0  
     237 00001740     0b40          cmpi    MODE_NORMAL,a0
         00001750     ffff  
     238                    
     239 00001760     ca5c          jreq    wndemode_normal
     240                    
     241 00001770     0b40          cmpi    MODE_BLOCK,a0
         00001780     fff8  
     242 00001790     ca59          jreq    wndemode_normal
     243                    
     244 000017a0     0d5f          calla   wres_collis_off
         000017b0 00000000! 
     245                    
     246 000017d0     b5a0          move    *a13(PLYRMODE),a0
         000017e0     05c0  
     247 000017f0     0b40          cmpi    MODE_ONGROUND,a0
         00001800     fffb  
     248 00001810     ca03          jrz     wndeon_grnd
     249 00001820     0b40          cmpi    MODE_DEAD,a0
         00001830     fff6  
     250 00001840     cb4a          jrnz    wndeisdead
     251                    
     252 00001850           wndeon_grnd
     253 00001850                   FACETBL burn_tbl
     254 000018c0     0d5f          calla   change_anim1a
         000018d0 00000000! 
     255                    
     256                            ;set the DEAD_ANIM bit - if this hit kills us, we don't want to
     257                            ; go through a normal convulse.
     258 000018f0     b7ae          move    *a13(STATUS_FLAGS),a14,L
         00001900     0b50  
     259 00001910     0bae          ori     M_DEAD_ANIM,a14
         00001920 00008000  
     260 00001940     b3cd          move    a14,*a13(STATUS_FLAGS),L
         00001950     0b50  
     261                    
     262 00001960                   WRSNDX  LBOWDROP_L1,LBOWDROP_L2
     263 00001ca0     09c0          movi    43h,a0
         00001cb0     0043  
     264 00001cc0     0d5f          calla   triple_sound
         00001cd0 00000000! 
     265                    
     266 00001cf0     0d5f  wndeisdead      calla   wres_collis_off
         00001d00 00000000! 
     267 00001d20     0960          rets
     268                    
     269 00001d30           wndemode_normal
     270                            ;OOPS!  Don't do any damage.
     271 00001d30     57ce          clr     a14
     272 00001d40     058e          move    a14,@hit_damage_pending
         00001d50 00000000! 
     273 00001d70     c0f7          jruc    wndeisdead
     274                    
     275                    
     276                    ******************************************************************************
TMS340 COFF Macro Assembler Version 6.10     Wed Nov 01 05:53:59 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    7

     277                    
     278                            .end

 No Errors,  No Warnings
