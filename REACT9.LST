TMS340 COFF Macro Assembler Version 6.10     Mon Oct 30 16:55:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                    
       2                            .file   "react9.asm"
       4                            .width  132
       5                            .option b,d,l,t
       6                            .mnolist
       7                    
       8                    
       9                            .include        "macros.h"
      10                            .include        "mproc.equ"             ;Mproc equates
      11                            .include        "display.equ"           ;Display proc equates
      12                            .include        "gsp.equ"               ;Gsp asm equates
      13                            .include        "sys.equ"
      14                            .include        "game.equ"
      15                            .include        "plyr.equ"
      16                            .include        "anim.equ"
      17                            .include        "audit.equ"
      18                            .include        "sound.h"
      19                            .include        "ring.equ"
      20                            .include        "lifebar.h"
      21                    
      22                    
      23                    
      24                            .ref    fall_back_tbl,head_hit_dizzy_tbl,head_hit_tbl,head_hit2_tbl
      25                            .ref    block_hit_flail,triple_sound,hit_damage_pending
      26                            .ref    change_anim1a,wres_collis_off,block_hit
      27                            .ref    CALL_FACE_HIT,hitonground_tbl
      28                            .ref    knee_hit_tbl,burn_tbl
      29                    
      30                    
      31                    
      32                    
      33                    
      34                    
      35                    
      36 00000000            SUBR   hit_rslash
      37                    
      38 00000000     b5a1          move    *a13(PLYRMODE),a1
         00000010     05c0  
      39 00000020     0b41          cmpi    MODE_BLOCK,a1
         00000030     fff8  
      40 00000040     cb04          jrnz    vaoinoblock
      41                    
      42                    
      43 00000050     0d5f          calla   block_hit_flail
         00000060 00000000! 
      44 00000080     0960          rets
      45                    
      46 00000090           vaoinoblock
      47                    
      48                    
      49 00000090     0d5f          CALLA   CALL_FACE_HIT
         000000a0 00000000! 
      50                    
      51 000000c0                   GETLIFE
      52 00000110     ca57          jrz     vaoiisdead
TMS340 COFF Macro Assembler Version 6.10     Mon Oct 30 16:55:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    2

      53                    
      54                    
      55 00000120                   WRSNDX  RSLASH_L1,RSLASH_L2
      56                    
      57                    
      58 00000460                   SETMODE NORMAL
      59                    
      60 00000510           vaoido_hit
      61 00000510     b5ae          move    *a13(OBJ_YPOSINT),a14
         00000520     0130  
      62 00000530     b5a0          move    *a13(GROUND_Y),a0
         00000540     0570  
      63 00000550     440e          sub     a0,a14
      64 00000560     0b4e          cmpi    20,a14
         00000570     ffeb  
      65 00000580     c514          jrge    vaoifall_back
      66                    
      67                            ;normal punch
      68 00000590                   FACE24TBL head_hit2_tbl
      69 00000660     0d5f          calla   change_anim1a
         00000670 00000000! 
      70 00000690           vaoiisdead
      71 00000690     0d5f          calla   wres_collis_off
         000006a0 00000000! 
      72 000006c0     0960          rets
      73                    
      74 000006d0           vaoifall_back
      75 000006d0                   FACETBL fall_back_tbl
      76                    
      77 00000740     0d5f          calla   change_anim1a
         00000750 00000000! 
      78 00000770     0d5f          calla   wres_collis_off
         00000780 00000000! 
      79                    
      80 000007a0     09e2          movi    [3,0],a2
         000007b0 00030000  
      81 000007d0     b540          move    *a10(OBJ_XPOSINT),a0
         000007e0     0110  
      82 000007f0     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000800     0110  
      83 00000810     4801          cmp     a0,a1                   ;offx - defx
      84 00000820     c701          jrgt    vaoifall_right          ;attacker on left
      85 00000830     03a2          neg     a2
      86 00000840           vaoifall_right
      87 00000840     b24d          move    a2,*a13(OBJ_XVEL),L
         00000850     02d0  
      88                    
      89 00000860     0960          rets
      90                    
      91                    
      92 00000870            SUBR   hit_headdslash
      93                    
      94 00000870                   WRSNDX  RSLASH_L1,RSLASH_L2
      95                    
      96 00000bb0                   GETLIFE
TMS340 COFF Macro Assembler Version 6.10     Mon Oct 30 16:55:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    3

      97 00000c00     ca27          jrz     fkhbisdead
      98                    
      99                    
     100 00000c10                   FACE24TBL knee_hit_tbl
     101 00000ce0     0d5f          calla   change_anim1a
         00000cf0 00000000! 
     102                    
     103 00000d10     09e0          movi    2C000h,a0
         00000d20 0002c000  
     104 00000d40     b20d          move    a0,*a13(OBJ_YVEL),L
         00000d50     02f0  
     105 00000d60     5600          clr     a0
     106 00000d70     b20d          move    a0,*a13(OBJ_XVEL),L
         00000d80     02d0  
     107                    
     108                            ;move a little bit toward the attacker
     109 00000d90     18a2          movk    5,a2
     110 00000da0     b540          move    *a10(OBJ_XPOSINT),a0
         00000db0     0110  
     111 00000dc0     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000dd0     0110  
     112 00000de0     4801          cmp     a0,a1
     113 00000df0     c601          jrle    fkhbok
     114 00000e00     03a2          neg     a2
     115 00000e10           fkhbok
     116 00000e10     4041          add     a2,a1
     117 00000e20     b02d          move    a1,*a13(OBJ_XPOSINT)
         00000e30     0110  
     118                    
     119 00000e40     0d5f          calla   wres_collis_off
         00000e50 00000000! 
     120 00000e70     0960          rets
     121                    
     122 00000e80           fkhbisdead
     123                    
     124 00000e80                   FACETBL fall_back_tbl
     125 00000ef0     0d5f          calla   change_anim1a
         00000f00 00000000! 
     126                    
     127 00000f20     09e2          movi    [4,0],a2
         00000f30 00040000  
     128 00000f50     b540          move    *a10(OBJ_XPOSINT),a0
         00000f60     0110  
     129 00000f70     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000f80     0110  
     130 00000f90     4801          cmp     a0,a1                   ;offx - defx
     131 00000fa0     c701          jrgt    fkhbgo_rgt                      ;attacker on left
     132 00000fb0     03a2          neg     a2
     133 00000fc0           fkhbgo_rgt
     134 00000fc0     b24d          move    a2,*a13(OBJ_XVEL),L
         00000fd0     02d0  
     135                    
     136 00000fe0     0d5f          calla   wres_collis_off
         00000ff0 00000000! 
     137 00001010     0960          rets
TMS340 COFF Macro Assembler Version 6.10     Mon Oct 30 16:55:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    4

     138                    
     139                    
     140 00001020            SUBR   hit_headuslash
     141                    
     142 00001020                   WRSNDX  RSLASH_L1,RSLASH_L2
     143                    
     144 00001360                   GETLIFE
     145 000013b0     ca1c          jrz     rjdzisdead
     146                    
     147 000013c0                   FACE24TBL knee_hit_tbl
     148 00001490     0d5f          calla   change_anim1a
         000014a0 00000000! 
     149                    
     150 000014c0     09e0          movi    40000h,a0
         000014d0 00040000  
     151 000014f0     b20d          move    a0,*a13(OBJ_YVEL),L
         00001500     02f0  
     152 00001510     5600          clr     a0
     153 00001520     b20d          move    a0,*a13(OBJ_XVEL),L
         00001530     02d0  
     154                    
     155 00001540     0d5f          calla   wres_collis_off
         00001550 00000000! 
     156 00001570     0960          rets
     157                    
     158 00001580           rjdzisdead
     159                    
     160 00001580                   FACETBL fall_back_tbl
     161 000015f0     0d5f          calla   change_anim1a
         00001600 00000000! 
     162                    
     163 00001620     09e2          movi    [4,0],a2
         00001630 00040000  
     164 00001650     b540          move    *a10(OBJ_XPOSINT),a0
         00001660     0110  
     165 00001670     b5a1          move    *a13(OBJ_XPOSINT),a1
         00001680     0110  
     166 00001690     4801          cmp     a0,a1                   ;offx - defx
     167 000016a0     c701          jrgt    rjdzgo_rgt                      ;attacker on left
     168 000016b0     03a2          neg     a2
     169 000016c0           rjdzgo_rgt
     170 000016c0     b24d          move    a2,*a13(OBJ_XVEL),L
         000016d0     02d0  
     171                    
     172 000016e0     0d5f          calla   wres_collis_off
         000016f0 00000000! 
     173 00001710     0960          rets
     174                    
     175                    
     176 00001720            SUBR   hit_napalm
     177                    
     178                            ;if we're standing, ignore this
     179 00001720     b5a0          move    *a13(PLYRMODE),a0
         00001730     05c0  
     180 00001740     0b40          cmpi    MODE_NORMAL,a0
TMS340 COFF Macro Assembler Version 6.10     Mon Oct 30 16:55:29 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    5

         00001750     ffff  
     181                    
     182 00001760     ca5c          jreq    cbvjmode_normal
     183                    
     184 00001770     0b40          cmpi    MODE_BLOCK,a0
         00001780     fff8  
     185 00001790     ca59          jreq    cbvjmode_normal
     186                    
     187 000017a0     0d5f          calla   wres_collis_off
         000017b0 00000000! 
     188                    
     189 000017d0     b5a0          move    *a13(PLYRMODE),a0
         000017e0     05c0  
     190 000017f0     0b40          cmpi    MODE_ONGROUND,a0
         00001800     fffb  
     191 00001810     ca03          jrz     cbvjon_grnd
     192 00001820     0b40          cmpi    MODE_DEAD,a0
         00001830     fff6  
     193 00001840     cb4a          jrnz    cbvjisdead
     194                    
     195 00001850           cbvjon_grnd
     196 00001850                   FACETBL burn_tbl
     197 000018c0     0d5f          calla   change_anim1a
         000018d0 00000000! 
     198                    
     199                            ;set the DEAD_ANIM bit - if this hit kills us, we don't want to
     200                            ; go through a normal convulse.
     201 000018f0     b7ae          move    *a13(STATUS_FLAGS),a14,L
         00001900     0b50  
     202 00001910     0bae          ori     M_DEAD_ANIM,a14
         00001920 00008000  
     203 00001940     b3cd          move    a14,*a13(STATUS_FLAGS),L
         00001950     0b50  
     204                    
     205 00001960                   WRSNDX  LBOWDROP_L1,LBOWDROP_L2
     206 00001ca0     09c0          movi    43h,a0
         00001cb0     0043  
     207 00001cc0     0d5f          calla   triple_sound
         00001cd0 00000000! 
     208                    
     209 00001cf0     0d5f  cbvjisdead      calla   wres_collis_off
         00001d00 00000000! 
     210 00001d20     0960          rets
     211                    
     212 00001d30           cbvjmode_normal
     213                            ;OOPS!  Don't do any damage.
     214 00001d30     57ce          clr     a14
     215 00001d40     058e          move    a14,@hit_damage_pending
         00001d50 00000000! 
     216 00001d70     c0f7          jruc    cbvjisdead
     217                    
     218                    
     219                    
     220                            .end

 No Errors,  No Warnings
