TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

                                                                     PAGE    1

       1                    **************************************************************
       2                    *
       3                    * Software:             Jamie Rivett
       4                    * Initiated:            8/8/94
       5                    *
       6                    * COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
       7                    *
       8                    **************************************************************
       9                    
      10                            .file   "react3.asm"
      12                            .width  132
      13                            .option b,d,l,t
      14                            .mnolist
      15                    
      16                    
      17                            .include        "macros.h"
      18                            .include        "mproc.equ"             ;Mproc equates
      19                            .include        "display.equ"           ;Display proc equates
      20                            .include        "gsp.equ"               ;Gsp asm equates
      21                            .include        "sys.equ"
      22                            .include        "game.equ"
      23                            .include        "plyr.equ"
      24                            .include        "anim.equ"
      25                            .include        "audit.equ"
      26                            .include        "sound.h"
      27                            .include        "ring.equ"
      28                            .include        "lifebar.h"
      29                    
      30                    
      31                    ******************************************************************************
      32                    * EXTERNAL REFERENCES
      33                    *
      34                            .REF    CALL_MID_HIT
      35                    
      36                            .REF    CALL_DROP_KICK
      37                            .ref    change_anim1a
      38                            .ref    wres_collis_off
      39                            .ref    block_hit_flail
      40                            .ref    block_hit
      41                            .ref    face_each_other
      42                            .ref    wres_slave_anim
      43                            .ref    set_getup_time
      44                    ;       .ref    check_dizzy
      45                            .ref    hit_damage_pending
      46                            .ref    DO_SCREAM
      47                    
      48                    ******************************************************************************
      49                    * EXTERNAL ANIM SEQUENCES
      50                    
      51                    
      52                    ;BAM BAM
      53                            .ref    bam_2_body_hit_anim,bam_4_body_hit_anim
      54                            .ref    bam_fall_back_anim
      55                    
      56                    ;DOINK
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    2

      57                            .ref    dnk_fall_back_anim
      58                    
      59                    ;BRET
      60                            .ref    hrt_fall_back_anim
      61                    ;LEX
      62                            .ref    lex_2_body_hit_anim,lex_4_body_hit_anim
      63                            .ref    lex_fall_back_anim
      64                    
      65                    ;RAZOR
      66                            .ref    rzr_2_body_hit_anim,rzr_4_body_hit_anim
      67                            .ref    rzr_fall_back_anim
      68                    
      69                    ;SHAWN
      70                            .ref    shn_2_body_hit_anim,shn_4_body_hit_anim
      71                            .ref    shn_fall_back_anim
      72                    
      73                    ;TAKER
      74                            .ref    und_2_body_hit_anim,und_4_body_hit_anim
      75                            .ref    und_fall_back_anim
      76                            .ref    und_2_knee_hit_anim,und_4_knee_hit_anim
      77                    
      78                    ;YOKO
      79                            .ref    yok_fall_back_anim
      80                    
      81                    
      82                    ******************************************************************************
      83                    * SYMBOLS DEFINED IN THIS FILE
      84                    
      85                    ******************************************************************************
      86                    * EQUATES FOR THIS FILE
      87                    
      88                    *****************************************************************************
      89                    
      90                    
      91                    
      92                    *****************************************************************************
      93                    ;AMODE_BIGBOOT  11
      94 00000000            SUBR   hit_bigboot
      95                    
      96 00000000     b5a1          move    *a13(PLYRMODE),a1
         00000010     05c0  
      97 00000020     0b41          cmpi    MODE_RUNNING,a1
         00000030     fffe  
      98                    ;No hit if not running
      99 00000040     ca62          jrz     kazecont2
     100 00000050     0b41          cmpi    MODE_INAIR,a1
         00000060     fffd  
     101 00000070     ca65          jrz     kazecont
     102 00000080           kazeface
     103 00000080     0d5f          CALLA   CALL_FACE_HIT
         00000090 00000000! 
     104                    
     105 000000b0                   GETLIFE
     106 00000100     ca52          jrz     kazeisdead
     107                    
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    3

     108 00000110                   WRSNDX  FLYKICK_L1,FLYKICK_L2
     109                    ;this should really hurt.....
     110 00000450     0d5f          calla   DO_SCREAM
         00000460 00000000! 
     111                    
     112 00000480                   SETMODE NORMAL
     113                    
     114                            .ref    head_hit2_tbl
     115 00000530                   FACE24TBL head_hit2_tbl
     116 00000600     0d5f          calla   change_anim1a
         00000610 00000000! 
     117                    
     118 00000630           kazeisdead
     119 00000630     0d5f          calla   wres_collis_off
         00000640 00000000! 
     120 00000660     0960          rets
     121                    
     122 00000670           kazecont2
     123 00000670     09c0          movi    100,a0
         00000680     0064  
     124                            .ref    RNDPER
     125 00000690     0d5f          calla   RNDPER
         000006a0 00000000! 
     126 000006c0     c39b          jrhi    kazeface
     127 000006d0           kazecont
     128 000006d0     0d5f          CALLA   CALL_DROP_KICK
         000006e0 00000000! 
     129                    
     130 00000700                   WRSNDX  LBOWDROP_L1,LBOWDROP_L2
     131 00000a40                   GETLIFE
     132 00000a90     ca0b          jrz     kazeskip
     133                    
     134                    ;Any hit mode which does a fall back sequence onto the ground
     135                    ;will not check dizzy at the start.
     136                    ;The check dizzy happens in the sequence.
     137                    
     138                    
     139                    ;       calla   inc_burnout
     140                    
     141 00000aa0                   SETMODE NORMAL
     142 00000b50           kazeskip
     143 00000b50     5600          clr     a0
     144 00000b60     b00d          move    a0,*a13(ROLL_POS)
         00000b70     0450  
     145 00000b80     0d5f          calla   set_getup_time
         00000b90 00000000! 
     146                    
     147                            .ref    fall_back_tbl
     148 00000bb0                   FACETBL fall_back_tbl
     149 00000c20     0d5f          calla   change_anim1a
         00000c30 00000000! 
     150                    
     151 00000c50     09e2          movi    [3,0],a2
         00000c60 00030000  
     152 00000c80     b540          move    *a10(OBJ_XPOSINT),a0
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    4

         00000c90     0110  
     153 00000ca0     b5a1          move    *a13(OBJ_XPOSINT),a1
         00000cb0     0110  
     154 00000cc0     4801          cmp     a0,a1                   ;offx - defx
     155 00000cd0     c703          jrgt    kazefall_right          ;attacker on left
     156 00000ce0     09e2          movi    [-3,0],a2
         00000cf0 fffd0000  
     157 00000d10           kazefall_right
     158 00000d10     b24d          move    a2,*a13(OBJ_XVEL),L
         00000d20     02d0  
     159                    
     160                    
     161 00000d30     0d5f          calla   wres_collis_off
         00000d40 00000000! 
     162 00000d60     0960          rets
     163                    
     164 00000d70           kazeno_hit
     165 00000d70     57ce          clr     a14
     166 00000d80     058e          move    a14,@hit_damage_pending
         00000d90 00000000! 
     167 00000db0     0d5f          calla   wres_collis_off
         00000dc0 00000000! 
     168 00000de0     0960          rets
     169                    
     170                    
     171                    *****************************************************************************
     172                    ;AMODE_KNEE     12
     173 00000df0            SUBR   hit_knee
     174                    
     175                    
     176 00000df0     b5a1          move    *a13(PLYRMODE),a1
         00000e00     05c0  
     177 00000e10     0b41          cmpi    MODE_BLOCK,a1
         00000e20     fff8  
     178 00000e30     cb04          jrnz    atrmnoblock
     179                    
     180 00000e40     0d5f          calla   block_hit
         00000e50 00000000! 
     181 00000e70     0960          rets
     182                    
     183 00000e80           atrmnoblock
     184                    
     185 00000e80     0d5f          CALLA   CALL_MID_HIT
         00000e90 00000000! 
     186                    
     187                    
     188 00000eb0                   GETLIFE
     189 00000f00     ca54          jrz     atrmisdead
     190                    
     191 00000f10                   WRSNDX  KICK_L1,KICK_L2
     192                    
     193                    ;       move    *a13(PLYR_DIZZY),a0
     194                    ;       jrnz    atrmdiz
     195                    ;
     196                    ;       calla   check_dizzy
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    5

     197                    ;       jrz     atrmnot_dizzy
     198                    ;
     199                    ;       movi    5*TSEC,a0
     200                    ;       move    a0,*a13(GETUP_TIME)
     201                    ;
     202                    ;atrmdiz
     203                    ;       FACE24TBL atrmknee_hit_dizzy
     204                    ;       jruc    atrmcont
     205                    ;
     206                    ;atrmnot_dizzy
     207                    ;       calla   inc_burnout
     208                    
     209 00001250                   SETMODE NORMAL
     210                    
     211 00001300                   FACE24TBL knee_hit_tbl
     212 000013d0           atrmcont
     213 000013d0     0d5f          calla   change_anim1a
         000013e0 00000000! 
     214                    
     215 00001400     b740          move    *a10(OBJ_XVEL),a0,L             ;slow down doink's
         00001410     02d0  
     216 00001420     2ba0          sra     3,a0                            ;x_vel after collis
     217 00001430     b20a          move    a0,*a10(OBJ_XVEL),L
         00001440     02d0  
     218                    
     219 00001450           atrmisdead
     220 00001450     0d5f          calla   wres_collis_off
         00001460 00000000! 
     221 00001480     0960          rets
     222                    
     223 00001490            SUBR   knee_hit_tbl
     224                            .ref    hrt_2_knee_hit_anim,hrt_4_knee_hit_anim
     225                            .ref    yok_2_knee_hit_anim,yok_4_knee_hit_anim
     226                            .ref    rzr_2_knee_hit_anim,rzr_4_knee_hit_anim
     227                            .ref    und_2_knee_hit_anim,und_4_knee_hit_anim 
     228                            .ref    shn_2_knee_hit_anim,shn_4_knee_hit_anim 
     229                            .ref    bam_2_knee_hit_anim,bam_4_knee_hit_anim 
     230                            .ref    dnk_2_knee_hit_anim
     231                            .ref    lex_2_knee_hit_anim,lex_4_knee_hit_anim 
     232                    
     233 00001490 00000000!         .long   hrt_2_knee_hit_anim,hrt_4_knee_hit_anim         ;0 Bret Hart
     234 000014d0 00000000!         .long   rzr_2_knee_hit_anim,rzr_4_knee_hit_anim         ;1 Razor Ramon
     235 00001510 00000000!         .long   und_2_knee_hit_anim,und_4_knee_hit_anim         ;2 Undertaker
     236 00001550 00000000!         .long   yok_2_knee_hit_anim,yok_4_knee_hit_anim         ;3 Yokozuna
     237 00001590 00000000!         .long   shn_2_knee_hit_anim,shn_4_knee_hit_anim         ;4 Shawn Michaels
     238 000015d0 00000000!         .long   bam_2_knee_hit_anim,bam_4_knee_hit_anim         ;5 Bam Bam
     239 00001610 00000000!         .long   dnk_2_knee_hit_anim,dnk_2_knee_hit_anim         ;6 Doink
     240 00001650 00000000          .long   0,0                                             ;7 spare
     241 00001690 00000000!         .long   lex_2_knee_hit_anim,lex_4_knee_hit_anim         ;8 Lex Luger
     242 000016d0 00000000          .long   0,0                                             ;9 Referee
     243                    
     244                    ;atrmknee_hit_dizzy
     245                    ;       .ref    hrt_4_knee_hit_dizzy_anim
     246                    ;       .ref    yok_4_knee_hit_dizzy_anim
     247                    ;       .ref    rzr_4_knee_hit_dizzy_anim
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    6

     248                    ;       .ref    und_4_knee_hit_dizzy_anim
     249                    ;       .ref    shn_4_knee_hit_dizzy_anim
     250                    ;       .ref    bam_4_knee_hit_dizzy_anim
     251                    ;       .ref    dnk_4_knee_hit_dizzy_anim
     252                    ;       .ref    lex_4_knee_hit_dizzy_anim
     253                    ;
     254                    ;       .long   hrt_4_knee_hit_dizzy_anim,hrt_4_knee_hit_dizzy_anim     ;0 Bret Hart
     255                    ;       .long   rzr_4_knee_hit_dizzy_anim,rzr_4_knee_hit_dizzy_anim     ;1 Razor Ramon
     256                    ;       .long   und_4_knee_hit_dizzy_anim,und_4_knee_hit_dizzy_anim     ;4 Undertaker
     257                    ;       .long   yok_4_knee_hit_dizzy_anim,yok_4_knee_hit_dizzy_anim     ;3 Yokozuna
     258                    ;       .long   shn_4_knee_hit_dizzy_anim,shn_4_knee_hit_dizzy_anim     ;4 Shawn Michaels
     259                    ;       .long   bam_4_knee_hit_dizzy_anim,bam_4_knee_hit_dizzy_anim     ;5 Bam Bam
     260                    ;       .long   dnk_4_knee_hit_dizzy_anim,dnk_4_knee_hit_dizzy_anim     ;6 Doink
     261                    ;       .long   0,0                                                     ;7 spare
     262                    ;       .long   lex_4_knee_hit_dizzy_anim,lex_4_knee_hit_dizzy_anim     ;8 Lex Luger
     263                    ;       .long   0,0                                                     ;9 Referee
     264                    
     265                    
     266                    *****************************************************************************
     267                    ;AMODE_KNEE     27
     268 00001710            SUBR   hit_headknees
     269                    
     270 00001710                   WRSNDX  KICK_L1,KICK_L2
     271                    
     272 00001a50     09e0          movi    40000h,a0
         00001a60 00040000  
     273 00001a80     b20d          move    a0,*a13(OBJ_YVEL),L
         00001a90     02f0  
     274                    
     275 00001aa0                   FACETBL xgbbknee_hit
     276 00001b10     0d5f          calla   change_anim1a
         00001b20 00000000! 
     277                    
     278 00001b40     0d5f          calla   wres_collis_off
         00001b50 00000000! 
     279 00001b70     0960          rets
     280                    
     281 00001b80           xgbbknee_hit
     282                            .ref    dnk_quick_knee_hit_anim
     283                            .ref    hrt_quick_knee_hit_anim
     284                            .ref    yok_quick_knee_hit_anim
     285                            .ref    bam_quick_knee_hit_anim
     286                            .ref    und_quick_knee_hit_anim
     287                            .ref    rzr_quick_knee_hit_anim
     288                            .ref    shn_quick_knee_hit_anim
     289                            .ref    lex_quick_knee_hit_anim
     290                    
     291 00001b80 00000000!         .long   hrt_quick_knee_hit_anim ;0 Bret Hart
     292 00001ba0 00000000!         .long   rzr_quick_knee_hit_anim ;1 Razor Ramon
     293 00001bc0 00000000!         .long   und_quick_knee_hit_anim ;2 Undertaker
     294 00001be0 00000000!         .long   yok_quick_knee_hit_anim ;3 Yokozuna
     295 00001c00 00000000!         .long   shn_quick_knee_hit_anim ;4 Shawn Michaels
     296 00001c20 00000000!         .long   bam_quick_knee_hit_anim ;5 Bam Bam
     297 00001c40 00000000!         .long   dnk_quick_knee_hit_anim ;6 Doink
     298 00001c60 00000000          .long   0                       ;7 spare
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    7

     299 00001c80 00000000!         .long   lex_quick_knee_hit_anim ;8 Lex Luger
     300 00001ca0 00000000          .long   0                                               ;9 Referee
     301                    
     302                    
     303                    *****************************************************************************
     304                    ;AMODE_BOXPUNCH 14
     305 00001cc0            SUBR   hit_boxpunch
     306                    
     307 00001cc0     b5a1          move    *a13(PLYRMODE),a1
         00001cd0     05c0  
     308 00001ce0     0b41          cmpi    MODE_BLOCK,a1
         00001cf0     fff8  
     309 00001d00     cb04          jrnz    sbmdnoblock
     310                    
     311                    ;       move    *a13(FACING_DIR),a0             ;check for hit
     312                    ;       move    *a13(NEW_FACING_DIR),a1         ;from behind
     313                    ;       and     a0,a1
     314                    ;       andi    MOVE_LEFT|MOVE_RIGHT,a1
     315                    ;       jrz     sbmdnoblock
     316                    
     317 00001d10     0d5f          calla   block_hit_flail
         00001d20 00000000! 
     318 00001d40     0960          rets
     319                    
     320 00001d50           sbmdnoblock
     321                    
     322                    ;All of the damage amounts need to be in lookup tables linked to the wrestler
     323                    ;who actually struck the blow.
     324                    
     325                            .ref    CALL_FACE_HIT
     326 00001d50     0d5f          CALLA   CALL_FACE_HIT
         00001d60 00000000! 
     327                    
     328                    ;Any hit mode which does a fall back sequence onto the ground
     329                    ;will not check dizzy at the start.
     330                    ;The check dizzy happens in the sequence.
     331                    
     332 00001d80                   WRSNDX  FLYKICK_L1,FLYKICK_L2
     333 000020c0                   GETLIFE
     334 00002110     ca0b          jrz     sbmdskip
     335                    
     336                    
     337 00002120                   SETMODE NORMAL
     338 000021d0           sbmdskip
     339 000021d0     09c0          movi    5*TSEC,a0
         000021e0     0109  
     340 000021f0     b00d          move    a0,*a13(GETUP_TIME)
         00002200     0460  
     341                    
     342 00002210                   FACETBL fall_back_tbl
     343 00002280     0d5f          calla   change_anim1a
         00002290 00000000! 
     344                    
     345 000022b0     09e2          movi    [4,0],a2
         000022c0 00040000  
TMS340 COFF Macro Assembler Version 6.10     Fri Nov 03 10:57:43 2023
 Copyright (c) 1985-1991  Texas Instruments Incorporated 

meters, names, messages, and scores                                  PAGE    8

     346 000022e0     b540          move    *a10(OBJ_XPOSINT),a0
         000022f0     0110  
     347 00002300     b5a1          move    *a13(OBJ_XPOSINT),a1
         00002310     0110  
     348 00002320     4801          cmp     a0,a1                   ;offx - defx
     349 00002330     c701          jrgt    sbmdgo_rgt                      ;attacker on left
     350 00002340     03a2          neg     a2
     351 00002350           sbmdgo_rgt
     352 00002350     b24d          move    a2,*a13(OBJ_XVEL),L
         00002360     02d0  
     353                    
     354 00002370           sbmdisdead
     355 00002370     0d5f          calla   wres_collis_off
         00002380 00000000! 
     356 000023a0     0960          rets
     357                    
     358                    
     359                    ******************************************************************************
     360                    
     361                            .end

 No Errors,  No Warnings
