**************************************************************
*
* Software:		Jamie Rivett
* Initiated:		5/17/94
*
* COPYRIGHT (C) 1992 WILLIAMS ELECTRONICS GAMES, INC.
*
**************************************************************

	.file	"bamseq2.asm"
	.title	"Bam Bam Bigelo animation sequences"
	.width	132
	.option	b,d,l,t
	.mnolist


	.include	"macros.h"
	.include	"mproc.equ"		;Mproc equates
	.include	"sys.equ"
	.include	"game.equ"
	.include	"plyr.equ"
	.include	"anim.equ"
	.include	"sound.h"
	.include	"ring.equ"
	.include	"bamimg.h"
	.include	"damage.equ"
	.INCLUDE	"SWEAT.EQU"


******************************************************************************
* EXTERNAL REFERENCES

	.ref	MOVE_NAME_ANNC,hit_nearest,WORLDTLX,set_tbukl_airmode
	.ref	free_toss_check,setup_freetoss
	.ref	DO_WAIL,CALL_ANI_AVERAGE_MOVE,DO_BLOCKED
	.ref	create_impact,create_impact2,create_impact_salt
	.ref	SET_DIR_FACE,start_run_anim,HIT_THE_MAT,SMALL_BOUNCE
	.ref	choose_2or4,no_bk_xvel,CALL_MISSES,CALL_NASTY_MOVE
	.ref	DO_CROWD_CHEER,check_xvel,BAMBLU_P,pal_getf
	.ref	am_I_dead,win_announce,create_impact3
	.ref	bam_pogo_anim,bam_3_pile_driver_anim,DO_GRUNT
	.ref	bam_3_head_held_anim,set_tbukl_confine
	.ref	bam_combo_pogo_anim,grnd_hit,fix_bnc_flip
	.ref	bam_fireball,CALL_SPECIAL_MOVE,ckzpos
	.ref	bam_4_graboh_anim,DO_COMBO_MESS,bam_combo_graboh_anim
	.ref	hit_puppet_even_if_dead,check_raisearm_bit
	.ref	skick_delay,spunch_delay,bam_combo_pile_driver_anim
	.ref	DO_FLAME_HIT_SND,create_impact_flykick,CALL_SETUP
	.ref	set_buckoff_vels,hiptoss_delay,lex_tossed2_anim
	.ref	fling_delay,DO_FLAME_SND,impact_sound,start_run_flung

******************************************************************************
* SYMBOLS DEFINED IN THIS FILE

******************************************************************************
* EQUATES FOR THIS FILE

*****************************************************************************

 SUBR	bam_2_fpunch_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
;	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
;	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_DETACH
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	.word	ANI_SET_RPTCOUNT,2	;1 times

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
qlmyloop
	.word	ANI_CLR_BUTCOUNT

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
;	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,50,105,10
	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,30,105,10
	WL	ANI_CODE,no_bk_xvel

	.word	ANI_STARTATTACK,AT_PUNCH,10

	WL	2,B2FH3Z+FR1
	WL	3,B2FH3Z+FR2
	WL	3,B2FH3Z+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B2FH3Z+FR4
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,59,68	;mode,x,y,w,h
	WL	3,B2FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFBLOCKED,qlmyblocked
	WL	ANI_IFSTATUS,qlmygotim
;missed
	WL	3,B2FH3Z+FR6
	WL	20,B2FH3Z+FR7

	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qlmygotim
	.word	ANI_IMMOBILIZE,20
qlmyblocked
	WL	ANI_CODE,DO_FLAME_HIT_SND
	WL	ANI_CODE,CALL_NASTY_MOVE
	.word	ANI_STARTATTACK,AT_PUNCH,6

	WL	ANI_CODE,qlmyset_opp_xy

	WL	2,B2FH3Z+FR6
	WL	3,B2FH3Z+FR7

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
;	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,40,105,-10
	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,20,105,-10

	.word	ANI_STARTATTACK,AT_PUNCH,10

	WL	2,B4FH3Z+FR1
	WL	3,B4FH3Z+FR2
	WL	3,B4FH3Z+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B4FH3Z+FR4
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,59,68	;mode,x,y,w,h
	WL	3,B4FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFBLOCKED,qlmyblocked2
	WL	ANI_IFSTATUS,qlmygotim2
;missed
	WL	3,B4FH3Z+FR6
	WL	20,B4FH3Z+FR7

	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qlmygotim2
	.word	ANI_IMMOBILIZE,20
qlmyblocked2
	WL	ANI_CODE,qlmyset_opp_xy

	WL	2,B4FH3Z+FR6
	WL	3,B4FH3Z+FR7

	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,4,qlmyfail
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,qlmyloop

	.word	ANI_DRAW_NAME,15

qlmyfail

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_4_fpunch_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
;	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
;	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_DETACH

	.word	ANI_SET_RPTCOUNT,2	;3 times

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
qlmyloop2
	.word	ANI_STARTATTACK,AT_PUNCH,10
	.word	ANI_CLR_BUTCOUNT

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
;	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,50,105,-10
	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,30,105,-10
	WL	ANI_CODE,no_bk_xvel

	WL	2,B4FH3Z+FR1
	WL	3,B4FH3Z+FR2
	WL	3,B4FH3Z+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B4FH3Z+FR4
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,59,68	;mode,x,y,w,h
	WL	3,B4FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFBLOCKED,qlmyblocked2a
	WL	ANI_IFSTATUS,qlmygotim2a
;missed
	WL	3,B4FH3Z+FR6
	WL	20,B4FH3Z+FR7

	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qlmygotim2a
	.word	ANI_IMMOBILIZE,20
qlmyblocked2a
	WL	ANI_CODE,DO_FLAME_HIT_SND
	.word	ANI_STARTATTACK,AT_PUNCH,15
	WL	ANI_CODE,CALL_NASTY_MOVE

	WL	ANI_CODE,qlmyset_opp_xy

	WL	2,B4FH3Z+FR6
	WL	3,B4FH3Z+FR7

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
;	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,40,105,10
	LEAPATOPP 08h,999,54h,45,90000h,TGT_HEAD,20,105,10

	WL	2,B2FH3Z+FR1
	WL	3,B2FH3Z+FR2
	WL	3,B2FH3Z+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B2FH3Z+FR4
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,59,68	;mode,x,y,w,h
	WL	3,B2FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFBLOCKED,qlmyblockeda
	WL	ANI_IFSTATUS,qlmygotima
;missed
	WL	3,B2FH3Z+FR6
	WL	20,B2FH3Z+FR7

	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qlmygotima
	.word	ANI_IMMOBILIZE,20
qlmyblockeda
	WL	ANI_CODE,qlmyset_opp_xy

	WL	2,B2FH3Z+FR6
	WL	3,B2FH3Z+FR7

	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,4,qlmyfail2
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,qlmyloop
	.word	ANI_DRAW_NAME,15
qlmyfail2
      
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


qlmyset_opp_xy
	move	*a13(WHOIHIT),a0,L
	movi	[2,0],a14
	move	a14,*a0(OBJ_YVEL),L

	movi	-[2,0],a1
	move	*a0(NEW_FACING_DIR),a14
	btst	MOVE_RIGHT_BIT,a14
	jrnz	qlmyabs			;right
	neg	a1			;left
qlmyabs
	move	a1,*a0(OBJ_XVEL),L
 
	calla	create_impact3
	rets

 SUBR    bam_combo_fpunch

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_DETACH
	.word	ANI_SETPLYRMODE,MODE_NORMAL

	.word	ANI_SET_RPTCOUNT,2	;3 times
	WLW	ANI_SET_XVEL,30000h,AM_FACE_REL


	.word	ANI_STARTATTACK,AT_PUNCH,8

	WL	ANI_CODE,DO_FLAME_SND

	WL	2,B2FH3Z+FR1
	WL	2,B2FH3Z+FR2
	WL	2,B2FH3Z+FR3
	WL	2,B2FH3Z+FR4
	WLW	ANI_SET_XVEL,0h,AM_FACE_REL
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,79,68	;mode,x,y,w,h
	WL	2,B2FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,qlmyMISSED_2
	WL	ANI_CODE,DO_FLAME_HIT_SND
	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO
	.word	ANI_STARTATTACK,AT_PUNCH,12
	WL	ANI_SET_YVEL,18000h
	.word	ANI_SET_ATTACH

	WWWL	ANI_IFROPE,RC_FRONT,100,qlmyAVOID_VELSB

	WLLL	ANI_SETOPPVELS,10000H,10000h,0h		;x,y,z vels
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
qlmyAVOID_VELSB

	WL	2,B2FH3Z+FR6
	WL	2,B2FH3Z+FR7

	WL	2,B4FH3Z+FR1
	WL	2,B4FH3Z+FR2
	WL	2,B4FH3Z+FR3
	WL	2,B4FH3Z+FR4
	.word	ANI_CLR_STATUS
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,79,68	;mode,x,y,w,h
	WL	2,B4FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,qlmyMISSED_4
	WWWL	ANI_IFROPE,RC_FRONT,100,qlmyAVOID_VELS2B

	WLLL	ANI_SETOPPVELS,10000H,10000h,0h		;x,y,z vels
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
qlmyAVOID_VELS2B
	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO
	WL	ANI_SET_YVEL,18000h

	WL	2,B4FH3Z+FR6
	WL	2,B4FH3Z+FR7

qlmyloop_c
	.word	ANI_CLR_BUTCOUNT

	.word	ANI_STARTATTACK,AT_PUNCH,8
	WL	ANI_CODE,DO_FLAME_SND

	WL	2,B2FH3Z+FR1
	WL	2,B2FH3Z+FR2
	WL	2,B2FH3Z+FR3
	WL	2,B2FH3Z+FR4
	WLW	ANI_SET_XVEL,0h,AM_FACE_REL
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,79,68	;mode,x,y,w,h
	WL	2,B2FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,qlmyMISSED_2
	WL	ANI_CODE,DO_FLAME_HIT_SND
	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO
	.word	ANI_STARTATTACK,AT_PUNCH,12
	WL	ANI_SET_YVEL,18000h
	.word	ANI_SET_ATTACH

	WWWL	ANI_IFROPE,RC_FRONT,100,qlmyAVOID_VELS

	WLLL	ANI_SETOPPVELS,10000H,10000h,0h		;x,y,z vels
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
qlmyAVOID_VELS

	WL	2,B2FH3Z+FR6
	WL	2,B2FH3Z+FR7

	WL	2,B4FH3Z+FR1
	WL	2,B4FH3Z+FR2
	WL	2,B4FH3Z+FR3
	WL	2,B4FH3Z+FR4
	.word	ANI_CLR_STATUS
	.word	ANI_ATTACK_ON, AMODE_FIRE_PUNCH,7,44,79,68	;mode,x,y,w,h
	WL	2,B4FH3Z+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,qlmyMISSED_4

	WWWL	ANI_IFROPE,RC_FRONT,100,qlmyAVOID_VELS2

	WLLL	ANI_SETOPPVELS,10000H,10000h,0h		;x,y,z vels
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
qlmyAVOID_VELS2

	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO
	WL	ANI_SET_YVEL,18000h

	WL	2,B4FH3Z+FR6
	WL	2,B4FH3Z+FR7

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,qlmyloop_c

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,qlmyCHECK_ANOTHER_2
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_combo_hiptoss_anim

qlmyCHECK_ANOTHER_2
	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,qlmyCHECK_ANOTHER
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_flying_kick_no_xvel

qlmyCHECK_ANOTHER
	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,qlmyCHECK_ANOTHER_BUT2
	WL	ANI_CHANGEANIM,bam_combo_slap_anim

qlmyCHECK_ANOTHER_BUT2
	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,qlmyMISSED_4B
	WL	ANI_CHANGEANIM,bam_combo_pogo_anim

qlmyMISSED_4
	WL	3,B4FH3Z+FR6
	WL	3,B4FH3Z+FR7
qlmyMISSED_4B

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qlmyMISSED_2
	WL	3,B2FH3Z+FR6
	WL	3,B2FH3Z+FR7

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* sqrc2 NORMAL PUNCH

 SUBR	bam_2_punch_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2PU3C+FR4
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2PU3C+FR4
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2PU3C+FR5
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	1,B2PU3C+FR5
	WL	2,B2PU3C+FR6

	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,92,56,10	;mode,x,y,w,h
	WL	3,B2PU3C+FR7
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,sqrcno_hit

	WL	ANI_SET_YVEL,30000h
	WL	3,B2PU3C+FR7
sqrcno_hit

	WL	1,B2PU3C+FR7
	WL	2,B2PU3C+FR8
	WL	2,B2PU3C+FR9
	WL	2,B2PU3C+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

************
*
* eeud4 NORMAL PUNCH

 SUBR	bam_4_punch_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4PU3D+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4PU3D+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4PU3D+FR3
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	1,B4PU3D+FR3
	WL	2,B4PU3D+FR4

	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,92,56,10	;mode,x,y,w,h
	WL	3,B4PU3D+FR5
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,eeudno_hit

	WL	ANI_SET_YVEL,30000h
	WL	3,B4PU3D+FR5
eeudno_hit
	WL	1,B4PU3D+FR5
	WL	2,B4PU3D+FR6
	WL	2,B4PU3D+FR7
	WL	2,B4PU3D+FR9

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_combo_punch_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.WORD	ANI_CLEAR_COMBO

	WL	2,B4PU3D+FR2
	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	2,B4PU3D+FR3
	WL	2,B4PU3D+FR4

	WL	2,B4PU3D+FR5
	.WORD	ANI_INC_COMBO
	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,42,56,60	;mode,x,y,w,h
	WL	2,B4PU3D+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,eeudno_hit4
	.WORD	ANI_INC_COMBO

	WL	ANI_SET_YVEL,18000h
	WL	2,B4PU3D+FR5

	WL	2,B2PU3C+FR4
	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	2,B2PU3C+FR5
	WL	2,B2PU3C+FR6

	WL	2,B2PU3C+FR7
	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,92,56,10	;mode,x,y,w,h
	WL	2,B2PU3C+FR7
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,eeudno_hit2
	.WORD	ANI_INC_COMBO

	WL	ANI_SET_YVEL,18000h
	WL	2,B2PU3C+FR7

	.word	ANI_SET_RPTCOUNT,3	;3 times
eeudp_loop
	.word	ANI_CLR_BUTCOUNT

	WL	2,B4PU3D+FR2
	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	1,B4PU3D+FR3
	WL	2,B4PU3D+FR4

	WL	1,B4PU3D+FR5
	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,42,56,60	;mode,x,y,w,h
	WL	2,B4PU3D+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,eeudno_hit4
	.WORD	ANI_INC_COMBO

	WL	ANI_SET_YVEL,18000h
	WL	1,B4PU3D+FR5

	WL	2,B2PU3C+FR4
	.word	ANI_STARTATTACK,AT_PUNCH,7
	WL	1,B2PU3C+FR5
	WL	2,B2PU3C+FR6

	WL	1,B2PU3C+FR7
	.word	ANI_ATTACK_ON, AMODE_PUNCH,28,92,56,10	;mode,x,y,w,h
	WL	2,B2PU3C+FR7
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,eeudno_hit2
	.WORD	ANI_INC_COMBO

	WL	ANI_SET_YVEL,18000h
	WL	1,B2PU3C+FR7

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,eeudp_loop

	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,eeudCHECK_NEXT2
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_combo_hiptoss_anim

eeudCHECK_NEXT2
	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,eeudCHECK_NEXT1
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_flying_kick_no_xvel

eeudCHECK_NEXT1
	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,eeudno_hit2
	WL	ANI_CHANGEANIM,bam_combo_superkick_anim
eeudno_hit2

	.WORD	ANI_DETACH
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	2,B2PU3C+FR7

	WL	3,B2PU3C+FR8
	WL	2,B2PU3C+FR9
	WL	2,B2PU3C+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

eeudno_hit4
	.WORD	ANI_DETACH
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	2,B4PU3D+FR5

	WL	3,B4PU3D+FR6
	WL	2,B4PU3D+FR7
	WL	2,B4PU3D+FR9

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

************
*
* dvzu4 PUSH

 SUBR	bam_4_push_anim

	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	WL	ANI_SETFLAG,M_PUSH
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP


	.word	ANI_STARTATTACK,AT_PUSH,9
	WL	3,B4PS3A+FR2
	WL	3,B4PS3A+FR3
	WL	3,B4PS3A+FR4
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ATTACK_ON, AMODE_PUSH,36,85,49,17 ;mode,x,y,w,h
	WL	3,B4PS3A+FR5
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,40h,-70000h,dvzuno_hit	;range,vel,addr
	WL	15,B4PS3A+FR5
dvzuno_hit
	WL	3,B4PS3A+FR5
	WL	ANI_IFSTATUS,dvzuhit
	WL	5,B4PS3A+FR5
dvzuhit
	WL	3,B4PS3A+FR4
	WL	3,B4PS3A+FR3
	WL	3,B4PS3A+FR2

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

;dvzufireball
;	move	a13,a11
;	CREATE0	bam_fireball
;	rets

******************************************************************************
*
* dvzu2 RUNNING BOUNCE OFF OF OPPONENT

 SUBR	bam_2_bncoff_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_FRICTION,3000h

	WL	3,B2AH2A+FR2
	WL	15,B2AH2A+FR3
	WL	3,B2AH2A+FR4
	WL	3,B2AH2A+FR5
	WL	3,B2AH2A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

* dvzu4 RUNNING BOUNCE OFF OF OPPONENT

 SUBR	bam_4_bncoff_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_FRICTION,3000h

	WL	3,B4AH4A+FR2
	WL	3,B4AH4A+FR3
	WL	14,B4AH4A+FR4
	WL	2,B4AH4A+FR5
	WL	2,B4AH4A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


* dvzu4 RUNNING BOUNCE OFF OF OPPONENT

;Bounce off but stay dizzy!

 SUBR	bam_4_bncoff_dizzy_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_FRICTION,3000h
	.word	ANI_SETPLYRMODE,MODE_DIZZY

	WL	3,B4AH4A+FR2
	WL	3,B4AH4A+FR3
	WL	14,B4AH4A+FR4
	WL	2,B4AH4A+FR5
	WL	2,B4AH4A+FR6

;	.word	ANI_SETPLYRMODE,MODE_DIZZY
	WL	ANI_CHANGEANIM,bam_dizzy_anim
;	.word	ANI_END


******************************************************************************
*
* dvzu4 LOSE BALANCE

 SUBR	bam_4_losebal_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_FRICTION,3000h
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,-60000h,AM_HIT_REL
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0

	WL	3,B4LB4B+FR1
	WL	3,B4LB4B+FR2
	WL	3,B4LB4B+FR3
	WL	3,B4LB4B+FR4
	WL	3,B4LB4B+FR5
	WL	3,B4LB4B+FR6
	WL	3,B4LB4B+FR7

	.word	ANI_FACE,MOVE_RIGHT|MOVE_DOWN
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* yrva2 ELBOW DROP

yrvayoff	equ	50

 SUBR	bam_2_lbowdrop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	.word	ANI_STARTATTACK,AT_LBDROP,-1
	WL	3,B2PJ3A+FR3
	WL	3,B2PJ3A+FR4
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	;if we're gonna miss, do a leapat
	.word	ANI_ATTACK_ON_Z,AMODE_HITCHECK,19,-6,-40,33,31,50
	WL	1,B2PJ3A+FR5
	.word	ANI_ATTACK_OFF
	WL	ANI_IFSTATUS,yrvano_leapat

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	.word	ANI_TARGET,TGT_CHEST,TGT_GROIN,ATM_CLOSEST
	LEAPATOPP 20,999,160,140,90000h,TGT_USER,35,0+yrvayoff,-40
	.word	ANI_SETPLYRMODE,MODE_INAIR
	WL	ANI_CODE,no_bk_xvel

yrvano_leapat
	WL	3,B2PJ3A+FR5
	WL	3,B2PJ3A+FR6
	.word	ANI_OFFSET,0,yrvayoff,0
	WL	4,B2PJ3A+FR7
	WL	4,B2PJ3A+FR8
	.word	ANI_WAITHITGND
	.word	ANI_SHAKER,25
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_ONGROUND

	.word	ANI_ATTACK_ON_Z,AMODE_LBOWDROP,19,-6,-40,33,31,50
	WL	1,B2PJ3A+FR9
	.word	ANI_ATTACK_OFF

	.WORD	ANI_ADD_MOVE,MOVE_C_2,2,2
	WL	ANI_IFNOTSTATUS,yrvamissed

	.word	ANI_SHAKEALL,2
	WL	ANI_SET_YVEL,40000h
	WLW	ANI_SET_ZVEL,18000h,AM_ABS
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_GOTO,yrvahit
yrvamissed
	WL	ANI_CODE,CALL_MISSES
yrvahit
	.word	ANI_DRAW_NAME,18
	WL	3,B2PJ3A+FR9
	WL	4,B2PJ3A+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	WL	ANI_CHANGEANIM,bam_2_faceup_getup2_anim

*****************************************************************************
*
* efcd4 ELBOW DROP

efcdyoff	equ	40

 SUBR	bam_combo_lbowdrop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_STARTATTACK,AT_LBDROP,-1
	WL	3,B3PJ3B+FR3
	WL	3,B3PJ3B+FR4

	;if we're gonna miss, do a leapat
	.word	ANI_ATTACK_ON_Z,AMODE_HITCHECK,19,-6,-40,33,31,50
	WL	1,B3PJ3B+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFSTATUS,efcdno_leapatc

	.word	ANI_TARGET,TGT_CHEST,TGT_GROIN,ATM_CLOSEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 20,999,112,96,90000h,TGT_USER,32,efcdyoff,40
	WL	ANI_CODE,no_bk_xvel

efcdno_leapatc
	WL	2,B3PJ3B+FR5
	.word	ANI_OFFSET,0,efcdyoff,0
	WL	3,B3PJ3B+FR6
	WL	3,B3PJ3B+FR7
	WL	3,B3PJ3B+FR8
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_ONGROUND

	.word	ANI_ATTACK_ON_Z,AMODE_LBOWDROP,12,-9,-10,42,42,50
	WL	1,B3PJ3B+FR9
	.word	ANI_ATTACK_OFF
	.WORD	ANI_ADD_MOVE,MOVE_C_2,2,2
	WL	ANI_IFNOTSTATUS,efcdmissedc

	.word	ANI_SHAKER,20
	.word	ANI_SHAKEALL,2

	;bounce off the guy
	.WORD	ANI_INC_COMBO
	WL	ANI_SET_YVEL,40000h
	WLW	ANI_SET_ZVEL,-18000h,AM_ABS
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_GOTO,efcdhitc

efcdmissedc
	WL	ANI_CODE,CALL_MISSES
efcdhitc

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO

	WL	3,B3PJ3B+FR9
	WL	4,B3GU4A+FR4

	.word	ANI_SETMODE,MODE_NORMAL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup2_anim


 SUBR	bam_4_lbowdrop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_STARTATTACK,AT_LBDROP,-1
	WL	3,B3PJ3B+FR3
	WL	3,B3PJ3B+FR4
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	;if we're gonna miss, do a leapat
	.word	ANI_ATTACK_ON_Z,AMODE_HITCHECK,19,-6,-40,33,31,50
	WL	1,B3PJ3B+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFSTATUS,efcdno_leapat

	.word	ANI_TARGET,TGT_CHEST,TGT_GROIN,ATM_CLOSEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 20,999,160,140,90000h,TGT_USER,32,efcdyoff,40
	WL	ANI_CODE,no_bk_xvel

efcdno_leapat
	WL	2,B3PJ3B+FR5
	.word	ANI_OFFSET,0,efcdyoff,0
	WL	3,B3PJ3B+FR6
	WL	3,B3PJ3B+FR7
	WL	3,B3PJ3B+FR8
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_SHAKER,25
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SETPLYRMODE,MODE_ONGROUND

	.word	ANI_ATTACK_ON_Z,AMODE_LBOWDROP,12,-9,-10,42,42,50
	WL	1,B3PJ3B+FR9
	.word	ANI_ATTACK_OFF
	.WORD	ANI_ADD_MOVE,MOVE_C_2,2,2
	WL	ANI_IFNOTSTATUS,efcdmissed

	.word	ANI_SHAKEALL,2

	;bounce off the guy
	WL	ANI_SET_YVEL,40000h
	WLW	ANI_SET_ZVEL,-18000h,AM_ABS
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_GOTO,efcdhit

efcdmissed
	WL	ANI_CODE,CALL_MISSES
efcdhit
	.word	ANI_DRAW_NAME,18

	WL	3,B3PJ3B+FR9
	WL	3,B3GU4A+FR4

	.word	ANI_SETMODE,MODE_NORMAL
	WL	ANI_CHANGEANIM,bam_4_faceup_getup2_anim

*****************************************************************************
*
* fqes3 FLYING BUTT-DROP

fqesyoff	equ	51

 SUBR	bam_combo_butt_drop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_SETSPEED,100h

	.word	ANI_STARTATTACK,AT_BUTTSTOMP,38
	WL	4,B3JK3A+FR4
	WL	4,B3JK3A+FR5

;	.word	ANI_TARGET,TGT_HEAD,TGT_GROIN,ATM_FARTHEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 30,999,112,96,90000h,TGT_CHEST,9,3+fqesyoff,-20

	.word	ANI_SETPLYRMODE,MODE_INAIR

	WL	ANI_CODE,no_bk_xvel
	WL	4,B3JK3A+FR6
	.word	ANI_OFFSET,0,fqesyoff,0
	WL	4,B3JK3A+FR7
	.word	ANI_ATTACK_ON,AMODE_BUTTSTOMP,-25,-7+5,55,23
	WWL	ANI_WAITHITOPP,26,B3JK3A+FR8
	.word	ANI_ATTACK_OFF

	.word	ANI_SHAKER,35
	.word	ANI_SHAKEALL,1
	WL	ANI_CODE,HIT_THE_MAT

	WL	ANI_IFNOTSTATUS,fqesmissc

	.WORD	ANI_INC_COMBO
	.word	ANI_ZEROVELS
	WL	ANI_SET_YVEL,50000h
	WLW	ANI_SET_ZVEL,18000h,AM_ABS
	WL	4,B3JK3A+FR9
	WL	4,B3JK3A+FR8
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_SHAKER,30
	.word	ANI_SHAKEALL,1
	.word	ANI_SETPLYRMODE,MODE_ONGROUND

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	4,B3JK3A+FR9
	WL	4,B3JK3A+FR10
	.word	ANI_OFFSET,15,9,0
	.word	ANI_FACEUP
	.word	ANI_XFLIP
	WL	ANI_CHANGEANIM,bam_2_faceup_getup2_anim

fqesmissc	;missed
	WL	ANI_CODE,CALL_MISSES
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	4,B3JK3A+FR9
	WL	4,B3JK3A+FR10
	.word	ANI_OFFSET,15,9,0
	.word	ANI_FACEUP
	.word	ANI_XFLIP
	WL	ANI_CHANGEANIM,bam_2_faceup_getup2_anim


 SUBR	bam_3_butt_drop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_INAIR

	.word	ANI_STARTATTACK,AT_BUTTSTOMP,38
	WL	2,B3JK3A+FR4
	WL	2,B3JK3A+FR5

	.word	ANI_TARGET,TGT_CHEST,TGT_CHEST,ATM_FARTHEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 30,999,112,96,90000h,TGT_USER,9,3+fqesyoff,-20

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_SETPLYRMODE,MODE_INAIR

	WL	ANI_CODE,no_bk_xvel
	WL	4,B3JK3A+FR6
	.word	ANI_OFFSET,0,fqesyoff,0
	WL	4,B3JK3A+FR7
	.word	ANI_ATTACK_ON,AMODE_BUTTSTOMP,-25,-7+5,55,23
	WWL	ANI_WAITHITOPP,26,B3JK3A+FR8
	.word	ANI_ATTACK_OFF

	.word	ANI_SHAKER,35
	.word	ANI_SHAKEALL,1
	WL	ANI_CODE,HIT_THE_MAT

	WL	ANI_IFNOTSTATUS,fqesmiss

fqeshit
	.word	ANI_ZEROVELS
	WL	ANI_SET_YVEL,50000h
	WLW	ANI_SET_ZVEL,18000h,AM_ABS
	WL	4,B3JK3A+FR9
	WL	4,B3JK3A+FR8
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_SHAKER,30
	.word	ANI_SHAKEALL,1
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	WL	ANI_CODE,CALL_ANI_AVERAGE_MOVE
	.word	ANI_DRAW_NAME,14

	WL	3,B3JK3A+FR9
	WL	3,B3JK3A+FR10
	.word	ANI_OFFSET,15,9,0
	.word	ANI_FACEUP
	.word	ANI_XFLIP
	WL	ANI_CHANGEANIM,bam_2_faceup_getup2_anim

fqesmiss	;missed
	WL	ANI_CODE,CALL_MISSES

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B3JK3A+FR9
	WL	3,B3JK3A+FR10
	.word	ANI_OFFSET,15,9,0
	.word	ANI_FACEUP
	.word	ANI_XFLIP
	WL	ANI_CHANGEANIM,bam_2_faceup_getup2_anim

*****************************************************************************
*
* TURNBUCKLE BELLYFLOP

 SUBR	bam_bellyflop_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_NOCONFINE|MODE_NOGRAVITY
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_SCROLL_CTRL,SC_RESTORE

	.ref	BAMFRE_P
	WLWW	ANI_SHADOWTRAIL,BAMFRE_P,3,12	;pal,rate,lifespan
	.word	ANI_STARTATTACK,AT_LEAPING,44
	WL	3,B4FK4B+FR3
	WL	3,B4FK4B+FR4
	.word	ANI_OFFSET,17,40,0

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 36,190,190,190,90000h,TGT_CHEST,18,0,20

;	.word	ANI_SETPLYRMODE,MODE_INAIR2
	WL	ANI_CODE,set_tbukl_airmode
	.word	ANI_GRAVITY_ON
	.word	ANI_SHAKECORNER

	WL	ANI_CODE,check_xvel

	.WORD	ANI_ADD_MOVE,MOVE_C_9,2,2

	WL	4,B4FK4B+FR5
	WL	4,B4FK4B+FR6
	WL	4,B4FK4B+FR7
	WL	ANI_CODE,set_tbukl_confine
	.word	ANI_ATTACK_ON_Z,AMODE_BSTOMP,-36,0,-30,110,38,60
	WWL	ANI_IFOPPMODE,MODE_ONGROUND,uodmopp_onground
	WWL	ANI_IFOPPMODE,MODE_DEAD,uodmopp_onground
	.word	ANI_ATTACK_ON_Z,AMODE_BSTOMP,-36,28,-30,110,38,60
uodmopp_onground
	WWL	ANI_WAITHITOPP,30,B4FK4B+FR8
	.word	ANI_ATTACK_OFF
	.word	ANI_SETPLYRMODE,MODE_INAIR	;no steering once you hit.
	WL	ANI_IFSTATUS,uodmhit

	;missed
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_SHADOWTRAIL,0	;off
	WL	ANI_CODE,HIT_THE_MAT
	WL	ANI_CODE,CALL_MISSES
;	WL	ANI_CODE,tbukl_miss_damage
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SHAKER,40
	.word	ANI_SHAKEALL,2
	WL	4,B4FK4B+FR9
	WL	4,B4FK4B+FR10
	.word	ANI_BOUNCE,4
	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	WL	ANI_CHANGEANIM,bam_4_faceup_getup3_anim

uodmhit
	WL	4,B4FK4F+FR9
	WL	4,B4FK4F+FR10
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHADOWTRAIL,0	;off
	WL	ANI_CODE,CALL_ANI_AVERAGE_MOVE
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_ZEROVELS
	.word	ANI_SHAKER,20
	.word	ANI_SHAKEALL,3
	.word	ANI_DRAW_NAME,21

;FIX!!!
;Jason will do...  Don't jerk opponent onto grnd if he is up in air
;This should already be working?!?
;Put in belly flop agnst inair guy here...

	WL	ANI_CODE,uodmattach_victim
	WL	ANI_SLAVEANIM,uodmrelease_table
	.word	ANI_SOUND,0A3h
	.word	ANI_DETACH

	.word	ANI_SETMODE,MODE_UNINT|MODE_INVISIBLE|MODE_NOSHADOW|MODE_NOCOLLIS
	.word	ANI_PAUSE,40

	;reappear
	WL	ANI_CODE,uodmset_new_position
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOSHADOW|MODE_NOCOLLIS|MODE_NOCONFINE

	.word	ANI_SOUND,0ABh
	WL	4,B4RS4A+FR1
	WL	4,B4RS4A+FR2
	WL	4,B4RS4A+FR3
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	WL	4,B4RS4A+FR4
	WL	4,B4RS4A+FR5
	WL	4,B4RS4A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


;attach victim just as if we'd puppeted him
 SUBRP	uodmattach_victim

	move	*a13(WHOIHIT),a14,L

	PUSH	a13
	move	a13,a10
	move	a14,a13
	calla	hit_puppet_even_if_dead		;pretend collision
	PULL	a13
	rets

 SUBRP	uodmset_new_position

	movi	uodminit_positions,a0
uodmlp1	move	*a0(uodmNXT),a14,W
	jrn	uodmusea0		;if last entry, use by default.

	;use current entry if:
	; X >= WORLDTLX+25 and
	; X <= WORLDTLX+400-25

	move	*a0(uodmXPOS),a1
	move	@WORLDTLX,a14,L
	sra	16,a14
	addk	25,a14
	cmp	a14,a1
	jrlt	uodmnxt1
	addi	350,a14
	cmp	a14,a1
	jrle	uodmusea0


uodmnxt1	addi	uodmSIZE,a0
	jruc	uodmlp1

uodmusea0	move	*a0(uodmXPOS),*a13(OBJ_XPOSINT)
	move	*a0(uodmZPOS),*a13(OBJ_ZPOSINT)
	move	*a0(uodmYPOS),*a13(OBJ_YPOSINT)
	move	*a0(uodmYPOS),*a13(GROUND_Y)
	move	*a0(uodmINRING),*a13(INRING)

	rets


	;possible reappear positions.  hunt until you find one that's
	; onscreen, then use it.  If none of them are onscreen (should
	; never happen,) use the last entry in the table.

	STRUCT	0
	WORD	uodmXPOS
	WORD	uodmZPOS
	WORD	uodmYPOS
	WORD	uodmINRING
	LABEL	uodmSIZE
	WORD	uodmNXT	;first element of NEXT entry. check for -1.

	;XPOSINT, ZPOSINT, YPOSINT/GROUND_Y, INRING
uodminit_positions
	.word	RING_X_CENTER,RING_Z_CENTER,MAT_Y,0	;center
	.word	RING_TOP_LEFT,RING_Z_CENTER,MAT_Y,0	;center left
	.word	RING_TOP_RIGHT,RING_Z_CENTER,MAT_Y,0	;center right
	.word	RING_BOT_LEFT,RING_BOT,MAT_Y,0		;bottom left
	.word	RING_BOT_RIGHT,RING_BOT,MAT_Y,0		;bottom right

	;various outside points.
	.word	675,1184,0,1,	1475,921,0,1
	.word	965,683,0,1,	1253,656,0,1
	.word	814,1648,0,1,	1415,1608,0,1
	.word	1097,1648,0,1,	659,696,0,1
	.word	528,1657,0,1,	1652,1615,0,1
	.word	1709,699,0,1,	1791,1174,0,1
	.word	1874,1548,0,1

	.word	RING_X_CENTER,RING_Z_CENTER,MAT_Y,0	;center
	.word	-1


 SUBR	burn_tbl
 SUBRP	uodmrelease_table
	.long	xxx_burn_anim,xxx_burn_anim,xxx_burn_anim
	.long	xxx_burn_anim,xxx_burn_anim,xxx_burn_anim
	.long	xxx_burn_anim,xxx_burn_anim,xxx_burn_anim

*****************************************************************************
*
* BURN FROM BAM BAM FLAMING TURNBUCKLE SPLASH (generic - everyone uses this)

 SUBR	xxx_burn_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	WL	ANI_CODE,ksujhit_ground
	WL	ANI_CODE,ksujset_pal
	WL	6,B4FK4F+FR11
	WL	6,B4FK4F+FR12
	WL	5,B4FK4F+FR13
	WL	5,B4FK4F+FR14

	.word	ANI_SET_RPTCOUNT,2
ksujloop
	WL	4,BURNBODY+FR1
	WL	4,BURNBODY+FR2
	WL	4,BURNBODY+FR3
	WL	4,BURNBODY+FR4
	WL	4,BURNBODY+FR5
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,ksujloop

	;done looping
	WL	ANI_CODE,ksujrestore_pal

	WL	ANI_CODE,am_I_dead
	WL	ANI_IFNOTSTATUS,ksujnodead
	WL	ANI_CHANGEANIM_TBL,ksujconvulse

ksujnodead
	WL	ANI_CHANGEANIM_TBL,ksujliedown_table


;Immediately snap to ground when the burn begins.
 SUBRP	ksujhit_ground
	move	*a13(GROUND_Y),*a13(OBJ_YPOSINT)
	rets

 SUBRP	ksujset_pal
	movi	BAMBLU_P,a0
	calla	pal_getf
	move	*a13(OBJ_PAL),*a13(MY_PAL),W
	move	a0,*a13(OBJ_PAL),W

	;set the TEMP_PAL bit
	move	*a13(STATUS_FLAGS),a14
	ori	M_TEMP_PAL,a14
	move	a14,*a13(STATUS_FLAGS)

	rets

 SUBRP	ksujrestore_pal
	move	*a13(MY_PAL),*a13(OBJ_PAL),W

	;clear TEMP_PAL bit
	move	*a13(STATUS_FLAGS),a14
	andni	M_TEMP_PAL,a14
	move	a14,*a13(STATUS_FLAGS)

	rets


ksujliedown_table
	REFLONG	hrt_liedown_anim		;0 Bret Hart
	REFLONG	rzr_liedown_anim		;1 Razor Ramon
	REFLONG	und_liedown_anim		;2 Undertaker
	REFLONG	yok_liedown_anim		;3 Yokozuna
	REFLONG	shn_liedown_anim		;4 Shawn Michaels
	REFLONG	bam_liedown_anim		;5 Bam Bam
	REFLONG	dnk_liedown_anim		;6 Doink
	.long	0
	REFLONG	lex_liedown_anim		;8 Lex Luger

ksujconvulse
	REFLONG	hrt_hitonground_anim		;0 Bret Hart
	REFLONG	rzr_hitonground_anim		;1 Razor Ramon
	REFLONG	und_hitonground_anim		;2 Undertaker
	REFLONG	yok_hitonground_anim		;3 Yokozuna
	REFLONG	shn_hitonground_anim		;4 Shawn Michaels
	REFLONG	bam_hitonground_anim		;5 Bam Bam
	REFLONG	dnk_hitonground_anim		;6 Doink
	.long	0				;7 spare
	REFLONG	lex_hitonground_anim		;8 Lex Luger

*****************************************************************************
*
* dklk2 HEADBUTT

 SUBR	bam_2_butt_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP


	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2BC3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2BC3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2BC3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_STARTATTACK,AT_HDBUTT,12
	WL	3,B2BC3A+FR3
	WL	3,B2BC3A+FR4
	WL	3,B2BC3A+FR5
	WL	3,B2BC3A+FR6

	.word	ANI_ATTACK_ON, AMODE_HDBUTT,5,79,40,19	;mode,x,y,w,h
	WL	3,B2BC3A+FR7
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,dklkno_hit

	WL	ANI_SET_YVEL,38000h
	WL	6,B2BC3A+FR7
dklkno_hit
	WL	5,B2BC3A+FR7
	WL	3,B2BC3A+FR8

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

* dklk4 HEADBUTT

 SUBR	bam_4_butt_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4BC3A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4BC3A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4BC3A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_STARTATTACK,AT_HDBUTT,12
	WL	3,B4BC3A+FR2
	WL	3,B4BC3A+FR3
	WL	3,B4BC3A+FR4
	WL	3,B4BC3A+FR5

	.word	ANI_ATTACK_ON, AMODE_HDBUTT,5,79,40,19	;mode,x,y,w,h
	WL	3,B4BC3A+FR6
	.word	ANI_ATTACK_OFF
	WWL	ANI_SLIDE_BACK,30h,-70000h,dklkno_hit2

	WL	ANI_SET_YVEL,38000h
	WL	6,B4BC3A+FR6
dklkno_hit2
	WL	5,B4BC3A+FR6
	WL	3,B4BC3A+FR7

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* mpxs2 HEADBUTTS - In close

 SUBR	bam_2_butts_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_SET_RPTCOUNT,3	;5 times
mpxsrpt
	.word	ANI_CLR_BUTCOUNT

	.word	ANI_STARTATTACK,AT_HDBUTT,6
	WL	2,B2BC3A+FR2
	WL	1,B2BC3A+FR3
	WL	2,B2BC3A+FR4
	WL	1,B2BC3A+FR5
	WL	2,B2BC3A+FR6

	.word	ANI_ATTACK_ON, AMODE_HDBUTT_STAY,5,79,40,19	;mode,x,y,w,h
	WL	2,B2BC3A+FR7
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,mpxsno_hit
	WL	ANI_SET_YVEL,38000h
	WL	6,B2BC3A+FR7
mpxsno_hit
	WL	ANI_IFNOTSTATUS,mpxsmissed
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFBLOCKED,mpxsmissedb		;Yes, I hit blocker

	.word	ANI_SET_ATTACH
	.word	ANI_DEBRISAT,200,2,0,100,0	;%chance, tbl index, x,y,z off
	WL	ANI_CODE,create_impact
	WL	ANI_CODE,impact_sound
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,25
	.word	ANI_DETACH

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,mpxsex
	.word	ANI_DEC_RPTCOUNT

	WL	2,B2BC3A+FR7
	WL	2,B2BC3A+FR8

	WL	ANI_IF_RPTCOUNT,mpxsrpt
	WL	ANI_CHANGEANIM,bam_2_knee_anim

mpxsex
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,40000h,38000h,0h		;x,y,z vels

	WL	3,B2BC3A+FR7
	WL	3,B2BC3A+FR8

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

mpxsmissedb
	WLLL	ANI_SETOPPVELS,50000h,18000h,0h		;x,y,z vels
;	WL	3,B2BC3A+FR7
mpxsmissed
	WL	2,B2BC3A+FR7
	WL	2,B2BC3A+FR8

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

* #4 HEADBUTT

 SUBR	bam_4_butts_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_SET_RPTCOUNT,3	;5 times
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
hnpcrpt
	.word	ANI_CLR_BUTCOUNT
	.word	ANI_STARTATTACK,AT_HDBUTT,6
	WL	2,B4BC3A+FR1
	WL	1,B4BC3A+FR2
	WL	2,B4BC3A+FR3
	WL	1,B4BC3A+FR4
	WL	2,B4BC3A+FR5
	.word	ANI_ATTACK_ON, AMODE_HDBUTT_STAY,5,79,40,19	;mode,x,y,w,h
	WL	2,B4BC3A+FR6
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,hnpcmissed
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFBLOCKED,hnpcmissedb		;Yes, I hit blocker

	WL	ANI_CODE,create_impact

	.word	ANI_SET_ATTACH
	.word	ANI_DEBRISAT,100,2,0,100,0	;%chance, tbl index, x,y,z off
	WL	ANI_CODE,impact_sound
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,25
	.word	ANI_DETACH

	WWL	ANI_SLIDE_BACK,30h,-70000h,hnpcno_hit2

	WL	ANI_SET_YVEL,38000h
	WL	6,B4BC3A+FR6
hnpcno_hit2

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,hnpcex
	.word	ANI_DEC_RPTCOUNT

	WL	2,B4BC3A+FR6
	WL	2,B4BC3A+FR7

	WL	ANI_IF_RPTCOUNT,hnpcrpt
	WL	ANI_CHANGEANIM,bam_4_knee_anim
hnpcex
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,40000h,38000h,0h		;x,y,z vels

	WL	3,B4BC3A+FR6
	WL	3,B4BC3A+FR7
   
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

hnpcmissedb
	WLLL	ANI_SETOPPVELS,50000h,18000h,0h		;x,y,z vels
;	WL	3,B4BC3A+FR6
hnpcmissed
	WL	2,B4BC3A+FR6
	WL	2,B4BC3A+FR7
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* vmwa2 KICK - Against TB attacks

 SUBR	bam_kick_TB_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_SETPLYRMODE,MODE_INAIR2
	.word	ANI_STARTATTACK,AT_LEAPING,12

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	3,B2KM3B+FR2
	WL	ANI_SET_YVEL,70000h
	WLW	ANI_SET_XVEL,-20000h,AM_FACE_REL
	WL	2,B2KM3B+FR2
	WL	2,B2KM3B+FR3
	WL	2,B2KM3B+FR4
	.word	ANI_ATTACK_ON, AMODE_SPINKICK,35,65,66,43	;mode,x,y,w,h
	WL	10,B2KM3B+FR5
	.word	ANI_ATTACK_OFF
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	WL	3,B2KM3B+FR6
	WL	2,B2KM3B+FR7
	WL	3,B2KM3B+FR8
	WL	2,B2KM3B+FR9
	WL	3,B2KM3B+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* nwii2 KICK

 SUBR	bam_2_kick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP


	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2KM3B+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2KM3B+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2KM3B+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.word	ANI_STARTATTACK,AT_KICK,5
	WL	1,B2KM3B+FR2
	WL	2,B2KM3B+FR3
	WL	2,B2KM3B+FR4

	WL	ANI_SET_YVEL,20000h
	.word	ANI_ATTACK_ON, AMODE_KICK,35,65,66,43	;mode,x,y,w,h
	WL	6,B2KM3B+FR5
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,nwiino_hit2
	WL	ANI_SET_YVEL,30000h
	WL	6,B2KM3B+FR5

nwiino_hit2
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B2KM3B+FR6
	WL	2,B2KM3B+FR7
	WL	3,B2KM3B+FR8
	WL	2,B2KM3B+FR9
	WL	3,B2KM3B+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

************
*
* sxli4 KICK

 SUBR	bam_4_kick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP


	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4KM3A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4KM3A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4KM3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.word	ANI_STARTATTACK,AT_KICK,5
	WL	1,B4KM3A+FR2
	WL	2,B4KM3A+FR3
	WL	2,B4KM3A+FR4

	WL	ANI_SET_YVEL,20000h
	.word	ANI_ATTACK_ON, AMODE_KICK,37,62,62,35	;mode,x,y,w,h
	WL	6,B4KM3A+FR5
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,sxlino_hit2
	WL	ANI_SET_YVEL,30000h
	WL	6,B4KM3A+FR5

sxlino_hit2
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B4KM3A+FR6
	WL	2,B4KM3A+FR7
	WL	3,B4KM3A+FR8
	WL	2,B4KM3A+FR9
	WL	3,B4KM3A+FR10

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

************
*
* uyor2 SUPER KARATE KICK

 SUBR	bam_2_superkick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WL	3,B2BG3A+FR1

* uyor4 SUPER KARATE KICK

 SUBR	bam_4_superkick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_LEAPING,10
	WL	2,B4KM3E+FR1

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,999,65-5,40,90000h,TGT_HEAD,64,82,10
;	WLW	ANI_SET_ZVEL,0h,AM_ABS
	WL	ANI_SET_YVEL,30000h
	.word	ANI_FRICTION,4000h
	WL	4,B4KM3E+FR2
	WL	3,B4KM3E+FR3
	.word	ANI_ATTACK_ON, AMODE_SUPER_KICK,12,58,60,40	;mode,x,y,w,h
	WL	2,B4KM3E+FR5
	WLW	ANI_SET_ZVEL,0h,AM_ABS
	WL	5,B4KM3E+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,uyormissed
	WL	ANI_IFBLOCKED,uyormissedb		;Yes, I hit blocker

;hit
	WL	ANI_CODE,create_impact2
	WL	ANI_CODE,DO_FLAME_HIT_SND
	WL	ANI_CODE,CALL_NASTY_MOVE

	.word	ANI_ZEROVELS
	WWL	ANI_SLIDE_BACK,30h,-70000h,uyorno_hit2
	WL	ANI_SET_YVEL,30000h
	WL	7,B4KM3E+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

uyorno_hit2

	WL	ANI_CODE,CALL_MISSES
	.word	ANI_WAITHITGND
	WL	3,B4KM3E+FR5


	WL	ANI_CODE,skick_delay
	WL	ANI_IFNOTSTATUS,uyornone
	WL	20,B4KM3E+FR5
uyornone

	WL	2,B4KM3E+FR6
	WL	3,B4KM3E+FR7
	WL	2,B4KM3E+FR7
	WL	3,B4KM3E+FR8
	WL	2,B4KM3E+FR9
	WL	3,B4KM3E+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


uyormissedb
	WWL	ANI_SLIDE_BACK,30h,-70000h,uyormissed
	WL	ANI_SET_YVEL,30000h
	WL	7,B4KM3E+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

uyormissed
	WL	ANI_CODE,CALL_MISSES
	WL	3,B4KM3E+FR5
	.word	ANI_WAITHITGND
	WL	ANI_CODE,skick_delay
	WL	ANI_IFNOTSTATUS,uyornone2
	WL	20,B4KM3E+FR5
uyornone2
	WL	3,B4KM3E+FR6
	WL	2,B4KM3E+FR7
	WL	3,B4KM3E+FR8
	WL	2,B4KM3E+FR9
	WL	3,B4KM3E+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


 SUBR	bam_combo_superkick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	.word	ANI_STARTATTACK,AT_KICK,10
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
	WL	ANI_CODE,DO_FLAME_SND
	WL	2,B4KM3E+FR1

	WL	2,B4KM3E+FR2
	WL	2,B4KM3E+FR3
	.word	ANI_ATTACK_ON, AMODE_KICK,12,28,60,60	;mode,x,y,w,h
	WL	1,B4KM3E+FR5
	WLW	ANI_SET_XVEL,0000h,AM_ABS
	WLW	ANI_SET_ZVEL,0h,AM_FACE_REL
	WL	2,B4KM3E+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,uyormissedc
	WL	ANI_IFBLOCKED,uyormissedc		;Yes, I hit blocker
	WL	ANI_CODE,DO_FLAME_HIT_SND
	.WORD	ANI_INC_COMBO
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,0,20000h,0h		;x,y,z vels

	WL	ANI_CODE,create_impact2

	WL	2,B4KM3E+FR5
	WL	2,B4KM3E+FR6
	WL	2,B4KM3E+FR7
	WL	2,B4KM3E+FR8
	WL	2,B4KM3E+FR9
	WL	2,B4KM3E+FR10
	.word	ANI_SET_RPTCOUNT,3	;3 times
uyork_loop
	.word	ANI_CLR_BUTCOUNT
	.word	ANI_STARTATTACK,AT_KICK,10
	WLW	ANI_SET_XVEL,10000h,AM_FACE_REL
	WL	ANI_CODE,DO_FLAME_SND
	WL	1,B4KM3E+FR1

	WL	1,B4KM3E+FR2
	WL	2,B4KM3E+FR3
	.word	ANI_ATTACK_ON, AMODE_KICK,12,28,60,60	;mode,x,y,w,h
	WL	1,B4KM3E+FR5
	WLW	ANI_SET_XVEL,0000h,AM_ABS
	WLW	ANI_SET_ZVEL,0h,AM_FACE_REL
	WL	1,B4KM3E+FR5
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,uyormissedc
	WL	ANI_IFBLOCKED,uyormissedc		;Yes, I hit blocker
	WL	ANI_CODE,DO_FLAME_HIT_SND
	.WORD	ANI_INC_COMBO
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,0,20000h,0h		;x,y,z vels

	WL	ANI_CODE,create_impact2

	WL	1,B4KM3E+FR5
	WL	1,B4KM3E+FR6
	WL	1,B4KM3E+FR7
	WL	1,B4KM3E+FR8
	WL	1,B4KM3E+FR9
	WL	1,B4KM3E+FR10

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,uyork_loop

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,uyorCHECK_NEXT2
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_combo_hiptoss_anim

uyorCHECK_NEXT2
	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,uyorCHECK_NEXT1A
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_flying_kick_no_xvel

uyorCHECK_NEXT1A
	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,uyorCHECK_NEXT1
	WL	ANI_CHANGEANIM,bam_combo_pogo_anim

uyorCHECK_NEXT1
	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,uyorNOT_HIT_AT_ALL
	WLW	ANI_SET_XVEL,8000h,AM_FACE_REL
	WL	ANI_CHANGEANIM,bam_combo_slap_anim_no_vel

uyorNOT_HIT_AT_ALL
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.word	ANI_DETACH
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

uyormissedc
	WL	ANI_CODE,CALL_MISSES
	WL	3,B4KM3E+FR5
	.word	ANI_WAITHITGND
	WL	3,B4KM3E+FR6
	WL	3,B4KM3E+FR7
	WL	3,B4KM3E+FR8
	WL	3,B4KM3E+FR9
	WL	3,B4KM3E+FR10

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.word	ANI_DETACH
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************
*
* qpmu2 & qpmu4 TURBO KICK

 SUBR	bam_4_jumpkick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

;;;	.word	ANI_SLOWMO,2
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_LEAPING,19
	WL	3,B4KM3H+FR2
	WL	3,B4KM3H+FR3
	WL	3,B4KM3H+FR4

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 10,999,100,54,90000h,TGT_HEAD,70,100,20
	WL	ANI_CODE,no_bk_xvel

	WL	4,B4KM3H+FR5
	WL	3,B4KM3H+FR6
	WL	3,B4KM3H+FR7


	.word	ANI_ATTACK_ON, AMODE_JUMPKICK,49,87,34,20	;mode,x,y,w,h
	WL	3,B4KM3H+FR9
	.word	ANI_ZERO_XZVELS
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,qpmuno_slide
	WL	ANI_SET_YVEL,30000h
qpmuno_slide

	WL	ANI_IFNOTSTATUS,qpmumissed
	WL	ANI_IFBLOCKED,qpmumissedb

	.word	ANI_SHAKER,35

	WL	6,B4KM3H+FR9

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	6,B4KM3H+FR9

	WL	3,B4KM3H+FR10
	WL	3,B4KM3H+FR11
	WL	3,B4KM3H+FR12

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

qpmumissedb
	WL	6,B4KM3H+FR9
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
qpmumissed
	WL	6,B4KM3H+FR9
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	3,B4KM3H+FR10
	WL	3,B4KM3H+FR11
	WL	3,B4KM3H+FR12

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* hdtu3 FLYING KICK

 SUBR	bam_flying_kick_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	.word	ANI_STARTATTACK,AT_LEAPING,20
	WL	3,B3DC3B+FR4

;	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 14,999,145,65,90000h,TGT_HEAD,57,75,0
	WL	ANI_CODE,no_bk_xvel

	WL	4,B3DC3B+FR5
	WL	5,B3DC3B+FR6
	.word	ANI_OFFSET,0,50,0			;x,y,z
	WL	3,B3DC3B+FR7


;	.word	ANI_ATTACK_ON, AMODE_FLYKICK,53,-10,27,49 ;mode,x,y,w,h
	.word	ANI_ATTACK_ON,AMODE_FLYKICK,-34,16,110,36
	WL	3,B3DC3B+FR8
	.word	ANI_ATTACK_OFF

	WL	ANI_IFBLOCKED,hdtumissedb		;Yes, I hit blocker
	WL	ANI_IFNOTSTATUS,hdtuhit
;A hit
	WL	ANI_CODE,create_impact_flykick
	WL	ANI_GOTO,hdtuhit
hdtumissedb
;	.word	ANI_ZERO_XZVELS
	WLW	ANI_SET_ZVEL,0,AM_ABS
hdtuhit

	WL	3,B3DC3B+FR9
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_BOUNCE,3

	WL	3,B3DC3B+FR11
;	WL	3,B3DC3B+FR9
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
;	WL	2,B3DC3B+FR9

	WL	5,B3DC3B+FR11

	.word	ANI_XFLIP
	.word	ANI_OFFSET,5,0,0			;x,y,z

	WL	3,B3GU2A+FR5
	WL	2,B3GU2A+FR6
	WL	3,B3GU2A+FR7
	WL	2,B3GU2A+FR8
	WL	3,B3GU2A+FR9

;Check for a flip here
	WL	1,B3GU2A+FR10
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	WL	1,B3GU2A+FR10

	WL	2,B3GU2A+FR10
	WL	3,B3GU2A+FR11
	WL	2,B3GU2A+FR12
	WL	3,B3GU2A+FR13

	.word	ANI_SAFE_TIME,30

	WL	ANI_CODE,free_toss_check
	WL	ANI_IFNOTSTATUS,hdtuno_freetoss
	.word	ANI_ATTACK_ON,AMODE_HITCHECK,36,85,49,17
	WL	1,B3GU2A+FR13
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,hdtuno_freetoss

	;Opponent standing too close -- free toss
	WL	ANI_CODE,setup_freetoss
	WL	ANI_CHANGEANIM,bam_4_push_anim
hdtuno_freetoss

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBRP	bam_flying_kick_no_xvel

	.word	ANI_STARTATTACK,AT_LEAPING,20
	WLW	ANI_SET_XVEL,20000h,AM_FACE_REL
	WL	ANI_SET_YVEL,44000h
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	4,B3DC3B+FR5
	WL	7,B3DC3B+FR6
	.word	ANI_OFFSET,0,50,0			;x,y,z
	WL	3,B3DC3B+FR7

	.word	ANI_CLR_STATUS

	.word	ANI_ATTACK_ON, AMODE_FLYKICK,53,-10,27,49 ;mode,x,y,w,h
	WL	3,B3DC3B+FR8
	.word	ANI_ATTACK_OFF
	.WORD	ANI_INC_COMBO
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	3,B3DC3B+FR9
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_BOUNCE,3

	WL	3,B3DC3B+FR11
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT

	WL	5,B3DC3B+FR11

	.word	ANI_XFLIP
	.word	ANI_OFFSET,5,0,0			;x,y,z

	WL	3,B3GU2A+FR5
	WL	3,B3GU2A+FR6
	WL	3,B3GU2A+FR7
	WL	3,B3GU2A+FR8
	WL	3,B3GU2A+FR9

;Check for a flip here
	WL	1,B3GU2A+FR10
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	WL	2,B3GU2A+FR10

	WL	3,B3GU2A+FR10
	WL	3,B3GU2A+FR11
	WL	3,B3GU2A+FR12
	WL	3,B3GU2A+FR13

	.word	ANI_SAFE_TIME,30

	WL	ANI_CODE,free_toss_check
	WL	ANI_IFNOTSTATUS,hdtuno_freetoss1
	.word	ANI_ATTACK_ON,AMODE_HITCHECK,36,85,49,17
	WL	1,B3GU2A+FR13
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,hdtuno_freetoss1

	;Opponent standing too close -- free toss
	WL	ANI_CODE,setup_freetoss
	WL	ANI_CHANGEANIM,bam_4_push_anim
hdtuno_freetoss1

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************
*
* tnlc2 STOMP ON FALLEN OPPONENT

 SUBR	bam_2_stomp_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2MP2A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2MP2A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2MP2A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_STARTATTACK,AT_STOMP,12
	WL	2,B2MP2A+FR2

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_ATTACK_ON_Z,AMODE_HITCHECK,13,0,-40,22,28,50
	WL	1,B2MP2A+FR2
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,tnlcleapat_stomp

	WL	3,B2MP2A+FR3
	WL	3,B2MP2A+FR4
	WL	3,B2MP2A+FR5
	.word	ANI_ATTACK_ON_Z,AMODE_STOMP,13,0,-40,22,28,50
	WL	1,B2MP2A+FR6
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,tnlcmissed
	.word	ANI_SHAKER,20
	.word	ANI_SHAKEALL,1
	WL	ANI_GOTO,tnlchit
tnlcmissed
	WL	ANI_CODE,CALL_MISSES
tnlchit
	WL	3,B2MP2A+FR6
	WL	3,B2MP2A+FR7
	WL	3,B2MP2A+FR8
	WL	3,B2MP2A+FR9

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END



tnlcleapat_stomp
	.word	ANI_TARGET,TGT_CHEST,TGT_GROIN,ATM_CLOSEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 16,999,160,140,40000h,TGT_USER,24,0,-30
	WL	ANI_CODE,no_bk_xvel

	WL	4,B2MP2A+FR3
	WL	4,B2MP2A+FR4
	WL	4,B2MP2A+FR5
	.word	ANI_ATTACK_ON_Z,AMODE_STOMP,13,0,-40,22,28,50
	WL	1,B2MP2A+FR6
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,tnlcl_missed
	.word	ANI_SHAKER,20
	.word	ANI_SHAKEALL,1
	WL	ANI_SET_YVEL,40000h
	WLW	ANI_SET_ZVEL,13000h,AM_ABS
	WL	ANI_GOTO,tnlcl_hit
tnlcl_missed
	WL	ANI_CODE,CALL_MISSES
tnlcl_hit
	WL	3,B2MP2A+FR6
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B2MP2A+FR7
	WL	3,B2MP2A+FR8
	WL	3,B2MP2A+FR9

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


************
*
* ltpo4 STOMP ON FALLEN OPPONENT

 SUBR	bam_4_stomp_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4MP4A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4MP4A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4MP4A+FR1
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	WL	2,B4MP4A+FR2
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2

	.word	ANI_ATTACK_ON_Z,AMODE_HITCHECK,-3,-5,-10,46,35,50
	WL	1,B4MP4A+FR2
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,ltpoleapat

	.word	ANI_STARTATTACK,AT_STOMP,8
	WL	3,B4MP4A+FR3
	WL	3,B4MP4A+FR4
	WL	2,B4MP4A+FR5
	.word	ANI_ATTACK_ON_Z,AMODE_STOMP,-3,-5,-10,46,35,50
	WL	1,B4MP4A+FR6
	.word	ANI_ATTACK_OFF
	WL	ANI_GOTO,ltpocommon

ltpoleapat
	.word	ANI_TARGET,TGT_CHEST,TGT_GROIN,ATM_CLOSEST
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 16,999,160,140,40000h,TGT_USER,12,0,30
	WL	ANI_CODE,no_bk_xvel

	.word	ANI_STARTATTACK,AT_STOMP,16
	WL	3,B4MP4A+FR3
	WL	3,B4MP4A+FR4
	WL	3,B4MP4A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_ATTACK_ON_Z,AMODE_STOMP,-3,-5,-10,46,35,50
	WL	1,B4MP4A+FR6
	.word	ANI_ATTACK_OFF

ltpocommon
	WL	ANI_IFNOTSTATUS,ltpomissed
	.word	ANI_SHAKER,25
	.word	ANI_SHAKEALL,1
	WL	ANI_GOTO,ltpohit
ltpomissed
	WL	ANI_CODE,CALL_MISSES
ltpohit
	WL	3,B4MP4A+FR6
	WL	3,B4MP4A+FR7
	WL	3,B4MP4A+FR8
	WL	3,B4MP4A+FR9

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

;*****************************************************************************
;*
;* ltpo2 BIG BOOT
;* ltpo4 BIG BOOT
;
; SUBR	bam_4_bigboot_anim
;
;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
;	.word	ANI_SETSPEED,100h
;	.word	ANI_ZEROVELS
;
;	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
;	.word	ANI_SET_WRESTLER_XFLIP
;
;	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
;	.word	ANI_STARTATTACK,AT_BIGBOOT,12
;	WL	2,B4KM3A+FR1
;	WL	2,B4KM3A+FR2
;	WL	2,B4KM3A+FR3
;	WL	2,B4KM3A+FR4
;
;	WL	ANI_CODE,ltpoclrcnt
;	WL	ANI_SET_YVEL,20000h
;	.word	ANI_ATTACK_ON, AMODE_BIGBOOT,37,62,62,35	;mode,x,y,w,h
;	WWL	ANI_WAITHITOPP,10,B4KM3A+FR5
;;	.word	ANI_WAITHITGND
;;	.word	ANI_ZEROVELS
;ltpolp0
;	.word	ANI_STARTATTACK,AT_BIGBOOT,5
;	WL	2,B4KM3A+FR5
;	WL	ANI_CODE,ltpoholdup
;	WL	ANI_IFSTATUS,ltpolp0
;	.word	ANI_ATTACK_OFF
;	WL	ANI_IFNOTSTATUS,ltpomissed
;	.word	ANI_DRAW_NAME,27
;ltpomissed
;
;	WL	3,B4KM3A+FR6
;	WL	3,B4KM3A+FR7
;	WL	3,B4KM3A+FR8
;	WL	3,B4KM3A+FR9
;	WL	3,B4KM3A+FR10
;
;	.word	ANI_SETMODE,MODE_NORMAL
;	.word	ANI_END
;
;ltpoclrcnt
;;We are re-using BUT_COUNT in the player process
;	clr	a0
;	move	a0,*a13(BUT_COUNT)
;	rets
;
;ltpoholdup
;	move	*a13(BUT_COUNT),a0
;	inc	a0
;	move	a0,*a13(BUT_COUNT)
;
;;Max time to hold up in air (*2 ticks)
;	cmpi	25,a0
;	jrgt	ltpobutton_up
;
;	move	*a13(BUT_VAL_CUR),a0
;	btst	PLAYER_SKICK_BIT,a0		;still down?
;	jrz	ltpobutton_up
;
;;Still holding...
;
;	move	*a13(ANIMODE),a1
;	ori	MODE_STATUS,a1
;	move	a1,*a13(ANIMODE)
;	rets
;
;ltpobutton_up
;	move	*a13(ANIMODE),a1
;	andni	MODE_STATUS,a1
;	move	a1,*a13(ANIMODE)
;	rets
;

*****************************************************************************
*
* dvwb2 KNEE

 SUBR	bam_2_knee_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_KNEE,6

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2NM3A+FR3
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2NM3A+FR3
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B2NM3A+FR3
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 21,999,36,30,90000h,TGT_CHEST,56,74+10,0

	WL	3,B2NM3A+FR4

	.word	ANI_ATTACK_ON, AMODE_KNEE,34,31,52,51	;mode,x,y,w,h
	WL	3,B2NM3A+FR5
	.word	ANI_ATTACK_OFF
	WWL	ANI_SLIDE_BACK,30h,-70000h,dvwbno_hit
	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_ZVEL,10000h,AM_ABS
	WL	3,B2NM3A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_GOTO,dvwbcont

dvwbno_hit
	WL	ANI_IFNOTSTATUS,dvwbnodrft
	WLW	ANI_SET_ZVEL,10000h,AM_ABS
	WL	15,B2NM3A+FR5
	.word	ANI_ZERO_XZVELS
dvwbnodrft
	WL	1,B2NM3A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZERO_XZVELS
	WL	3,B2NM3A+FR5
dvwbcont
	WL	3,B2NM3A+FR6
	WL	3,B2NM3A+FR7
	WL	3,B2NM3A+FR8

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

* dvwb4 KNEE

 SUBR	bam_4_knee2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_KNEE,6

	WL	1,B4NM3A+FR2
	WL	ANI_GOTO,dvwbcont2a

 SUBR	bam_4_knee_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_KNEE,6

	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4NM3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4NM3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
	WL	1,B4NM3A+FR2
	WWL	ANI_IFBUTTONS,PLAYER_PUNCH_VAL|PLAYER_KICK_VAL,start_run_anim
dvwbcont2a
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 21,999,36,20,90000h,TGT_CHEST,46,74+10,0
	WL	3,B4NM3A+FR3
	WL	3,B4NM3A+FR4

	.word	ANI_ATTACK_ON, AMODE_KNEE,29,32,46,40	;mode,x,y,w,h
	WL	3,B4NM3A+FR5
	.word	ANI_ATTACK_OFF

	WWL	ANI_SLIDE_BACK,30h,-70000h,dvwbno_hit2
	WL	ANI_SET_YVEL,60000h
	WLW	ANI_SET_ZVEL,-10000h,AM_ABS
	WL	3,B4NM3A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_GOTO,dvwbcont2
dvwbno_hit2
	WL	1,B4NM3A+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZERO_XZVELS
dvwbcont2
	WL	3,B4NM3A+FR5
	WL	3,B4NM3A+FR4
	WL	3,B4NM3A+FR3
	WL	3,B4NM3A+FR2

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* GRAB & FLING OPPONENT (INTO A RUN)


 SUBR	bam_2_grabfling_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_STARTATTACK,AT_PUPPET,10

	WL	2,B1TT5Z+FR2
	WL	2,B1TT5Z+FR3
	WL	ANI_GOTO,bzxscont

 SUBR	bam_4_grabfling_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_STARTATTACK,AT_PUPPET,8

bzxscont
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,50,20,40,90000h,TGT_CHEST,40,0,25
	WL	ANI_SET_YVEL,0000h

	WL	5,B4GF3A+FR1

	.word	ANI_ATTACK_ON, AMODE_PUPPET_NOFLAIL,33,56,44,18 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,6,B4GF3A+FR2
	.word	ANI_ZERO_XZVELS
	WWL	ANI_WAITHITOPP,2,B4GF3A+FR3
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,bzxsmissedb
	WL	ANI_IFBLOCKED,bzxsmissedb		;Yes, I hit blocker

;got him
	WL	ANI_CODE,DO_GRUNT
	WL	ANI_CODE,CALL_SETUP
	.word	ANI_ATTACHZ,0,0,10		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

; attacker sequence
	WWLLW	ANI_SUPERSLAVE2,10,B4GF3A+FR4,bzxspuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,5,B4GF3A+FR5,bzxspuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,4,B4GF3A+FR6,bzxspuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,3,B4GF3A+FR7,bzxspuppet_tbl,3
	WWLLW	ANI_SUPERSLAVE2,3,B4GF3A+FR8,bzxspuppet_tbl,4
	WWLLW	ANI_SUPERSLAVE2,3,B4GF3A+FR9,bzxspuppet_tbl,5

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_SLAVEANIM,bzxsstrt_run_tbl

	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_DETACH
	WL	6,B4GF3A+FR9
	WL	4,B4GF3A+FR11

	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


bzxsmissedb
	WL	ANI_CODE,fling_delay
	WL	ANI_IFNOTSTATUS,bzxsmissed
	WL	25,B4GF3A+FR3
bzxsmissed
	WL	ANI_CODE,CALL_MISSES
	WL	6,B4GF3A+FR3
	WL	3,B4GF3A+FR2
	WL	3,B4GF3A+FR1

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


bzxspuppet_tbl
 .long bzxsBret
 .long bzxsRazor
 .long bzxsTaker
 .long bzxsYokozuna
 .long bzxsShawn
 .long bzxsBamBam
 .long bzxsDoink
 .long bzxsAdam
 .long bzxsLex

	.ref	H4YR3A,H3RN3A
	.ref	R4YR3A,R3RN3D
	.ref	U4YR3B,U3RN3A
	.ref	Y4YR3A,Y3RN3C
	.ref	S4YR3A,S3RN3A
	.ref	B4YR3A,B3RN3A
	.ref	D4YR3B,D3RN3B
	.ref	L4YR3B,L3RN3B

bzxsBret
 LWWW H4YR3A+FR1,54,5,1
 LWWW H4YR3A+FR2,44,7,1
 LWWW H4YR3A+FR3,34,12,1
 LWWW H4YR3A+FR5,16,8,1
 LWWW H3RN3A+FR1,10,-10,0
 LWWW H3RN3A+FR2,-45,-8,0
bzxsRazor
 LWWW R4YR3A+FR1,37,14,0
 LWWW R4YR3A+FR2,21,18,0
 LWWW R4YR3A+FR3,-9,14,0
 LWWW R4YR3A+FR4,-28,10,0
 LWWW R3RN3D+FR10,16,3,0
 LWWW R3RN3D+FR11,-29,2,0
bzxsTaker
 LWWW U4YR3B+FR2,42,18,0
 LWWW U4YR3B+FR3,37,15,0
 LWWW U4YR3B+FR4,15,26,0
 LWWW U4YR3B+FR5,4,19,0
 LWWW U3RN3A+FR1,17,4,0
 LWWW U3RN3A+FR2,-31,1,0
bzxsYokozuna
 LWWW Y4YR3A+FR1,54,10,1
 LWWW Y4YR3A+FR4,25,13,1
 LWWW Y4YR3A+FR5,14,17,1
 LWWW Y4YR3A+FR7,-10,1,1
 LWWW Y3RN3C+FR7,34,3,0
 LWWW Y3RN3C+FR8,2,0,0
bzxsShawn
 LWWW S4YR3A+FR2,36,4,1
 LWWW S4YR3A+FR3,45,-4,1
 LWWW S4YR3A+FR5,8,14,1
 LWWW S4YR3A+FR6,-4,6,1
 LWWW S3RN3A+FR2,18,-4,0
 LWWW S3RN3A+FR3,-19,-5,0
bzxsBamBam
 LWWW B4YR3A+FR3,46,11,0
 LWWW B4YR3A+FR4,53,7,0
 LWWW B4YR3A+FR5,46,13,0
 LWWW B4YR3A+FR7,-21,3,0
 LWWW B3RN3A+FR1,16,0,0
 LWWW B3RN3A+FR2,-41,0,0
bzxsDoink
 LWWW D4YR3B+FR1,71,9,1
 LWWW D4YR3B+FR2,60,13,1
 LWWW D4YR3B+FR3,38,17,1
 LWWW D4YR3B+FR4,8,12,1
 LWWW D3RN3B+FR3,27,3,0
 LWWW D3RN3B+FR4,-35,-1,0
bzxsAdam
 .long 0
bzxsLex
 LWWW L4YR3B+FR1,67,10,1
 LWWW L4YR3B+FR2,43,5,1
 LWWW L4YR3B+FR3,20,12,1
 LWWW L4YR3B+FR4,-27,5,1
 LWWW L3RN3B+FR2,27,1,0
 LWWW L3RN3B+FR3,-19,-3,0


bzxsstrt_run_tbl
	.long	start_run_flung,start_run_flung,start_run_flung
	.long	start_run_flung,start_run_flung,start_run_flung
	.long	start_run_flung,start_run_flung,start_run_flung
	.long	start_run_flung,start_run_flung,start_run_flung


*****************************************************************************
*
* cnpg2 HEAD HIT

 SUBR	bam_2_head_hit_anim
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off

	WL	3,B2AH2A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0
	WL	3,B2AH2A+FR2
	WL	2,B2AH2A+FR3
	WL	3,B2AH2A+FR4
	WL	2,B2AH2A+FR5
	WL	3,B2AH2A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


************
*
* socz4 HEAD HIT

 SUBR	bam_4_head_hit_anim
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off

	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0
	WL	3,B4AH4A+FR1
	WL	2,B4AH4A+FR2
	WL	3,B4AH4A+FR3
	WL	2,B4AH4A+FR4
	WL	3,B4AH4A+FR5
	WL	2,B4AH4A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


************
*
* nbfd2 HEAD HIT - From spin kick

 SUBR	bam_2_head_hit2_anim
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,-28000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,20000h,AM_HIT_REL
	WL	ANI_SET_YVEL,40000h

	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off
	WL	3,B2AH2A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0
	WL	3,B2AH2A+FR2
	WL	1,B2AH2A+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B2AH2A+FR4
	WL	2,B2AH2A+FR5
	WL	2,B2AH2A+FR6

	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


************
*
* cmml4 HEAD HIT - From spin kick

 SUBR	bam_4_head_hit2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,-28000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,-20000h,AM_ABS
	WL	ANI_SET_YVEL,40000h

	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0
	WL	3,B4AH4A+FR1
	WL	3,B4AH4A+FR2
	WL	1,B4AH4A+FR3
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B4AH4A+FR4
	WL	2,B4AH4A+FR5
	WL	2,B4AH4A+FR6


	.word	ANI_FACEDOWN
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_4_head_hit4_anim
;From earslap

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

;	WLW	ANI_SET_XVEL,-28000h,AM_HIT_REL
;	WLW	ANI_SET_ZVEL,-20000h,AM_ABS
	WL	ANI_SET_YVEL,40000h

	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYA_SWEAT,SWEAT_PER,0
	WL	4,B4AH4A+FR3
;	.word	ANI_WAITHITGND
;	.word	ANI_ZEROVELS
	WL	3,B4AH4A+FR4
	WL	3,B4AH4A+FR5
	WL	3,B4AH4A+FR6

	.word	ANI_FACEDOWN
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************
*
* HEAD HIT2 (HANDS ON FACE)

 SUBR	bam_head_hit2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,-40000h,AM_HIT_REL
	.word	ANI_FRICTION,3000h
	.word	ANI_DEBRIS,150,3,-21,100,0	;%chance, tbl index, x,y,z off

	WL	3,B3AE3A+FR2
	WL	2,B3AE3A+FR3
	WL	3,B3AE3A+FR4
	WL	2,B3AE3A+FR5
	WL	3,B3AE3A+FR6
	WL	2,B3AE3A+FR7
	WL	3,B3AE3A+FR8
	WL	2,B3AE3A+FR9
	WL	3,B3AE3A+FR10
	WL	2,B3AE3A+FR11
	WL	2,B3AE3A+FR12

	WL	ANI_CODE,am_I_dead
;If I'm dead, goto fall back
	WL	ANI_IFNOTSTATUS,flrjnodead

	WL	ANI_CHANGEANIM,bam_fall_back_anim
;	.word	ANI_END

flrjnodead
	.word	ANI_FACE,MOVE_RIGHT|MOVE_DOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_head_hit2s_anim
;Salt hits me in face

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WL	ANI_CODE,create_impact_salt
 
	WL	4,B3AE3A+FR2
	WL	4,B3AE3A+FR3
	WL	4,B3AE3A+FR4
	WL	4,B3AE3A+FR5
	WL	4,B3AE3A+FR6
	.word	ANI_WAITHITGND
	.word	ANI_FRICTION,4000h
	WL	50,B3AE3A+FR6
	.word	ANI_ZEROVELS
	WL	3,B3AE3A+FR7
	WL	3,B3AE3A+FR8
	WL	3,B3AE3A+FR9
	WL	3,B3AE3A+FR10
	WL	3,B3AE3A+FR11
	WL	3,B3AE3A+FR12

	.word	ANI_FACE,MOVE_RIGHT|MOVE_DOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


************
*
* HEAD HIT2 (ENDS IN DIZZY)

 SUBR	bam_head_hit_dizzy_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,-60000h,AM_HIT_REL
	.word	ANI_FRICTION,3000h
	.word	ANI_SETPLYRMODE,MODE_DIZZY

	WL	4,B3AE3A+FR2
	WL	4,B3AE3A+FR3
	WL	4,B3AE3A+FR4
	WL	4,B3AE3A+FR5
	WL	4,B3AE3A+FR6
	WL	4,B3AE3A+FR7
	WL	4,B3AE3A+FR8
	WL	4,B3AE3A+FR9
	WL	4,B3AE3A+FR10
	WL	4,B3AE3A+FR11
	WL	4,B3AE3A+FR12

;	.word	ANI_SETPLYRMODE,MODE_DIZZY
	WL	ANI_CHANGEANIM,bam_dizzy_anim

;	.word	ANI_END


*****************************************************************************
*
* uosa2 BODY HIT

 SUBR	bam_2_body_hit_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,48000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL

	WL	ANI_CODE,ckzpos
     
	WL	3,B2AM2A+FR1
	WL	3,B2AM2A+FR2
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B2AM2A+FR3
	WL	1,B2AM2A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B2AM2A+FR5
	WL	2,B2AM2A+FR6
	WL	2,B2AM2A+FR7
	WL	2,B2AM2A+FR8

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

* uosa4 BODY HIT

 SUBR	bam_4_body_hit_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,48000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL

	WL	ANI_CODE,ckzpos

	WL	3,B4AM4A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B4AM4A+FR2
	WL	3,B4AM4A+FR3
	WL	1,B4AM4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B4AM4A+FR5
	WL	2,B4AM4A+FR6
	WL	2,B4AM4A+FR7
	WL	2,B4AM4A+FR8

	.word	ANI_CHECKWORD,USR_VAR1
	WL	ANI_IFNOTSTATUS,uosareg

	WL	8,B4TI4A+FR1
	WL	8,B4TI4A+FR2
	WL	8,B4TI4A+FR3
	WL	8,B4TI4A+FR4
	WL	8,B4TI4A+FR5
	WL	8,B4TI4A+FR6
	WL	8,B4TI4A+FR7
	WL	8,B4TI4A+FR6
	WL	8,B4TI4A+FR5
	WL	8,B4TI4A+FR4
	WL	8,B4TI4A+FR3
	WL	8,B4TI4A+FR2

uosareg
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


* uosa4 BODY HIT - DIZZY

 SUBR	bam_4_body_hit_dizzy_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,48000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL
	.word	ANI_SETPLYRMODE,MODE_DIZZY

	WL	ANI_CODE,ckzpos

	WL	3,B4AM4A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B4AM4A+FR2
	WL	3,B4AM4A+FR3
	WL	1,B4AM4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B4AM4A+FR5
	WL	3,B4AM4A+FR6
	WL	3,B4AM4A+FR7
	WL	3,B4AM4A+FR8

	.word	ANI_FACEDOWN
;	.word	ANI_SETPLYRMODE,MODE_DIZZY
	WL	ANI_CHANGEANIM,bam_dizzy_anim

;	.word	ANI_END


 SUBR	bam_2_knee_hit_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,78000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,8000h,AM_ABS

	WL	ANI_CODE,ckzpos

	WL	3,B2AM2A+FR1
	WL	3,B2AM2A+FR2
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B2AM2A+FR3
	WL	1,B2AM2A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B2AM2A+FR5
	WL	2,B2AM2A+FR6
	WL	2,B2AM2A+FR7
	WL	2,B2AM2A+FR8

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_4_knee_hit_dizzy_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,78000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,-8000h,AM_ABS
	.word	ANI_SETPLYRMODE,MODE_DIZZY

	WL	ANI_CODE,ckzpos

	WL	3,B4AM4A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B4AM4A+FR2
	WL	3,B4AM4A+FR3
	WL	1,B4AM4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	3,B4AM4A+FR5
	WL	3,B4AM4A+FR6
	WL	3,B4AM4A+FR7
	WL	3,B4AM4A+FR8

	.word	ANI_FACEDOWN
;	.word	ANI_SETPLYRMODE,MODE_DIZZY
	WL	ANI_CHANGEANIM,bam_dizzy_anim
;	.word	ANI_END

* uosa4 BODY HIT

 SUBR	bam_4_knee_hit_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,78000h
	WLW	ANI_SET_XVEL,-30000h,AM_HIT_REL
	WLW	ANI_SET_ZVEL,-8000h,AM_ABS

	WL	ANI_CODE,ckzpos

	WL	3,B4AM4A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B4AM4A+FR2
	WL	3,B4AM4A+FR3
	WL	1,B4AM4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	2,B4AM4A+FR5
	WL	2,B4AM4A+FR6
	WL	2,B4AM4A+FR7
	WL	2,B4AM4A+FR8

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_quick_knee_hit_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h

	WL	3,B4AM4A+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,COUGH_SWEAT,SWEAT_PER,0
	WL	3,B4AM4A+FR2
	WL	3,B4AM4A+FR3
	WL	3,B4AM4A+FR4
	WL	3,B4AM4A+FR5
	WL	3,B4AM4A+FR6
	WL	3,B4AM4A+FR7
	WL	3,B4AM4A+FR8

	.word	ANI_FACEDOWN

	WL	ANI_CODE,am_I_dead
;If I'm dead, goto fall back
	WL	ANI_IFNOTSTATUS,uosanodead

	WL	ANI_CHANGEANIM,bam_fall_back_anim
;	.word	ANI_END

uosanodead
	WL	ANI_CHANGEANIM,bam_3_head_held_anim
;	.word	ANI_END

*****************************************************************************
*
* HITS ON GROUND

 SUBR	bam_hitonground_xflip_anim
	.word	ANI_XFLIP
	;fall through

 SUBR	bam_hitonground_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SETSPEED,100h

	WL	1,B3CP3B+FR1
	WL	ANI_SET_YVEL,39000h
	.word	ANI_DEBRIS,50,1,0,8,0		;%chance, tbl index, x,y,z off
	WL	2,B3CP3B+FR1
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPITUP_SWEAT,SWEAT_PER,0
	WL	3,B3CP3B+FR2
	WL	3,B3CP3B+FR3
	WL	2,B3CP3B+FR4
	WL	3,B3CP3B+FR5
	WL	2,B3CP3B+FR6
	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS
	WL	2,B3CP3B+FR7
 SUBR	bam_liedown_anim
	WL	1,B3RL1A+FR1		;1st frame of roll

	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

 SUBR	bam_up_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.WORD	ANI_XFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SETSPEED,100h
	WL	10,B4TD3B+FR4
	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS
	WL	3,B3CP3B+FR7
	WL	2,B3RL1A+FR1		;1st frame of roll

	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
*
* FALL BACK

 SUBR	bam_fall_back_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_NOCOLLIS
;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP

	.word	ANI_SETSPEED,100h
	.word	ANI_ZERO_XZVELS
	WL	ANI_MIN_YVEL,68000h
	WLW	ANI_SET_ZVEL,10000h,AM_FACE_REL

	.word	ANI_SCROLL_CTRL,BAM_TBUKLY

	WL	ANI_CODE,ckzpos

	WWL	ANI_SETLONG,DEBRIS_X,[106,-29]	;Y,X of head
	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYC_SWEAT,SWEAT_PER,0
	WL	4,B4UC3B+FR1
	.word	ANI_OFFSET,0,52,0
	WWL	ANI_SETLONG,DEBRIS_X,[44,-42]	;Y,X of head
	WL	4,B4UC3B+FR2
	WWL	ANI_SETLONG,DEBRIS_X,[37,-45]	;Y,X of head
	WL	4,B4UC3B+FR3
	WWL	ANI_SETLONG,DEBRIS_X,[24,-50]	;Y,X of head
	WL	4,B4UC3B+FR4
	WWL	ANI_SETLONG,DEBRIS_X,[16,-54]	;Y,X of head
	WL	4,B4UC3B+FR5
	.word	ANI_WAITHITGND

	.word	ANI_DEBRIS,50,1,0,8,0		;%chance, tbl index, x,y,z off

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,50

	.word	ANI_FRICTION,2000h

	WWL	ANI_SETLONG,DEBRIS_X,[14,-54]	;Y,X of head
	WL	2,B4UC3B+FR6
	.word	ANI_BOUNCE,5
	WL	2,B4UC3B+FR6

	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS

	WWL	ANI_SETLONG,DEBRIS_X,[14,-54]	;Y,X of head
	WL	4,B4UC3B+FR7
	WWL	ANI_SETLONG,DEBRIS_X,[14,-54]	;Y,X of head
	WL	4,B4UC3B+FR8
	.word	ANI_OFFSET,8,0,5			;x,y,z
	.word	ANI_XFLIP
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	WWL	ANI_SETLONG,DEBRIS_X,0		;Y,X of head
	WL	1,B3RL1A+FR1
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

 SUBR	bam_fall_back2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	WL	ANI_SET_YVEL,18000h

	WLW	ANI_SET_ZVEL,18000h,AM_ABS
	WL	ANI_CODE,ckzpos

	WLWWWW	ANI_CREATEPROC,CREATE_SWEAT,0,SPRAYC_SWEAT,SWEAT_PER,0
	WL	4,B4UC3B+FR1
	.word	ANI_OFFSET,0,52,0
	WL	4,B4UC3B+FR2
	WL	4,B4UC3B+FR3
	WL	4,B4UC3B+FR4
	WL	4,B4UC3B+FR5
	.word	ANI_WAITHITGND

	.word	ANI_DEBRIS,100,1,0,8,0		;%chance, tbl index, x,y,z off

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,50
	.word	ANI_ZEROVELS		
	WLW	ANI_SET_ZVEL,18000h,AM_ABS
	WLW	ANI_SET_XVEL,-20000h,AM_FACE_REL

	WL	4,B3FD3C+FR1
	WL	4,B3FD3C+FR2
	WL	4,B3FD3C+FR3
	WL	4,B3FD3C+FR4
	WL	4,B3FD3C+FR5
	.word	ANI_OFFSET,-35,0,0			;x,y,z
	.word	ANI_ZEROVELS		
	.word	ANI_SETPLYRMODE,MODE_ONGROUND	;So we can stomp him!
	WL	ANI_CODE,HIT_THE_MAT

	WL	3,B3MS3X+FR1
	WL	3,B3MS3X+FR2
	WL	3,B3MS3X+FR3

	WL	20,B3RL1A+FR7

	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
*
* FALL FROM TURNBUCKLE

 SUBR	bam_fall_back_tbukl_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
	.word	ANI_SETSPEED,100h

	WL	4,B4UC3B+FR1
	.word	ANI_OFFSET,0,52,0
	WL	4,B4UC3B+FR2
	WL	4,B4UC3B+FR3
	WL	4,B4UC3B+FR4
	WL	4,B4UC3B+FR5
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	.word	ANI_DAMAGE,D_HITCONCRETE

	.word	ANI_DEBRIS,100,1,0,8,0		;%chance, tbl index, x,y,z off

	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,1
	.word	ANI_SHAKER,45

;	.word	ANI_FRICTION,2000h

	WL	2,B4UC3B+FR6
;	.word	ANI_BOUNCE,5
	WL	2,B4UC3B+FR6

;	.word	ANI_WAITHITGND
;	WL	ANI_CODE,SMALL_BOUNCE
;	.word	ANI_ZEROVELS

	WL	4,B4UC3B+FR7
	WL	4,B4UC3B+FR8
	.word	ANI_OFFSET,8,0,5			;x,y,z
	.word	ANI_XFLIP
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	WL	4,B3RL1A+FR1
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim

*****************************************************************************
*

 SUBR	bam_faceup_getup_anim
	WL	ANI_CODE,choose_2or4
	WL	ANI_IFSTATUS,bam_4_faceup_getup_anim
	WL	ANI_CHANGEANIM,bam_2_faceup_getup_anim

 SUBR	bam_2_faceup_getup_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h

;	.word	ANI_CLR_STARS
;	.word	ANI_CLR_DAMAGE

	WL	3,B3GU2A+FR1
	WL	ANI_GOTO,bmwycommon2

 SUBR	bam_2_faceup_getup2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h

;	.word	ANI_CLR_STARS
;	.word	ANI_CLR_DAMAGE

bmwycommon2
	WL	3,B3GU2A+FR2
	WL	2,B3GU2A+FR3
	WL	3,B3GU2A+FR4
	WL	2,B3GU2A+FR5
	WL	3,B3GU2A+FR6
	WL	2,B3GU2A+FR7
;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	WL	3,B3GU2A+FR8
	WL	2,B3GU2A+FR9

;Check for a flip here
	WL	1,B3GU2A+FR10
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	WL	2,B3GU2A+FR10
	WL	2,B3GU2A+FR11
	WL	3,B3GU2A+FR12

	.word	ANI_SAFE_TIME,50

	WL	ANI_CODE,free_toss_check
	WL	ANI_IFNOTSTATUS,bmwyno_freetoss2
	.word	ANI_ATTACK_ON,AMODE_HITCHECK,36,85,49,17
	WL	1,B3GU2A+FR12
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,bmwyno_freetoss2

	;Opponent standing too close -- free toss
	WL	ANI_CODE,setup_freetoss
	WL	ANI_CHANGEANIM,bam_4_push_anim
bmwyno_freetoss2

	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_4_faceup_getup_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h

;	.word	ANI_CLR_STARS
;	.word	ANI_CLR_DAMAGE
	WL	3,B3GU4A+FR1
	WL	2,B3GU4A+FR2
	WL	3,B3GU4A+FR3
	WL	ANI_GOTO,bmwycommon4

 SUBR	bam_4_faceup_getup2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h

;	.word	ANI_CLR_STARS
;	.word	ANI_CLR_DAMAGE

bmwycommon4
	WL	2,B3GU4A+FR4
	WL	3,B3GU4A+FR5
	WL	2,B3GU4A+FR6
bmwyframe7
	WL	3,B3GU4A+FR7
	WL	2,B3GU4A+FR8
	WL	3,B3GU4A+FR9

;Check for a flip here
	WL	1,B3GU4A+FR10
	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
	WL	2,B3GU4A+FR10
	WL	2,B3GU4A+FR11
	WL	3,B3GU4A+FR12

	.word	ANI_SAFE_TIME,50

	WL	ANI_CODE,free_toss_check
	WL	ANI_IFNOTSTATUS,bmwyno_freetoss3
	.word	ANI_ATTACK_ON,AMODE_HITCHECK,36,85,49,17
	WL	1,B3GU4A+FR12
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,bmwyno_freetoss3

	;Opponent standing too close -- free toss
	WL	ANI_CODE,setup_freetoss
	WL	ANI_CHANGEANIM,bam_4_push_anim
bmwyno_freetoss3

	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


 SUBR	bam_4_faceup_getup3_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h

;	.word	ANI_CLR_STARS
;	.word	ANI_CLR_DAMAGE
	WL	ANI_GOTO,bmwyframe7


*****************************************************************************
*
* DIZZY

 SUBR	bam_dizzy_anim

	.word	ANI_SETMODE,MODE_NOAUTOFLIP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_START_DIZZY,0	;0=Standing dizzy
	.word	ANI_FACE,MOVE_RIGHT|MOVE_DOWN

ehozloop

	WL	8,B4TI4A+FR1
	WL	8,B4TI4A+FR2
	WL	8,B4TI4A+FR3
	WL	8,B4TI4A+FR4
	WL	8,B4TI4A+FR5
	WL	8,B4TI4A+FR6
	WL	8,B4TI4A+FR7
	WL	8,B4TI4A+FR6
	WL	8,B4TI4A+FR5
	WL	8,B4TI4A+FR4
	WL	8,B4TI4A+FR3
	WL	8,B4TI4A+FR2

	WL	ANI_GOTO,ehozloop


*****************************************************************************

 SUBR	bam_roll_frames

	.word	7		;speed
	.long	50000h		;z velocity
	.long	10000h*10/255	;inv multiply (0-255 -> 0-10)

	.long	B3RL1A+FR1	;0
	.long	B3RL1A+FR2	;1
	.long	B3RL1A+FR3	;2
	.long	B3RL1A+FR4	;3
	.long	B3RL1A+FR5	;4
	.long	B3RL1A+FR6	;5
	.long	B3RL1A+FR7	;6
	.long	B3RL1A+FR8	;7
	.long	B3RL1A+FR9	;8
	.long	B3RL1A+FR10	;9
	.long	B3RL1A+FR11	;10
	.long	0,0,0,0,0,0

*****************************************************************************
*
* Get tossed out of ring from Shawn's Frankensteiner
*

 SUBR	bam_rxn2_fsteiner_anim

	.word	ANI_END

*****************************************************************************
*
* jnou2 BLOCK

; SUBR	bam_2_block_anim
;
;	.word	ANI_SETMODE,MODE_UNINT			;uninterruptable
;	.word	ANI_ZERO_XZVELS
;	.word	ANI_SETSPEED,100h
;
;	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
;	.word	ANI_SET_WRESTLER_XFLIP
;;Rotate toward opponent if needed!
;
;	WL	ANI_CODE,block_if_safe
;	WL	3,B2BK3B+FR1
;	.word	ANI_SETPLYRMODE,MODE_BLOCK
;	WL	3,B2BK3B+FR2
;jnoublk2	WL	3,B2BK3B+FR3
;	.word	ANI_SETMODE,MODE_NOAUTOFLIP|MODE_UNINT
;	.word	ANI_WAITRELEASE,PLAYER_BLOCK_BIT
;	.word	ANI_SETMODE,MODE_NOAUTOFLIP	;uninterruptable
;	.word	ANI_SETFACING
;	WL	3,B2BK3B+FR2
;	WL	3,B2BK3B+FR1
;	.word	ANI_SETPLYRMODE,MODE_NORMAL
;	.word	ANI_END
;
; SUBR	bam_2_hitblock_anim
;
;	.word	ANI_SETMODE,MODE_UNINT			;uninterruptable
;	.word	ANI_FRICTION,4000h
;	.word	ANI_SETSPEED,100h
;
;	WL	ANI_CODE,DO_BLOCKED
;	WL	2,B2BK3B+FR4
;	WL	2,B2BK3B+FR5
;	WL	2,B2BK3B+FR4
;	WL	ANI_GOTO,jnoublk2


* jnou4 BLOCK

 SUBR	bam_4_block_anim

	.word	ANI_SETMODE,MODE_UNINT			;uninterruptable
	.word	ANI_ZERO_XZVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP
;Rotate toward opponent if needed!

;	WL	ANI_CODE,block_if_safe
	.word	ANI_SETPLYRMODE,MODE_BLOCK
	WL	2,B4BK3D+FR2
	WL	1,B4BK3D+FR3
;	.word	ANI_SETPLYRMODE,MODE_BLOCK
	WL	1,B4BK3D+FR3
jnoublk4	WL	2,B4BK3D+FR4
	.word	ANI_SETMODE,MODE_NOAUTOFLIP|MODE_UNINT|MODE_FRICTION
;	.word	ANI_ZERO_XZVELS
	.word	ANI_WAITRELEASE,PLAYER_BLOCK_BIT
	.word	ANI_SETMODE,MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETFACING
	WL	2,B4BK3D+FR3
	WL	2,B4BK3D+FR2
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_4_hitblock_anim

	.word	ANI_SETMODE,MODE_UNINT			;uninterruptable
	.word	ANI_FRICTION,5000h
	.word	ANI_SETSPEED,100h
	WL	ANI_CODE,DO_BLOCKED
	WL	1,B4BK3D+FR6
	WL	1,B4BK3D+FR7
	WL	1,B4BK3D+FR8
	WL	1,B4BK3D+FR7
	WL	1,B4BK3D+FR6
	WL	ANI_GOTO,jnoublk4

 SUBR	bam_4_hitblock2_anim

	.word	ANI_SETMODE,MODE_UNINT			;uninterruptable
	.word	ANI_FRICTION,4000h
	.word	ANI_SETSPEED,100h
	WL	ANI_CODE,DO_BLOCKED
	WL	ANI_SET_YVEL,38000h
	WL	3,B4BK3D+FR6
	WL	3,B4BK3D+FR7
	WL	3,B4BK3D+FR8
	WL	3,B4BK3D+FR7
	WL	3,B4BK3D+FR6
	WL	3,B4BK3D+FR7
	WL	3,B4BK3D+FR6
	WL	ANI_GOTO,jnoublk4


*****************************************************************************
*
* THROWN FROM RING (shn_bslm, shn_frnk, lex_vsup)

 SUBR	bam_flyout_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
	.word	ANI_SETPLYRMODE,MODE_INAIR
	.word	ANI_SETSPEED,100h

	.word	ANI_SET_IDIOT
	WWL	ANI_SETLONG,OBJ_GRAVITY,0E000h
	WL	ANI_CODE,DO_WAIL

	WL	7,B4TD3B+FR5
	WL	7,B4TD3B+FR6
	WL	7,B4TD3B+FR7
jifjcont	WL	1,B4TD3B+FR8
	.word	ANI_WAITHITGND
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,60
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY

	.word	ANI_DAMAGE,D_HIPTOSS

;	.word	ANI_SETWORD,DELAY_METER,0
;	.word	ANI_GETUP,500

	.word	ANI_OFFSET,10,0,0
	WL	3,B4TD3B+FR9
	WL	ANI_CHANGEANIM,bam_hitonground_xflip_anim


 SUBR	bam_flyout2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE
	.word	ANI_SETPLYRMODE,MODE_INAIR
	.word	ANI_SETSPEED,100h

	.word	ANI_SET_IDIOT
	WWL	ANI_SETLONG,OBJ_GRAVITY,0E000h
	WL	ANI_CODE,DO_WAIL
	WL	ANI_GOTO,jifjcont

;FIX!!  Make throw out of ring if close to ropes
*****************************************************************************
*
* FLIP/FALL FROM HIPTOSS

 SUBR	bam_tossed_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETSPEED,100h

	.word	ANI_XFLIP
	WL	ANI_CODE,ckzpos

	.word	ANI_SETPLYRMODE,MODE_ONGROUND

	.word	ANI_GETUP,STAY_TIME
	WL	ANI_CODE,HIT_THE_MAT
	WLW	ANI_SET_XVEL,20000h,AM_HIT_REL
	.word	ANI_OFFSET,15,0,0	;x,y,z
	WL	1,B3CP3B+FR1
	WL	ANI_SET_YVEL,50000h
	WL	3,B3CP3B+FR1
	WL	4,B3CP3B+FR2
	WL	4,B3CP3B+FR3
	WL	4,B3CP3B+FR4
	WL	4,B3CP3B+FR5
	WL	4,B3CP3B+FR6
	WL	4,B3CP3B+FR7

	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS

	WL	3,B3RL1A+FR1		;1st frame of roll
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

;FIX!!  Make throw out of ring if close to ropes
*****************************************************************************
*
* FLIP/FALL FROM BAM BAM DUCK TOSS

 SUBR	bam_tossed2_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP
	.word	ANI_SETSPEED,100h

	WL	ANI_CODE,ckzpos

	WLW	ANI_SET_XVEL,60000h,AM_HIT_REL
	WL	ANI_SET_YVEL,30000h
	.word	ANI_OFFSET,20,20,0			;x,y,z
	WL	4,B4TD3B+FR7
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_SHAKER,30
	.word	ANI_GETUP,STAY_TIME
	.word	ANI_DAMAGE,D_HIPTOSS

	WL	3,B4TD3B+FR8
	WL	3,B4TD3B+FR9

	.word	ANI_XFLIP

	WLW	ANI_SET_XVEL,20000h,AM_HIT_REL
	WL	ANI_SET_YVEL,50000h
	.word	ANI_OFFSET,15,0,0	;x,y,z
	WL	4,B3CP3B+FR1
	WL	4,B3CP3B+FR2
	WL	4,B3CP3B+FR3
	WL	4,B3CP3B+FR4
	WL	4,B3CP3B+FR5
	WL	4,B3CP3B+FR6
	WL	4,B3CP3B+FR7

	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	.word	ANI_ZEROVELS

	WL	3,B3RL1A+FR1		;1st frame of roll
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
*

 SUBR	bam_knockdwn_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	.word	ANI_SETSPEED,100h
	.word	ANI_XFLIP
 
	WL	2,B3GU4A+FR12
	WL	2,B3GU4A+FR10
	WL	2,B3GU4A+FR7
	WL	ANI_SET_YVEL,39000h

	WL	3,B3CP3B+FR1
	WL	3,B3CP3B+FR2
	WL	3,B3CP3B+FR3
	WL	3,B3CP3B+FR4
	WL	3,B3CP3B+FR5
	WL	3,B3CP3B+FR6
	WL	3,B3CP3B+FR7

	WL	4,B3RL1A+FR1		;1st frame of roll


	WL	ANI_CODE,am_I_dead
;If I'm dead, goto fall back
	WL	ANI_IFNOTSTATUS,lalnnodead

	.word	ANI_SETPLYRMODE,MODE_DEAD
	.word	ANI_END

lalnnodead

	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
 SUBR	bam_climbthru_side_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	WL	ANI_CODE,SET_DIR_FACE
	.word	ANI_SETFACING
	.WORD	ANI_SET_WRESTLER_XFLIP

	WLW	ANI_SET_XVEL,3800h,AM_FACE_REL

	.word	ANI_OFFSET,16,0,0
	WL	2,B4CR7A+FR2
	.word	ANI_BENDROPE,0
	.word	ANI_OFFSET,3,0,0	;*****
	WL	3,B4CR7A+FR3		
	.word	ANI_OFFSET,3,0,0	;*****
	WL	2,B4CR7A+FR4

	.word	ANI_BENDROPE,2
	.word	ANI_ROPE_Z,R_TOP,RZ_HIGH
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_HIGH

	.word	ANI_OFFSET,5,0,0	;*****
	WL	3,B4CR7A+FR5

	.word	ANI_OFFSET,3,0,0	;*****
	WL	2,B4CR7A+FR6
	.word	ANI_BENDROPE,2
	.word	ANI_OFFSET,3,0,0	;*****
	WL	3,B4CR7A+FR7
	.word	ANI_OFFSET,4,0,0	;*****
	WL	2,B4CR7A+FR8
	.word	ANI_BENDROPE,3
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_HIGH
	.word	ANI_OFFSET,5,0,0	;*****
	WL	3,B4CR7A+FR9
	.word	ANI_OFFSET,5,0,0	;*****
	WL	2,B4CR7A+FR10
	.word	ANI_ZEROVELS
	.word	ANI_BENDROPE,-1
	.word	ANI_OFFSET,10,-3,0
	WL	3,B4CR7A+FR11
	.word	ANI_OFFSET,2,0,0	;*****
	WL	2,B4CR7A+FR12

	.word	ANI_SET_IDIOT
	;now jump off...
;	WL	2,B2JD4A+FR1		;D4FM4A+FR1
	WL	3,B2JD4A+FR2
	WL	3,B2JD4A+FR3

	WL	ANI_SET_YVEL,60000h

	WLW	ANI_SET_XVEL,30000h,AM_FACE_REL
	WWL	ANI_SETLONG,OBJ_GRAVITY,0E000h

	WL	3,B2JD4A+FR4
	.word	ANI_WAITHITGND
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY

	.word	ANI_ROPE_Z,R_TOP,RZ_NORM
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_NORM
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_NORM

	.word	ANI_ZEROVELS
	WL	3,B2JD4A+FR6
;	WL	2,B2JD4A+FR7
	WL	3,B2JD4A+FR8
;	WL	2,B2JD4A+FR9

	.word	ANI_FACEDOWN

	.word	ANI_CLEAR_CLIMB
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END


*****************************************************************************

 SUBR	bam_climbin_side_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	WL	ANI_CODE,SET_DIR_FACE
	.word	ANI_SETFACING
	.WORD	ANI_SET_WRESTLER_XFLIP

	;jump in
;	WL	2,B2JD4A+FR1
	WL	3,B2JD4A+FR2
	WL	3,B2JD4A+FR3

	WWL	ANI_SETLONG,OBJ_GRAVITY,0E000h
	WL	ANI_CODE,yafnset_trgt
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	.word	ANI_LEAPATPOS,14h,200,0,0,0	;yafnticks,dist,xoff,yoff,zoff

	WL	2,B2JD4A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY

	.word	ANI_ROPE_Z,R_TOP,RZ_HIGH
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_HIGH
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_HIGH

	WL	3,B2JD4A+FR6
;	WL	2,B2JD4A+FR7
	.word	ANI_OFFSET,13,0,0	;*****
	WL	3,B2JD4A+FR8
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_NORM
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_NORM

	WLW	ANI_SET_XVEL,3000h,AM_FACE_REL

	;climb through
	.word	ANI_OFFSET,3,0,0	;*****
	WL	2,B4CR7A+FR2
	.word	ANI_BENDROPE,0
	.word	ANI_OFFSET,3,0,0	;*****
	WL	3,B4CR7A+FR3
	.word	ANI_OFFSET,3,0,0	;*****
	WL	2,B4CR7A+FR4
	.word	ANI_OFFSET,3,0,0	;*****
	WL	3,B4CR7A+FR5

	.word	ANI_BENDROPE,2

	.word	ANI_OFFSET,3,0,0	;*****
	WL	2,B4CR7A+FR6
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_HIGH
	.word	ANI_BENDROPE,2
	.word	ANI_OFFSET,5,0,0	;*****
	WL	3,B4CR7A+FR7
	.word	ANI_OFFSET,5,0,0	;*****
	WL	2,B4CR7A+FR8
	.word	ANI_BENDROPE,3
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_NORM
	.word	ANI_OFFSET,5,0,0	;*****
	WL	3,B4CR7A+FR9
	.word	ANI_OFFSET,5,0,0	;*****
	WL	2,B4CR7A+FR10
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_NORM
	.word	ANI_BENDROPE,-1
	.word	ANI_OFFSET,10,-3,0
	WL	3,B4CR7A+FR11
	WL	2,B4CR7A+FR12
	.word	ANI_ZEROVELS

;	WL	ANI_CODE,clr_climb
	.word	ANI_CLEAR_CLIMB

	;done

	.word	ANI_ROPE_Z,R_TOP,RZ_NORM
	.word	ANI_ROPE_Z,R_MIDDLE,RZ_NORM
	.word	ANI_ROPE_Z,R_BOTTOM,RZ_NORM

	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END

yafnset_trgt
	movi	RING_X_CENTER-0f8h-60,a0		;Jump onto left side apron
	move	*a13(OBJ_XPOSINT),a14
	cmpi	RING_X_CENTER,a14
	jrlt	yafnonlft
;On right side
	movi	RING_X_CENTER+0f8h+60,a0		;Jump onto right side apron
yafnonlft
	move	a0,*a13(TGT_XOFF)

	movi	RING_Z_CENTER,a0
	move	a0,*a13(TGT_ZOFF)

	movi	MAT_Y,a0
	move	a0,*a13(TGT_YOFF)

	rets


*****************************************************************************

 SUBR	bam_climbthru_bot_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

;Must rotate toward ropes!
;Do a different sequence

	;lie down
	WL	ANI_CODE,adqickspin
	WL	3,B3GU2A+FR13
	WL	3,B3GU2A+FR12
	WL	3,B3GU2A+FR11
	WL	3,B3GU2A+FR10
	WL	3,B3GU2A+FR9
	WL	3,B3GU2A+FR8
	WL	3,B3GU2A+FR7
	WL	3,B3GU2A+FR6
	WL	3,B3GU2A+FR5
	WL	3,B3GU2A+FR4
	WL	3,B3GU2A+FR2
	WL	3,B3GU2A+FR1

	;roll over once
	WLW	ANI_SET_ZVEL,0A8000h,AM_ABS

	WL	3,B3RL1A+FR1
	WL	3,B3RL1A+FR2
	WL	3,B3RL1A+FR3
	WL	3,B3RL1A+FR4
	WL	3,B3RL1A+FR5
	WL	3,B3RL1A+FR6
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOSHADOW|MODE_NOCOLLIS
	.word	ANI_SET_IDIOT

	;climb through
	.WORD	ANI_XFLIP
	WL	ANI_CODE,NOT_IN_RING
	.word	ANI_OFFSET,20,-37h,0			;x,y,z
	WL	3,B2KM3E+FR6
	WL	3,B2KM3E+FR3
	WL	3,B2KM3E+FR2
	.WORD	ANI_XFLIP

	.word	ANI_CLEAR_CLIMB
	.word	ANI_FACEUP
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END
			       
adqickspin
	move	*a13(FACING_DIR),a14
	btst	0,a14
	jrnz	adqifaceup

	move	*a13(ANIMODE),a0
	ori	MODE_STATUS,a0
	move	a0,*a13(ANIMODE)
	RETS
adqifaceup
	move	*a13(ANIMODE),a0
	ANDI	0FFFFH-MODE_STATUS,a0
	move	a0,*a13(ANIMODE)
	rets

NOT_IN_RING
	MOVK	1,A0
	MOVE	A0,*A13(INRING)
	RETS

*****************************************************************************

 SUBR	bam_climbin_bot_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	;climb in
	.word	ANI_GRAVITY_OFF
	.WORD	ANI_XFLIP
	WL	3,B2KM3E+FR2
	WL	3,B2KM3E+FR3
	WL	3,B2KM3E+FR6
	.word	ANI_OFFSET,-20,37h,-60

	;roll
	WLW	ANI_SET_ZVEL,-70000h,AM_ABS
	.word	ANI_FRICTION,3000h
	WL	3,B3RL1A+FR11
	WL	3,B3RL1A+FR10
	WL	3,B3RL1A+FR9
	WL	3,B3RL1A+FR8
	WL	3,B3RL1A+FR7
	WL	3,B3RL1A+FR6
	.word	ANI_ZEROVELS
	.word	ANI_GRAVITY_ON

	;get up
	WL	3,B3GU2A+FR1
	WL	3,B3GU2A+FR2
	WL	3,B3GU2A+FR3
	WL	3,B3GU2A+FR4
	WL	3,B3GU2A+FR5
	WL	3,B3GU2A+FR6
	WL	3,B3GU2A+FR7
	WL	3,B3GU2A+FR8
	WL	3,B3GU2A+FR9
	WL	3,B3GU2A+FR10
	WL	3,B3GU2A+FR11
	WL	3,B3GU2A+FR12
	WL	3,B3GU2A+FR13

;	WL	ANI_CODE,clr_climb
	.word	ANI_CLEAR_CLIMB

	.WORD	ANI_FACEDOWN
	.word	ANI_ZEROVELS
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END


*****************************************************************************

 SUBR	bam_climbthru_top_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	;lie down
	WL	ANI_CODE,abvqset_zvel1
	WL	ANI_IFSTATUS,abvqdir4
;Facing abvq2
	WL	3,B1TT5Z+FR2
	WL	3,B1TT5Z+FR3
	
abvqdir4
	WL	3,B3GU4A+FR12
	WL	3,B3GU4A+FR11
	WL	3,B3GU4A+FR10
	WL	3,B3GU4A+FR9
	WL	3,B3GU4A+FR8
	WL	3,B3GU4A+FR7
	WL	3,B3GU4A+FR6
	WL	3,B3GU4A+FR5
	WL	3,B3GU4A+FR4
	WL	3,B3GU4A+FR3
	WL	3,B3GU4A+FR2
	WL	3,B3GU4A+FR1

	;roll over once
	WL	ANI_CODE,abvqset_zvel2
	WL	3,B3RL1A+FR11
	WL	3,B3RL1A+FR10
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOSHADOW|MODE_NOCOLLIS
	WL	3,B3RL1A+FR9
	WL	3,B3RL1A+FR8
	WL	3,B3RL1A+FR7

	.word	ANI_SET_IDIOT
	;climb through
	.word	ANI_ZEROVELS
	.word	ANI_OFFSET,0,-61,0
	.WORD	ANI_XFLIP
	WL	3,B4KM3E+FR2
	WL	3,B4KM3E+FR1
	.WORD	ANI_XFLIP

	.word	ANI_ZERO_XZVELS
	.word	ANI_CLEAR_CLIMB

	.WORD	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END

abvqset_zvel1
	move	*a13(FACING_DIR),a14
	btst	0,a14
	jrz	abvqfacedwn
	move	*a13(ANIMODE),a0
	ANDI	0FFFFH-MODE_STATUS,a0
	move	a0,*a13(ANIMODE)
	rets

abvqfacedwn
	move	*a13(ANIMODE),a0
	ori	MODE_STATUS,a0
	move	a0,*a13(ANIMODE)
	rets

abvqset_zvel2
	movi	-50000h,a0
	move	a0,*a13(OBJ_ZVEL),L
	rets


*****************************************************************************

 SUBR	bam_rollthru_top_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	;roll over once
	WLW	ANI_SET_ZVEL,-50000h,AM_ABS
	WL	3,B3RL1A+FR11
	WL	3,B3RL1A+FR10
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOSHADOW|MODE_NOCOLLIS
	WL	3,B3RL1A+FR9
	WL	3,B3RL1A+FR8
	WL	3,B3RL1A+FR7

	;climb through
	.word	ANI_ZEROVELS
	.word	ANI_OFFSET,0,-61,0
	.WORD	ANI_XFLIP
	WL	3,B4KM3E+FR2
	WL	3,B4KM3E+FR1
	.WORD	ANI_XFLIP

	.word	ANI_ZERO_XZVELS

	.WORD	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END

*****************************************************************************

 SUBR	bam_climbin_top_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCONFINE|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	;climb in
	WL	3,B4KM3E+FR1
	WL	3,B4KM3E+FR2
	WL	3,B4KM3E+FR4
	.word	ANI_OFFSET,0,61,0
	.WORD	ANI_XFLIP

	;roll over
	WL	ANI_CODE,kbrwset_zvel2
	WL	3,B3RL1A+FR8
	WL	3,B3RL1A+FR9
	WL	3,B3RL1A+FR10
	WL	3,B3RL1A+FR11	

	.word	ANI_ZEROVELS

	;get up
	WL	3,B3GU4A+FR1
	WL	3,B3GU4A+FR2
	WL	3,B3GU4A+FR3
	WL	3,B3GU4A+FR4
	WL	3,B3GU4A+FR5
	WL	3,B3GU4A+FR6
	WL	3,B3GU4A+FR7
	WL	3,B3GU4A+FR8
	WL	3,B3GU4A+FR9
	WL	3,B3GU4A+FR10
	WL	3,B3GU4A+FR11
	WL	3,B3GU4A+FR12

;	WL	ANI_CODE,clr_climb
	.word	ANI_CLEAR_CLIMB

	.WORD	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NOCONFINE
	.word	ANI_END


kbrwset_zvel2
	movi	50000h,a0
	move	a0,*a13(OBJ_ZVEL),L
	rets

****************************************************************************
*
* PIN OPPONENT AND RAISE ARM IN VICTORY

;Need to have this guy walk toward fallen opponent so he
;can get closer!

;This pin must be started only when opponent is on the ground!

 SUBR	bam_2_pin_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;Rotate!
	WL	3,B1TT5Z+FR2	;2.5
	WL	3,B1TT5Z+FR3	;3.5

 SUBR	bam_4_pin_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 25,999,80h,50h,90000h,TGT_CHEST|TGT_GROUND,0,57,-15
	WL	ANI_CODE,hit_nearest

	WL	3,B2PN5A+FR3
	.word	ANI_OFFSET,0,34,0			;x,y,z
	WL	22,B2PN5A+FR4
;	.word	ANI_WAITHITGND
;	.word	ANI_ATTACK_ON_Z, AMODE_STOMP,-40,-8,0,76,20,30 ;mode,x,y,z,w,h,d
	.word	ANI_ZEROVELS

;	WLW	ANI_ATTCHIMAGE,D4PN5L+FR4,10		;image, zoff (priority)
	WL	3,B2PN5A+FR5
	WL	ANI_CODE,DO_CROWD_CHEER

;	.word	ANI_ATTACK_OFF
	WL	ANI_CODE,grnd_hit
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKEALL,2
	.word	ANI_BOUNCE,4
;	WLW	ANI_ATTCHIMAGE,D4PN5L+FR5,10		;image, zoff (priority)
	WL	3,B2PN5A+FR6
	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE

	WL	4,B2PN5A+FR7
	WL	ANI_CODE,win_announce
;	WLW	ANI_ATTCHIMAGE,0,0		;Turn it off
;	WL	40,D4PN5A+FR6
;	.word	ANI_SET_ATTACH
;	.word	ANI_ATTACHZ,0,0,10		;x & y don't matter.
;	.word	ANI_OFFSET,0,0,20			;x,y,z
	WL	40,B2PN5A+FR5

	.word	ANI_LOOP
;Do another ground hit on opponent
	WL	ANI_CODE,grnd_hit

	WL	ANI_SET_YVEL,42000h
	WLW	ANI_SET_ZVEL,-22000h,AM_ABS
	WL	4,B5RV5A+FR1
	WL	4,B5RV5A+FR2
	WL	4,B5RV5A+FR3
	WL	4,B5RV5A+FR4
	WL	4,B5RV5A+FR5
	WL	4,B5RV5A+FR6
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	4,B4WC4B+FR1
	WL	4,B4WC4B+FR2

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8


	WL	4,B4WC4B+FR2
	WL	4,B4WC4B+FR1

	WL	4,B5RV5A+FR8
ftowfloop	WL	1000,B5RV5A+FR7
	WL	ANI_GOTO,ftowfloop


	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END


******************************************************************************
* RAISE ARM IN VICTORY FROM A STANCE

 SUBR	bam_2_raise_arm_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

;Rotate!
	WL	ANI_CODE,DO_CROWD_CHEER
	WL	ANI_CODE,win_announce

	WL	3,B1TT5Z+FR2	;2.5
	WL	3,B1TT5Z+FR3	;3.5
	WL	ANI_GOTO,ftowcont

 SUBR	bam_4_raise_arm_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	WL	ANI_CODE,DO_CROWD_CHEER
	WL	ANI_CODE,win_announce

ftowcont	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	WL	4,B4SW4B+FR3
	WL	4,B4SW4B+FR4
	WL	4,B4SW4B+FR5
	WL	4,B4SW4B+FR6
	WL	4,B4SW4B+FR7
	WL	4,B4SW4B+FR8

	.word	ANI_SET_RPTCOUNT,-6	;set count to rnd from 0 to 6

ftowlp	WL	4,B4ST4Z+FR1
	WL	4,B4ST4Z+FR2
	WL	4,B4ST4Z+FR3
	WL	4,B4ST4Z+FR4
	WL	4,B4ST4Z+FR5
	WL	4,B4ST4Z+FR6
	WL	4,B4ST4Z+FR7
	WL	4,B4ST4Z+FR8
	WL	4,B4ST4Z+FR9

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,ftowlp

	WL	ANI_CODE,check_raisearm_bit
	WL	ANI_IFSTATUS,ftowwakeup

	;don't wake up.
	.word	ANI_SET_RPTCOUNT,1000
	WL	ANI_GOTO,ftowlp

ftowwakeup
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_FACEDOWN
	.word	ANI_END


*****************************************************************************
*
* GET BUCKED OFF A PINNED OPPONENT

 SUBR	bam_buckoff_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_NOCOLLIS
	.word	ANI_SETSPEED,100h
	.word	ANI_ZEROVELS

	WL	4,B2PN5A+FR5
	WL	ANI_CODE,set_buckoff_vels
	WL	4,B2PN5A+FR4
	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS
	WL	4,B2PN5A+FR6
	WL	12,B2PN5A+FR7

	;now stand up
	WL	3,B5RV5A+FR1
	WL	3,B5RV5A+FR2
	WL	3,B5RV5A+FR3
	WL	3,B5RV5A+FR4
	WL	3,B5RV5A+FR5

	.word	ANI_FACEDOWN

	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_END

*****************************************************************************
*
* HIP TOSS RUNNING OPPONENT

 SUBR	bam_combo_hiptoss_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_STARTATTACK,AT_PUPPET,6

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 6,40,40,40,90000h,TGT_CHEST,20,0,0
	WL	ANI_SET_YVEL,0000h

	WL	2,B3DR3B+FR1

	.word	ANI_ATTACK_ON, AMODE_PUPPET,16,40,62,42 ;mode,x,y,w,h
	WL	2,B3DR3B+FR2
	.word	ANI_ZERO_XZVELS
	WWL	ANI_WAITHITOPP,6,B3DR3B+FR2
	.word	ANI_ATTACK_OFF

	WL	ANI_IFNOTSTATUS,vcvzmissedc
	WL	ANI_IFBLOCKED,vcvzmissedbc		;Yes, I hit blocker

;got him
	.WORD	ANI_INC_COMBO
	WL	ANI_CODE,DO_GRUNT

	.word	ANI_ATTACHZ,0,0,10		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

; attacker sequence
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR3,vcvzpuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR4,vcvzpuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR5,vcvzpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR6,vcvzpuppet_tbl,3
	WL	ANI_SET_YVEL,20000h
	WWWL	ANI_IFROPE,RC_BACK,XTOSSDIST,vcvzthrow_him_out_c
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR7,vcvzpuppet_tbl,4

	WL	ANI_SLAVEANIM,vcvzrollout_tbl

	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_DETACH

	WL	10,B3DR3B+FR8
	WL	6,B3DR3B+FR9

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	6,B3DR3B+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vcvzmissedbc
	WL	15,B3DR3B+FR3
vcvzmissedc
	WL	10,B3DR3B+FR3
	WL	4,B3DR3B+FR2
	WL	4,B3DR3B+FR1

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vcvzthrow_him_out_c
	WLLL	ANI_ATTACHVEL,-080000h,0a0000h,0h		;x,y,z
	WL	ANI_SLAVEANIM,vcvzflyout_tbl
	WL	ANI_OPPOFFSET,release_table
	.word	ANI_DETACH
	.WORD	ANI_SOUND,06FH	;GET OUT OF MY RING !

	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	WL	5,B3DR3B+FR7
	WL	10,B3DR3B+FR8
	WL	6,B3DR3B+FR9

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	6,B3DR3B+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


 SUBR	bam_3_hiptoss2_anim

;	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_NOCOLLIS	;uninterruptable
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_PUPPET,10
	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,60,55,40,90000h,TGT_CHEST,40,0,0
	WL	ANI_SET_YVEL,0000h

	WL	2,B3DR3B+FR1

	.word	ANI_ATTACK_ON, AMODE_PUPPET_TOSS,16,40,42,42 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,2,B3DR3B+FR2
	WWL	ANI_WAITHITOPP,6,B3DR3B+FR3
	.word	ANI_ZERO_XZVELS
	.word	ANI_ATTACK_OFF

	WL	ANI_GOTO,vcvzcont

 SUBR	bam_3_hiptoss_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_PUPPET,10

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 8,40,40,40,90000h,TGT_CHEST,20,0,0
	WL	ANI_SET_YVEL,0000h
	WL	3,B3DR3B+FR1
	WL	1,B3DR3B+FR2

	.word	ANI_ATTACK_ON, AMODE_PUPPET_TOSS,16,40,42,42 ;mode,x,y,w,h
	WWL	ANI_WAITHITOPP,2,B3DR3B+FR2
	WWL	ANI_WAITHITOPP,2,B3DR3B+FR3
	.word	ANI_ZERO_XZVELS
	.word	ANI_ATTACK_OFF
	WL	4,B3DR3B+FR3
vcvzcont
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFNOTSTATUS,vcvzmissed
	WL	ANI_IFBLOCKED,vcvzmissedb		;Yes, I hit blocker

vcvzgot_him
	.word	ANI_DRAW_NAME,11
	WL	ANI_CODE,DO_GRUNT

	.word	ANI_ATTACHZ,0,0,10		;x & y don't matter.
	.word	ANI_SETOPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP|MODE_KEEPATTACHED

; attacker sequence
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR3,vcvzpuppet_tbl,0
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR4,vcvzpuppet_tbl,1
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR5,vcvzpuppet_tbl,2
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR6,vcvzpuppet_tbl,3
	WL	ANI_SET_YVEL,20000h
;	WLW	ANI_SET_XVEL,-20000h,AM_FACE_REL
	WWWL	ANI_IFROPE,RC_BACK,XTOSSDIST,vcvzthrow_him_out
	WWLLW	ANI_SUPERSLAVE2,3,B3DR3B+FR7,vcvzpuppet_tbl,4

	WL	ANI_SLAVEANIM,vcvzrollout_tbl

	WL	ANI_CODE,CALL_SPECIAL_MOVE
	.word	ANI_CLROPPMODE,MODE_GHOST
	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP|MODE_OVERLAP
	.word	ANI_DETACH

	WL	10,B3DR3B+FR8
	WL	4+2,B3DR3B+FR9

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	4+10,B3DR3B+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vcvzmissedb
;	WL	ANI_CODE,ck_hiptoss
;	WL	ANI_IFNOTSTATUS,vcvzgot_him
	WL	10,B3DR3B+FR3
;Delay longer if 2nd hiptoss in quick succession!
	WL	ANI_CODE,hiptoss_delay
	WL	ANI_IFNOTSTATUS,vcvzmissed
	WL	24,B3DR3B+FR3
vcvzmissed
	WL	2,B3DR3B+FR3
	WL	3,B3DR3B+FR2
	WL	3,B3DR3B+FR1

	WL	ANI_CODE,CALL_MISSES

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vcvzthrow_him_out
	WLLL	ANI_ATTACHVEL,-080000h,0a0000h,0h		;x,y,z
	WL	ANI_SLAVEANIM,vcvzflyout_tbl
	WL	ANI_OPPOFFSET,release_table
	.word	ANI_DETACH
	.WORD	ANI_SOUND,06FH	;GET OUT OF MY RING !

	WL	5,B3DR3B+FR7
	WL	10,B3DR3B+FR8
	WL	6,B3DR3B+FR9

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	WL	6,B3DR3B+FR10

	.word	ANI_FACEDOWN
	.word	ANI_SETFACING
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

vcvzflyout_tbl
	REFLONG	hrt_flyout_anim
	REFLONG	rzr_flyout_anim
	REFLONG	und_flyout_anim
	REFLONG	yok_flyout_anim
	REFLONG	shn_flyout_anim
	REFLONG	bam_flyout_anim
	REFLONG	dnk_flyout_anim
	.long	0
	REFLONG	lex_flyout_anim

release_table
	;	X Y
	.word	16,16		;Bret
	.word	8,16		;Razor
	.word	0,32		;Taker
	.word	0,16		;Yokozuna
	.word	0,16		;Shawn
	.word	8,16		;BamBam
	.word	4,20		;Doink
	.word	0,0		;Adam
	.word	0,16		;Lex

vcvzpuppet_tbl
 .long vcvzBret
 .long vcvzRazor
 .long vcvzTaker
 .long vcvzYokozuna
 .long vcvzShawn
 .long vcvzBamBam
 .long vcvzDoink
 .long vcvzAdam
 .long vcvzLex

vcvzBret
	.ref	H3FR3A,H2AM3A
 LWWW H3FR3A+FR1,34,16,0
 LWWW H2AM3A+FR7,27,17,0
 LWWW H3FR3A+FR2,11,12,0
 LWWW H3FR3A+FR3,1,27,0
 LWWW H3FR3A+FR3,-9,13,0
 .long 0

vcvzRazor
	.ref	R3TD3A
 LWWW R3TD3A+FR2,24,15,0
 LWWW R3TD3A+FR3,16,14,0
 LWWW R3TD3A+FR4,8,11,0
 LWWW R3TD3A+FR5,7,24,0
 LWWW R3TD3A+FR6,-3,22,0
 .long 0
vcvzTaker
	.ref	U4AM4C,U3FH3A
 LWWW U4AM4C+FR4,25,38,0
 LWWW U3FH3A+FR1,27,20,1
 LWWW U3FH3A+FR2,8,9,1
 LWWW U3FH3A+FR3,1,4,1
 LWWW U3FH3A+FR4,-8,8,1
 .long 0
vcvzYokozuna
	.ref	Y3FL3W,Y5GU4B
 LWWW Y5GU4B+FR7,23,26,0
 LWWW Y5GU4B+FR7,15,32,0
 LWWW Y3FL3W+FR3,-15,22,0
; LWWW Y3PP3Q+FR1,-2,22,0
 LWWW Y3FL3W+FR4,-15,16,0
 LWWW Y3FL3W+FR5,-4,15,0



; LWWW Y3FL3W+FR1,28,43,0
; LWWW Y3FL3W+FR2,12,38,0
; LWWW Y3FL3W+FR3,-15,22,0
; LWWW Y3FL3W+FR4,-15,16,0
; LWWW Y3FL3W+FR5,-4,15,0
 .long 0
vcvzShawn
	.ref	S3OS3X
 LWWW S3OS3X+FR3,23,47,1
 LWWW S3OS3X+FR4,-7,41,1
 LWWW S3OS3X+FR5,-31,25,1
 LWWW S3OS3X+FR6,-27,43,1
 LWWW S3OS3X+FR7,-8,42,1
 .long 0
vcvzBamBam
	.ref	B4TD3B
 LWWW B4TD3B+FR2,19,30,0
 LWWW B4TD3B+FR3,11,27,0
 LWWW B4TD3B+FR4,7,15,0
 LWWW B4TD3B+FR5,-3,35,0
 LWWW B4TD3B+FR6,-10,43,0
 .long 0
vcvzDoink
	.ref	D3OS3A
 LWWW D3OS3A+FR1,26,19,0
 LWWW D3OS3A+FR2,9,22,0
 LWWW D3OS3A+FR3,-7,13,0
 LWWW D3OS3A+FR4,-12,12,0
 LWWW D3OS3A+FR5,-6,11,0
 .long 0
vcvzAdam
 .long 0
vcvzLex
 	.ref	L3FH3A
 LWWW L3FH3A+FR1,22,25,0
 LWWW L3FH3A+FR2,19,10,0
 LWWW L3FH3A+FR3,11,14,0
 LWWW L3FH3A+FR4,12,12,0
 LWWW L3FH3A+FR5,8,7,0
 .long 0

vcvzrollout_tbl
	REFLONG	hrt_tossed2_anim,rzr_tossed2_anim
	REFLONG	und_tossed2_anim
	REFLONG	yok_tossed2_anim
	REFLONG	shn_tossed2_anim,bam_tossed2_anim
	REFLONG	dnk_tossed2_anim
	.long	0
	REFLONG	lex_tossed2_anim

*****************************************************************************
*
* ylzl2,4 FLYING CLOTHESLINE

 SUBR	bam_fly_cline_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_OVERLAP|MODE_NOAUTOFLIP
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	.word	ANI_STARTATTACK,AT_LEAPING,9
	WL	3,B3RC3A+FR1

	WLW	ANI_SET_XVEL,74000h,AM_FACE_REL
	WWL	ANI_SETLONG,OBJ_GRAVITY,08000h
	WL	3,B3RC3A+FR2
	WL	3,B3RC3A+FR3
	WL	ANI_SET_YVEL,50000h
	WL	3,B3RC3A+FR4
	.word	ANI_OFFSET,0,45,0			;x,y,z
	.word	ANI_ATTACK_ON, AMODE_CLINE,2,5,14,53 ;mode,x,y,w,h ;31
	WL	20,B3RC3A+FR5
	.word	ANI_ATTACK_OFF
	WL	3,B3RC3A+FR7
	.word	ANI_WAITHITGND
	WWL	ANI_SETLONG,OBJ_GRAVITY,GRAVITY
	.word	ANI_ZEROVELS
	WL	ANI_CODE,HIT_THE_MAT
	.word	ANI_SHAKER,30
	WL	3,B3RC3A+FR8
	WLW	ANI_SET_XVEL,50000h,AM_FACE_REL
	.word	ANI_FRICTION,3000h
	.word	ANI_BOUNCE,4

	WL	3,B3RC3A+FR8
	.word	ANI_WAITHITGND
	WL	ANI_CODE,SMALL_BOUNCE
	WL	8,B3RC3A+FR8

	WL	ANI_IFSTATUS,ylzlgothim
;He missed, have him stay on ground for awhile!
	WL	ANI_CODE,CALL_MISSES
	.word	ANI_SETPLYRMODE,MODE_ONGROUND
	WL	1,B3RC3A+FR8	;30
ylzlgothim
	.word	ANI_DRAW_NAME,24
	.word	ANI_WAITROLL
	WL	ANI_CHANGEANIM,bam_faceup_getup_anim
;	.word	ANI_END

*****************************************************************************
* kflv4 SLAP

;Leaping fire head butt

 SUBR	bam_2_slap_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_LEAPING,20

	WL	1,B1TT5Z+FR2	;2.5
	WL	1,B1TT5Z+FR3	;3.5

 SUBR	bam_4_slap_anim

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_SET_WRESTLER_XFLIP

	.word	ANI_STARTATTACK,AT_LEAPING,16
	WL	2,B3FH3F+FR1

	;	ticks,range max,hiX,hiZ,hiYvel,tgt,Xoff,Yoff,Zoff
	LEAPATOPP 12,999,4eh,50,90000h,TGT_HEAD,40,101,10

	WL	3,B3FH3F+FR2
	WL	3,B3FH3F+FR3
	WL	2,B3FH3F+FR4
	WL	2,B3FH3F+FR5
	WL	2,B3FH3F+FR6
	WL	1,B3FH3F+FR7

	.word	ANI_ATTACK_ON, AMODE_HDBUTT3,32,47,39,55 ;mode,x,y,w,h
	WL	2,B3FH3F+FR7
	WL	3,B3FH3F+FR8
	.word	ANI_ATTACK_OFF
	.word	ANI_ZERO_XZVELS

	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
	WL	ANI_IFNOTSTATUS,kflvmissed
	WL	ANI_IFBLOCKED,kflvmissedb		;Yes, I hit blocker
;hit
	WL	ANI_CODE,create_impact
	WL	ANI_CODE,DO_FLAME_HIT_SND
	WL	ANI_CODE,CALL_NASTY_MOVE

	WWL	ANI_SLIDE_BACK,30h,-70000h,kflvno_hit2
	WL	ANI_SET_YVEL,40000h
kflvno_hit2
kflvmissed
kflvmissedb
	WL	3,B3FH3F+FR8
	WL	ANI_CODE,spunch_delay
	WL	ANI_IFNOTSTATUS,kflvnone
	WL	15,B3FH3F+FR9
kflvnone

	WL	2,B3FH3F+FR9
	WL	2,B3FH3F+FR10
	WL	2,B3FH3F+FR11

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_combo_slap_anim

	.word	ANI_ZEROVELS
 SUBR	bam_combo_slap_anim_no_vel

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_SETSPEED,100h

	WL	ANI_CODE,DO_FLAME_SND

	WL	2,B3FH3F+FR1

	.word	ANI_CLR_STATUS
	WL	2,B3FH3F+FR2
	WL	2,B3FH3F+FR3
	WL	2,B3FH3F+FR4
	WL	2,B3FH3F+FR5
	WL	2,B3FH3F+FR6
	WL	2,B3FH3F+FR7

	.word	ANI_ATTACK_ON,AMODE_HDBUTT3,32,27,69,75	;mode,x,y,w,h
	WL	1,B3FH3F+FR8
	.word	ANI_ATTACK_OFF
	.word	ANI_ZERO_XZVELS

	WL	ANI_IFNOTSTATUS,kflvmissed_c
	WL	ANI_IFBLOCKED,kflvmissed_c		;Yes, I hit blocker
;hit
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,0,28000h,0h		;x,y,z vels
	WL	ANI_CODE,DO_FLAME_HIT_SND

	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO

	WLW	ANI_SET_XVEL,0A000h,AM_FACE_REL
	WL	2,B3FH3F+FR8
	WL	2,B3FH3F+FR9
	WL	2,B3FH3F+FR10
	WL	2,B3FH3F+FR11
	WLW	ANI_SET_XVEL,0000h,AM_FACE_REL

	.word	ANI_SET_RPTCOUNT,3	;3 times

kflvloop_butt
	.word	ANI_STARTATTACK,AT_HDBUTT,16
	.word	ANI_CLR_BUTCOUNT
	WL	ANI_CODE,DO_FLAME_SND

	WL	1,B3FH3F+FR1

	.word	ANI_CLR_STATUS
	WL	1,B3FH3F+FR2
	WL	1,B3FH3F+FR3
	WL	1,B3FH3F+FR4
	WL	1,B3FH3F+FR5
	WL	1,B3FH3F+FR6
	WL	1,B3FH3F+FR7

	.word	ANI_ATTACK_ON, AMODE_HDBUTT,32,47,60,55	;mode,x,y,w,h
	WL	1,B3FH3F+FR8
	.word	ANI_ATTACK_OFF
	.word	ANI_ZERO_XZVELS

	WL	ANI_IFNOTSTATUS,kflvmissed_c
	WL	ANI_IFBLOCKED,kflvmissed_c		;Yes, I hit blocker
;hit
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,0,28000h,0h		;x,y,z vels
	WL	ANI_CODE,DO_FLAME_HIT_SND

	WL	ANI_CODE,create_impact
	.WORD	ANI_INC_COMBO

	WLW	ANI_SET_XVEL,0C000h,AM_FACE_REL
	WL	1,B3FH3F+FR8
	WL	1,B3FH3F+FR9
	WL	1,B3FH3F+FR10
	WL	1,B3FH3F+FR11
	WLW	ANI_SET_XVEL,0000h,AM_FACE_REL

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,kflvloop_butt

	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,kflvCHECK_OTHER_BUT
	WL	ANI_CHANGEANIM,bam_combo_pile_driver_anim
kflvCHECK_OTHER_BUT
	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,kflvmissed_d
	WL	ANI_CHANGEANIM,bam_combo_graboh_anim

kflvmissed_c
	WL	3,B3FH3F+FR8
	WL	3,B3FH3F+FR9
	WL	3,B3FH3F+FR10
	WL	3,B3FH3F+FR11
kflvmissed_d
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.WORD	ANI_DETACH

	.word	ANI_WAITHITGND
	.word	ANI_ZEROVELS

	.word	ANI_SETFACING		;ANI_XFLIP <- not primary anim
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END


*****************************************************************************

 SUBR	bam_knees_anim
;From head hold mode

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
;	.word	ANI_SETPLYRMODE,MODE_NORMAL

	.word	ANI_SETWORD,USR_VAR2,0

	WL	2,B4KM3A+FR1
	.word	ANI_SET_RPTCOUNT,3	;3 times
	.WORD	ANI_ADD_MOVE,MOVE_C_7,2,2
yvzwrpt_loop
	.word	ANI_STARTATTACK,AT_KNEE,6
	.word	ANI_CLR_BUTCOUNT

	WL	2,B4KM3A+FR2
	WL	2,B4KM3A+FR3
	WL	2,B4KM3A+FR4
	.word	ANI_ATTACK_ON, AMODE_HEADKNEES,37,62,62,35	;mode,x,y,w,h
	WL	2,B4KM3A+FR5
	.word	ANI_ATTACK_OFF
	WL	2,B4KM3A+FR6
	WL	2,B4KM3A+FR7
	WL	2,B4KM3A+FR8
;	WL	1,B4KM3A+FR9

	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,yvzwmissed2
	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,yvzwrpt_loop
	.word	ANI_SETWORD,USR_VAR2,1
	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,yvzwmissed2

	.word	ANI_DETACH
;	WLW	ANI_SET_XVEL,18000h,AM_FACE_REL
	WL	ANI_CHANGEANIM,bam_3_hiptoss_anim
;	.word	ANI_END

yvzwmissed2
	WWWL	ANI_IF_BUTCOUNT_LT,SPUNCHB_COUNT,1,yvzwmissed3
	WL	ANI_CHANGEANIM,bam_4_graboh_anim
;	.word	ANI_END

yvzwmissed3
	WL	3,B4KM3A+FR10

	.word	ANI_DETACH
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

 SUBR	bam_combo_knees_anim
;From head hold mode

	.word	ANI_SETMODE,MODE_UNINT|MODE_NOAUTOFLIP	;uninterruptable
	.word	ANI_ZEROVELS
	.word	ANI_SETSPEED,100h
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.WORD	ANI_CLEAR_COMBO

	WL	2,B4KM3A+FR1
	.word	ANI_STARTATTACK,AT_KNEE,6

	WL	2,B4KM3A+FR2
	WL	2,B4KM3A+FR3
	WL	2,B4KM3A+FR4
	.WORD	ANI_INC_COMBO
	.word	ANI_ATTACK_ON, AMODE_KICK,37,42,62,35	;mode,x,y,w,h
	WL	2,B4KM3A+FR5
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,yvzwmissed3c
	.WORD	ANI_INC_COMBO
	WLLL	ANI_SETOPPVELS,0,18000h,0h		;x,y,z vels
	WL	2,B4KM3A+FR6
	WL	2,B4KM3A+FR7
	WL	2,B4KM3A+FR8

	WL	2,B4KM3A+FR1
	.word	ANI_SET_RPTCOUNT,3	;3 times
yvzwkn_loop
	.word	ANI_STARTATTACK,AT_KNEE,6
	.word	ANI_CLR_BUTCOUNT

	WL	1,B4KM3A+FR2
	WL	2,B4KM3A+FR3
	WL	1,B4KM3A+FR4
	.word	ANI_ATTACK_ON, AMODE_KICK,37,42,62,35	;mode,x,y,w,h
	WL	2,B4KM3A+FR5
	.word	ANI_ATTACK_OFF
	WL	ANI_IFNOTSTATUS,yvzwmissed3c
	.WORD	ANI_INC_COMBO
;	.word	ANI_SET_ATTACH
	WLLL	ANI_SETOPPVELS,0,18000h,0h		;x,y,z vels
	WL	1,B4KM3A+FR6
	WL	2,B4KM3A+FR7
	WL	1,B4KM3A+FR8

	.word	ANI_DEC_RPTCOUNT
	WL	ANI_IF_RPTCOUNT,yvzwkn_loop

	.word	ANI_DETACH

	WWWL	ANI_IF_BUTCOUNT_LT,KICKB_COUNT,1,yvzwCHECK_NEXT2
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_combo_hiptoss_anim

yvzwCHECK_NEXT2
	WWWL	ANI_IF_BUTCOUNT_LT,SKICKB_COUNT,1,yvzwCHECK_NEXT1
	.word	ANI_DETACH
	WL	ANI_CHANGEANIM,bam_flying_kick_no_xvel

yvzwCHECK_NEXT1
	WWWL	ANI_IF_BUTCOUNT_LT,PUNCHB_COUNT,1,yvzwmissed3d
	WL	ANI_CHANGEANIM,bam_combo_fpunch

yvzwmissed3c
	WL	2,B4KM3A+FR6
	WL	2,B4KM3A+FR7
	WL	2,B4KM3A+FR8

yvzwmissed3d
	WL	3,B4KM3A+FR10

	.word	ANI_DETACH
	WL	ANI_CODE,DO_COMBO_MESS
	.WORD	ANI_CLEAR_COMBO
	.word	ANI_FACEDOWN
	.word	ANI_SETMODE,MODE_NORMAL
	.word	ANI_SETPLYRMODE,MODE_NORMAL
	.word	ANI_END

******************************************************************************

	.end

